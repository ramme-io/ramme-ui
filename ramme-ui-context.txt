This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: **/*.lock, **/dist/**, **/storybook-static/**
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.storybook/
  main.ts
  preview.tsx
scripts/
  generate-manifest.js
  generate-registry.js
src/
  blocks/
    ai/
      Actions.tsx
      ChatFAB.tsx
      Conversation.tsx
      Loader.tsx
      Message.tsx
      PromptInput.tsx
    iot/
      DeviceCard.stories.tsx
      DeviceCard.tsx
  components/
    data-display/
      ActivityFeed.tsx
      BarChart.stories.tsx
      BarChart.tsx
      ChartWithTable.tsx
      CodeBlock.tsx
      DataTable.stories.tsx
      DataTable.tsx
      LineChart.stories.tsx
      LineChart.tsx
      PieChart.stories.tsx
      PieChart.tsx
      StatCard.stories.tsx
      StatCard.tsx
      StatusBadge.tsx
      Table.tsx
    feedback/
      Alert.stories.tsx
      Alert.tsx
      EmptyState.tsx
      TippyTooltip.stories.tsx
      TippyTooltip.tsx
      Toast.stories.tsx
      Toast.tsx
      ToastProvider.tsx
    forms/
      ButtonGroup.tsx
      Checkbox.tsx
      ComboBox.tsx
      DatePicker.stories.tsx
      DatePicker.tsx
      FileUpload.stories.tsx
      FileUpload.tsx
      FormTemplate.tsx
      Input.tsx
      MultiSelect.stories.tsx
      MultiSelect.tsx
      Radio.tsx
      SearchInput.tsx
      SegmentedControl.stories.tsx
      SegmentedControl.tsx
      Select.stories.tsx
      Select.tsx
      Textarea.tsx
      ToggleSwitch.tsx
      UnifiedForm.stories.tsx
    layout/
      Accordion.tsx
      ActionBar.tsx
      Card.stories.tsx
      Card.tsx
      Drawer.tsx
      List.tsx
      Modal.tsx
      PageHeader.tsx
      SectionHeader.tsx
      Sidebar.stories.tsx
      Sidebar.tsx
      StorySidebarContent.tsx
    navigation/
      Breadcrumbs.tsx
      Menu.stories.tsx
      Menu.tsx
      Pagination.tsx
      Stepper.tsx
      Tabs.tsx
    ui/
      Avatar.tsx
      Badge.stories.tsx
      Badge.tsx
      Button.stories.tsx
      Button.tsx
      icon-loader.ts
      Icon.tsx
  contexts/
    ThemeContext.stories.tsx
    ThemeContext.tsx
  data/
    mockData.ts
  lib/
    hooks/
      useChartTheme.ts
      useDataFetch.ts
    types/
      wizard.d.ts
  utils/
    cn.ts
  component-history.json
  component-registry.ts
  index.css
  index.ts
  index12272025.css
.gitignore
CHANGELOG.md
LICENSE
package.json
postcss.config.cjs
README.md
tailwind.config.cjs
tailwind.preset.js
tsconfig.json
v1.1.4
vite.config.ts
wizardManifest.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".storybook/main.ts">
import type { StorybookConfig } from '@storybook/react-vite';

const config: StorybookConfig = {
  stories: ['../src/**/*.stories.@(js|jsx|mjs|ts|tsx)'],
  addons: [
    '@storybook/addon-links',
    '@storybook/addon-essentials',
    '@storybook/addon-interactions',
    '@storybook/addon-themes', // <-- ADD THIS LINE
  ],
  framework: {
    name: '@storybook/react-vite',
    options: {},
  },
  docs: {
    autodocs: 'tag',
  },
};
export default config;
</file>

<file path=".storybook/preview.tsx">
import type { Preview, Decorator } from '@storybook/react';
import React from 'react';
import { ThemeProvider } from '../src/contexts/ThemeContext';
import '../src/index.css';

// This decorator provides the necessary React Context for `useTheme`
// AND handles applying the theme class to the document.
const withThemeProvider: Decorator = (Story) => {
  return (
    <ThemeProvider>
      <Story />
    </ThemeProvider>
  );
};

const preview: Preview = {
  parameters: {
    controls: {
      matchers: {
        color: /(background|color)$/i,
        date: /Date$/i,
      },
    },
  },
  // Apply our custom decorator globally to all stories
  decorators: [withThemeProvider],
};

export default preview;
</file>

<file path="scripts/generate-registry.js">
const fs = require('fs');
const path = require('path');

// --- CONFIGURATION ---
// The "Baton" passed from generate-manifest.js
const TEMP_FILE = path.resolve(__dirname, 'manifest.temp.json');
// The Output file for the library
const OUTPUT_FILE = path.join(__dirname, '../src/component-registry.ts');

function generateRegistry() {
  console.log('üè≠ Generating Component Registry from Manifest...');

  // 1. Safety Check: Did the first script run?
  if (!fs.existsSync(TEMP_FILE)) {
    console.error('‚ùå Error: manifest.temp.json not found.');
    console.error('üëâ Make sure to run "generate-manifest.js" first.');
    process.exit(1);
  }

  // 2. Read the "Truth" from the Manifest step
  const components = JSON.parse(fs.readFileSync(TEMP_FILE, 'utf-8'));

  // 3. Build Import Statements
  // We use the 'path' calculated by the previous script (e.g. "./components/ui/Button")
  const imports = components.map(c => `import { ${c.name} } from '${c.path}';`).join('\n');
  
  // 4. Build the Registry Object
  const mappingLines = components.map(c => {
    // A. PascalCase (Standard) -> "DataTable": DataTable
    let lines = `  '${c.name}': ${c.name},`;
    
    // B. kebab-case (Stable ID from Manifest) -> "data-table": DataTable
    // This connects the CMS/Wizard ID directly to the code!
    if (c.id && c.id !== c.name) {
      lines += `\n  '${c.id}': ${c.name},`;
    }

    // C. lowercase (Robustness Fallback) -> "datatable": DataTable
    const lower = c.name.toLowerCase();
    // Avoid duplicates if ID or Name is already lowercase
    if (lower !== c.id && lower !== c.name) {
       lines += `\n  '${lower}': ${c.name},`;
    }

    return lines;
  }).join('\n');

  // 5. Construct File Content
  const fileContent = `// ‚ö†Ô∏è AUTO-GENERATED by scripts/generate-registry.js
// Do not edit manually.
import React from 'react';
${imports}

export const AUTO_REGISTRY: Record<string, React.FC<any>> = {
${mappingLines}
};
`;

  // 6. Write to Disk
  fs.writeFileSync(OUTPUT_FILE, fileContent);
  
  // 7. Cleanup (Optional but clean)
  // We remove the temp file so it doesn't get committed or stale
  fs.unlinkSync(TEMP_FILE);
  
  console.log(`‚úÖ Generated registry with ${components.length} components.`);
  console.log(`üßπ Cleaned up temp file.`);
}

generateRegistry();
</file>

<file path="src/blocks/iot/DeviceCard.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { DeviceCard } from './DeviceCard';
import { ToggleSwitch } from '../../components/forms/ToggleSwitch';
import { Button } from '../../components/ui/Button';

const meta: Meta<typeof DeviceCard> = {
  title: 'Layout/DeviceCard',
  component: DeviceCard,
  tags: ['autodocs'],
  argTypes: {
    status: {
      control: 'select',
      options: ['online', 'offline', 'error', 'warning', 'active'],
    },
    icon: { control: 'text' },
  },
};

export default meta;
type Story = StoryObj<typeof DeviceCard>;

// 1. The Standard IoT Use Case
export const Thermostat: Story = {
  args: {
    title: 'Living Room AC',
    description: 'Main Floor ‚Ä¢ Zone A',
    icon: 'thermometer', // Make sure this icon exists in your Lucide set or use 'activity'
    status: 'online',
    value: '72¬∞F',
    trend: 'Cooling...',
    children: (
      <div className="flex items-center justify-between">
         <span className="text-sm font-medium">Power</span>
         {/* FIX: Added required 'label' prop (empty string) since we have a custom label above */}
         <ToggleSwitch 
            checked={true} 
            onChange={() => {}} 
            aria-label="Toggle AC" 
            label="" 
         />
      </div>
    ),
  },
};

// 2. The DevOps / Server Use Case
export const ServerMonitor: Story = {
  args: {
    title: 'AWS-East-01',
    description: 't3.micro ‚Ä¢ 192.168.1.4',
    icon: 'server',
    status: 'error',
    value: '98% CPU',
    trend: 'Critical Load',
    children: (
      <div className="flex gap-2">
        <Button variant="danger" size="sm" className="w-full">Reboot</Button>
        <Button variant="outline" size="sm" className="w-full">Logs</Button>
      </div>
    ),
  },
};

// 3. The Simple Sensor (No Controls)
export const HumiditySensor: Story = {
  args: {
    title: 'Greenhouse 1',
    description: 'Sensor ID: GH-001',
    icon: 'droplets', 
    status: 'active',
    value: '64%',
    trend: 'Stable',
  },
};
</file>

<file path="src/components/data-display/BarChart.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { BarChart } from './BarChart';
import { Card } from '../layout/Card';

// FIX: Change `const meta = { ... } satisfies Meta<...>` to `const meta: Meta<...> = { ... }`
const meta: Meta<typeof BarChart> = {
  title: 'Charts/BarChart',
  component: BarChart,
  decorators: [
    (Story) => (
      <Card className="p-6 w-[700px] h-[400px]">
        <Story />
      </Card>
    ),
  ],
};

export default meta;
type Story = StoryObj<typeof meta>;

const salesData = [
    { name: 'Jan', revenue: 4000, expenses: 2400 },
    { name: 'Feb', revenue: 3000, expenses: 1398 },
    { name: 'Mar', revenue: 2000, expenses: 9800 },
    { name: 'Apr', revenue: 2780, expenses: 3908 },
    { name: 'May', revenue: 1890, expenses: 4800 },
    { name: 'Jun', revenue: 2390, expenses: 3800 },
];

export const Default: Story = {
  args: {
    data: salesData,
    dataKeyX: 'name',
    barKeys: ['revenue', 'expenses'],
  },
};
</file>

<file path="src/components/data-display/DataTable.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { DataTable } from './DataTable';
import { ColDef } from 'ag-grid-community';

const meta = {
  title: 'Data Display/DataTable',
  component: DataTable,
  tags: ['autodocs'],
} satisfies Meta<typeof DataTable>;

export default meta;
type Story = StoryObj<typeof meta>;

// --- Mock Data and Columns ---
const rowData = [
  { make: 'Tesla', model: 'Model Y', price: 64950, electric: true },
  { make: 'Ford', model: 'F-Series', price: 33850, electric: false },
  { make: 'Toyota', model: 'Corolla', price: 29600, electric: false },
  { make: 'Mercedes', model: 'EQS', price: 104400, electric: true },
];

const columnDefs: ColDef[] = [
  { field: 'make' },
  { field: 'model' },
  { field: 'price' },
  { field: 'electric' },
];

export const Default: Story = {
  args: {
    rowData: rowData,
    columnDefs: columnDefs,
    height: '400px',
  },
};
</file>

<file path="src/components/data-display/LineChart.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { LineChart } from './LineChart';
import { Card } from '../layout/Card';

const meta: Meta<typeof LineChart> = {
  title: 'Charts/LineChart',
  component: LineChart,
  decorators: [
    (Story) => (
      <Card className="p-6 w-[700px] h-[400px]">
        <Story />
      </Card>
    ),
  ],
};

export default meta;
type Story = StoryObj<typeof meta>;

// --- 1. UPDATED THE DATA ---
// Added a numeric timestamp and null values
const userData = [
    { timestamp: 1762960500, newUsers: 120, returningUsers: 80 },
    { timestamp: 1762964100, newUsers: 150, returningUsers: 110 },
    { timestamp: 1762967700, newUsers: 130, returningUsers: 160 },
    { timestamp: 1762971300, newUsers: 210, returningUsers: 140 },
    { timestamp: 1762974900, newUsers: 250, returningUsers: 190 },
    { timestamp: 1762978500, newUsers: 220, returningUsers: 210 },
    { timestamp: 1762982100, newUsers: 260, returningUsers: null }, // Test connectNulls
    { timestamp: 1762985700, newUsers: 290, returningUsers: 250 },
];

export const Default: Story = {
  args: {
    data: userData,
    dataKeyX: 'timestamp', // Using the numeric key
    lineKeys: ['newUsers', 'returningUsers'],
  },
};

// --- 2. ADDED A NEW "FIXED" STORY ---
export const LinesWithCustomAxis: Story = {
  args: {
    data: userData,
    dataKeyX: 'timestamp',
    lineKeys: ['newUsers', 'returningUsers'],
    
    // --- Test our "Moat" props ---
    dot: false,
    connectNulls: true,

    // --- Test our new xAxisProps (THE FIX) ---
    xAxisProps: {
      type: 'number',
      domain: ['dataMin', 'dataMax'],
      // This is the formatter that fixes the "wonky" numbers
      tickFormatter: (timestamp: number) => 
        new Date(timestamp * 1000).toLocaleTimeString([], {
          hour: '2-digit',
          minute: '2-digit',
        }),
      interval: 'preserveStartEnd',
    },

    // --- Test our new yAxisProps ---
    yAxisProps: {
      domain: [0, 300], // Lock the Y-axis
      tickFormatter: (value: number) => `$${value}`, // Add a $ prefix
    },
  },
};

// --- 3. ADDED A STORY FOR THE "NO DATA" STATE ---
export const Empty: Story = {
  args: {
    data: [], // Pass empty data
    dataKeyX: 'timestamp',
    lineKeys: ['newUsers', 'returningUsers'],
  },
};
</file>

<file path="src/components/data-display/PieChart.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { PieChart } from './PieChart';
import { Card } from '../layout/Card';

const meta: Meta<typeof PieChart> = {
  title: 'Charts/PieChart',
  component: PieChart,
  decorators: [
    (Story) => (
      <Card className="p-6 w-[700px] h-[400px]">
        <Story />
      </Card>
    ),
  ],
};

export default meta;
type Story = StoryObj<typeof meta>;

const trafficData = [
    { name: 'Organic', value: 400 },
    { name: 'Direct', value: 300 },
    { name: 'Referral', value: 300 },
    { name: 'Social', value: 200 },
];

export const Default: Story = {
  args: {
    data: trafficData,
    dataKey: 'value',
    nameKey: 'name',
  },
};
</file>

<file path="src/components/data-display/StatCard.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { StatCard } from './StatCard';

const meta = {
  title: 'Templates & Patterns/StatCard',
  component: StatCard,
  tags: ['autodocs'],
} satisfies Meta<typeof StatCard>;

export default meta;
type Story = StoryObj<typeof meta>;

export const Default: Story = {
  args: {
    icon: 'dollar-sign',
    title: 'Total Revenue',
    value: '$45,231.89',
    footerText: 'Updated 2 minutes ago',
  },
};

export const PositiveChange: Story = {
    args: {
      icon: 'users',
      title: 'New Users',
      value: '+1,245',
      changeDirection: 'positive',
      changeText: '+12.5% this month',
    },
  };
  
  export const NegativeChange: Story = {
    args: {
      icon: 'trending-down',
      title: 'Active Now',
      value: '329',
      changeDirection: 'negative',
      changeText: '-5.2% since last hour',
    },
  };
</file>

<file path="src/components/feedback/Alert.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { Alert } from './Alert';

const meta = {
  title: 'Feedback/Alert',
  component: Alert,
  tags: ['autodocs'],
  argTypes: {
    variant: {
      control: 'select',
      options: ['info', 'success', 'warning', 'danger'],
    },
    title: {
      control: 'text',
    },
    children: {
      control: 'text',
    },
  },
} satisfies Meta<typeof Alert>;

export default meta;
type Story = StoryObj<typeof meta>;

export const Info: Story = {
  args: {
    variant: 'info',
    title: 'Information',
    children: 'This is an informational alert.',
  },
};

export const Success: Story = {
  args: {
    variant: 'success',
    title: 'Success',
    children: 'Your action was completed successfully.',
  },
};

export const Warning: Story = {
  args: {
    variant: 'warning',
    title: 'Warning',
    children: 'Please be aware of this important notice.',
  },
};

export const Danger: Story = {
  args: {
    variant: 'danger',
    title: 'Danger',
    children: 'There was an error processing your request.',
  },
};
</file>

<file path="src/components/feedback/TippyTooltip.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { TippyTooltip } from './TippyTooltip';
import { Button } from '../ui/Button';

const meta = {
  title: 'Feedback/TippyTooltip',
  component: TippyTooltip,
  parameters: {
    layout: 'centered',
  },
  tags: ['autodocs'],
  argTypes: {
    content: { control: 'text' },
    placement: {
      control: 'select',
      options: ['top', 'bottom', 'left', 'right'],
    },
  },
} satisfies Meta<typeof TippyTooltip>;

export default meta;
type Story = StoryObj<typeof meta>;

export const Default: Story = {
  args: {
    content: 'This is a tooltip!',
    children: <Button>Hover over me</Button>,
  },
};
</file>

<file path="src/components/feedback/Toast.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { Toast } from './Toast';

const meta = {
  title: 'Feedback/Toast',
  component: Toast,
  argTypes: {
    type: {
      control: 'select',
      options: ['info', 'success', 'warning', 'error'],
    },
  },
} satisfies Meta<typeof Toast>;

export default meta;
type Story = StoryObj<typeof meta>;

// In a real app, onDismiss would be handled by a provider.
const onDismiss = () => alert('Toast dismissed!');

export const Info: Story = {
  args: {
    id: '1',
    type: 'info',
    title: 'Heads up!',
    message: 'A new software update is available.',
    onDismiss,
  },
};

export const Success: Story = {
  args: {
    id: '2',
    type: 'success',
    title: 'Success!',
    message: 'Your profile has been updated.',
    onDismiss,
  },
};

export const Warning: Story = {
    args: {
      id: '3',
      type: 'warning',
      title: 'Warning',
      message: 'Your session is about to expire.',
      onDismiss,
    },
  };

  export const Error: Story = {
    args: {
      id: '4',
      type: 'error',
      title: 'Error',
      message: 'Could not connect to the server.',
      onDismiss,
    },
  };
</file>

<file path="src/components/forms/FileUpload.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { FileUpload } from './FileUpload';

const meta: Meta<typeof FileUpload> = {
  title: 'Forms/FileUpload',
  component: FileUpload,
  tags: ['autodocs'],
  decorators: [
    (Story) => (
      <div className="w-full max-w-md p-4">
        <Story />
      </div>
    ),
  ],
};

export default meta;
type Story = StoryObj<typeof FileUpload>;

export const Default: Story = {
  args: {
    label: 'Upload Evidence',
    helperText: 'Max file size: 10MB',
    onFileUpload: (files) => console.log('Files dropped:', files),
  },
};

export const MultipleImages: Story = {
  args: {
    label: 'Gallery Photos',
    multiple: true,
    acceptedFileTypes: 'image/*',
    helperText: 'Supported formats: JPG, PNG',
    onFileUpload: (files) => console.log('Files dropped:', files),
  },
};
</file>

<file path="src/components/forms/MultiSelect.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { useState } from 'react';
import { MultiSelect, type MultiSelectOption } from './MultiSelect';

const meta: Meta<typeof MultiSelect> = {
  title: 'Forms/MultiSelect',
  component: MultiSelect,
  tags: ['autodocs'],
  decorators: [
    (Story) => (
      <div className="h-64 w-full max-w-sm p-4">
        <Story />
      </div>
    ),
  ],
};

export default meta;
type Story = StoryObj<typeof MultiSelect>;

const options: MultiSelectOption[] = [
  { value: 'react', label: 'React' },
  { value: 'vue', label: 'Vue' },
  { value: 'angular', label: 'Angular' },
  { value: 'svelte', label: 'Svelte' },
  { value: 'nextjs', label: 'Next.js' },
];

export const Default: Story = {
  render: (args) => {
    const [val, setVal] = useState<MultiSelectOption[] | null>([]);
    return <MultiSelect {...args} value={val} onChange={setVal} />;
  },
  args: {
    label: 'Tech Stack',
    options: options,
    placeholder: 'Select frameworks...',
  },
};

export const PreSelected: Story = {
  render: (args) => {
    const [val, setVal] = useState<MultiSelectOption[] | null>([options[0], options[4]]);
    return <MultiSelect {...args} value={val} onChange={setVal} />;
  },
  args: {
    label: 'Favorites',
    options: options,
  },
};

export const WithError: Story = {
  render: (args) => {
    const [val, setVal] = useState<MultiSelectOption[] | null>([]);
    return <MultiSelect {...args} value={val} onChange={setVal} />;
  },
  args: {
    label: 'Required Skills',
    options: options,
    error: true,
    helperText: 'Please select at least one skill.',
  },
};
</file>

<file path="src/components/forms/SegmentedControl.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { useState } from 'react';
import { SegmentedControl } from './SegmentedControl';

const meta: Meta<typeof SegmentedControl> = {
  title: 'Forms/SegmentedControl',
  component: SegmentedControl,
  tags: ['autodocs'],
  decorators: [
    (Story) => (
      <div className="p-8 w-full max-w-xl">
        <Story />
      </div>
    ),
  ],
};

export default meta;
type Story = StoryObj<typeof SegmentedControl>;

const viewOptions = [
  { label: 'Map View', value: 'map' },
  { label: 'List View', value: 'list' },
  { label: 'Grid View', value: 'grid' },
];

const priorityOptions = [
  { label: 'Low', value: 'low' },
  { label: 'Medium', value: 'medium' },
  { label: 'High', value: 'high' },
  { label: 'Critical', value: 'critical', disabled: true },
];

export const Default: Story = {
  render: (args) => {
    const [val, setVal] = useState('list');
    return <SegmentedControl {...args} value={val} onChange={setVal} />;
  },
  args: {
    options: viewOptions,
  },
};

export const Small: Story = {
  render: (args) => {
    const [val, setVal] = useState('low');
    return <SegmentedControl {...args} value={val} onChange={setVal} />;
  },
  args: {
    options: priorityOptions,
    size: 'sm',
  },
};

export const FullWidth: Story = {
  render: (args) => {
    const [val, setVal] = useState('map');
    return <SegmentedControl {...args} value={val} onChange={setVal} />;
  },
  args: {
    options: viewOptions,
    className: 'w-full grid grid-cols-3', // Tailwind grid allows it to stretch
  },
};
</file>

<file path="src/components/forms/Select.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { useState } from 'react';
import { Select, type SelectOption } from './Select';

const meta: Meta<typeof Select> = {
  title: 'Forms/Select',
  component: Select,
  tags: ['autodocs'],
  decorators: [
    (Story) => (
      <div className="h-64 w-full max-w-sm p-4">
        {/* Container with height to allow dropdown expansion */}
        <Story />
      </div>
    ),
  ],
};

export default meta;
type Story = StoryObj<typeof Select>;

const options: SelectOption[] = [
  { value: 'apple', label: 'Apple' },
  { value: 'banana', label: 'Banana' },
  { value: 'cherry', label: 'Cherry' },
  { value: 'durian', label: 'Durian' },
  { value: 'elderberry', label: 'Elderberry' },
];

export const Default: Story = {
  render: (args) => {
    const [val, setVal] = useState<SelectOption | null>(null);
    return <Select {...args} value={val} onChange={setVal} />;
  },
  args: {
    label: 'Favorite Fruit',
    options: options,
    placeholder: 'Pick a fruit...',
  },
};

export const WithError: Story = {
  render: (args) => {
    const [val, setVal] = useState<SelectOption | null>(null);
    return <Select {...args} value={val} onChange={setVal} />;
  },
  args: {
    label: 'Required Field',
    options: options,
    error: true,
    helperText: 'This field is required.',
  },
};

export const Loading: Story = {
  args: {
    label: 'Async Data',
    options: [],
    isLoading: true,
    placeholder: 'Loading options...',
  },
};

export const Disabled: Story = {
  args: {
    label: 'Locked Setting',
    options: options,
    value: options[0], // Pre-selected
    isDisabled: true,
  },
};
</file>

<file path="src/components/forms/UnifiedForm.stories.tsx">
import React, { useState } from 'react';
import type { Meta, StoryObj } from '@storybook/react';
import { Card } from '../layout/Card';
import { Button } from '../ui/Button';
import { Input } from './Input';
import { Select, type SelectOption } from './Select';
import { MultiSelect, type MultiSelectOption } from './MultiSelect'; // Added
import { SegmentedControl } from './SegmentedControl'; // Added
import { DatePicker } from './DatePicker';
import { FileUpload } from './FileUpload';
import { ToggleSwitch } from './ToggleSwitch';
import { SectionHeader } from '../layout/SectionHeader';

const UnifiedFormWrapper = () => {
  const [formData, setFormData] = useState({
    title: '',
    category: null as SelectOption | null,
    tags: [] as MultiSelectOption[] | null,
    priority: 'medium',
    date: new Date(),
    isPublic: true,
  });

  return (
    <Card className="max-w-2xl mx-auto p-8 shadow-lg bg-card">
      <SectionHeader title="Create New Project" className="mb-6" />
      
      <form className="space-y-6" onSubmit={(e) => e.preventDefault()}>
        
        {/* Row 1: Title & Priority (Segmented Control) */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
          <Input 
            label="Project Title" 
            placeholder="e.g. Q4 Marketing Campaign"
            value={formData.title}
            onChange={e => setFormData({...formData, title: e.target.value})}
          />
          
          <div className="space-y-1.5">
            <label className="block text-sm font-medium text-foreground">Priority</label>
            <SegmentedControl 
              value={formData.priority}
              onChange={val => setFormData({...formData, priority: val})}
              options={[
                { label: 'Low', value: 'low' },
                { label: 'Medium', value: 'medium' },
                { label: 'High', value: 'high' },
              ]}
              className="w-full grid grid-cols-3" // Stretch to fill width
            />
          </div>
        </div>

        {/* Row 2: Category (Select) & Tags (MultiSelect) */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <Select 
            label="Department"
            options={[
              { value: 'marketing', label: 'Marketing' },
              { value: 'engineering', label: 'Engineering' },
              { value: 'design', label: 'Design' },
            ]}
            value={formData.category}
            onChange={val => setFormData({...formData, category: val})}
            placeholder="Select Dept..."
          />

          <MultiSelect 
            label="Tags"
            options={[
              { value: 'urgent', label: 'Urgent' },
              { value: 'internal', label: 'Internal' },
              { value: 'client', label: 'Client Facing' },
            ]}
            value={formData.tags}
            onChange={val => setFormData({...formData, tags: val})}
            placeholder="Add tags..."
          />
        </div>

        {/* Row 3: Date & Toggle */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <DatePicker 
            label="Deadline"
            selected={formData.date}
            onChange={date => date && setFormData({...formData, date})}
          />
          
          {/* Toggle vertically centered with input */}
          <div className="flex items-end h-full pb-2">
            <ToggleSwitch 
              label="Make Project Public"
              checked={formData.isPublic}
              onChange={checked => setFormData({...formData, isPublic: checked})}
            />
          </div>
        </div>

        {/* File Upload (Full Width) */}
        <FileUpload 
          label="Project Assets"
          multiple
          helperText="Attach specifications or briefs (PDF, PNG)."
          acceptedFileTypes=".pdf,.png,.jpg"
          onFileUpload={(files) => console.log('Uploaded:', files)}
        />

        {/* Action Bar */}
        <div className="pt-6 border-t border-border flex justify-end gap-3">
          <Button variant="outline">Cancel</Button>
          <Button variant="primary">Create Project</Button>
        </div>

      </form>
    </Card>
  );
};

const meta: Meta = {
  title: 'Forms/Patterns/UnifiedForm',
  component: UnifiedFormWrapper,
  parameters: {
    layout: 'padded',
  },
};

export default meta;
type Story = StoryObj;

export const Example: Story = {};
</file>

<file path="src/components/navigation/Menu.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { Menu, MenuItem, MenuDivider } from './Menu';
import { Button } from '../ui/Button';
import { Icon } from '../ui/Icon';

const meta = {
  title: 'Navigation/Menu',
  component: Menu,
  parameters: {
    // We use a larger layout and custom padding to see the dropdown
    layout: 'fullscreen',
    // Add custom padding to center the component
    controls: {
      story: {
        iframeHeight: 300,
        inline: false,
      },
    },
  },
  decorators: [
    (Story) => (
      <div className="flex justify-center items-center h-[300px]">
        <Story />
      </div>
    ),
  ],
  tags: ['autodocs'],
  argTypes: {
    position: {
      control: 'select',
      options: ['bottom-left', 'bottom-right', 'top-left', 'top-right'],
    },
    trigger: {
      control: false, // The trigger is part of the story, not a prop
    },
    children: {
      control: false, // Children are part of the story, not a prop
    },
  },
} satisfies Meta<typeof Menu>;

export default meta;
type Story = StoryObj<typeof meta>;

/**
 * The default Menu component used as a dropdown.
 */
export const Default: Story = {
  args: {
    position: 'bottom-right',
    trigger: (
      <Button variant="outline" iconRight="chevron-down">
        Open Menu
      </Button>
    ),
    children: (
      <>
        <MenuItem>Edit</MenuItem>
        <MenuItem>Duplicate</MenuItem>
        <MenuDivider />
        <MenuItem disabled>Archive</MenuItem>
        <MenuItem>Delete</MenuItem>
      </>
    ),
  },
};

/**
 * A Menu component with `MenuItem` components that include icons.
 */
export const WithIcons: Story = {
  args: {
    position: 'bottom-right',
    trigger: (
      <Button variant="primary" iconRight="chevron-down">
        Actions
      </Button>
    ),
    children: (
      <>
        <MenuItem icon={<Icon name="edit-3" />}>Edit File</MenuItem>
        <MenuItem icon={<Icon name="copy" />}>Duplicate</MenuItem>
        <MenuItem icon={<Icon name="share-2" />}>Share</MenuItem>
        <MenuDivider />
        <MenuItem icon={<Icon name="trash-2" />}>Delete File</MenuItem>
      </>
    ),
  },
};

/**
 * This story demonstrates the `asChild` prop. The "View Profile"
 * item is a standard `MenuItem` rendering a button. The "Open Google"
 * item uses `asChild` to render as an `<a>` tag.
 */
export const PolymorphicLink: Story = {
  name: 'Polymorphic (as Link)',
  args: {
    position: 'bottom-left',
    trigger: (
      <Button variant="secondary" iconLeft="user" iconRight="chevron-down">
        User Menu
      </Button>
    ),
    children: (
      <>
        <MenuItem icon={<Icon name="user-check" />}>View Profile</MenuItem>
        <MenuItem icon={<Icon name="settings" />}>Settings</MenuItem>
        <MenuDivider />
        {/* This is the key test case */}
        <MenuItem
          asChild
          icon={<Icon name="external-link" />}
        >
          <a
            href="https://google.com"
            target="_blank"
            rel="noopener noreferrer"
          >
            Open Google
          </a>
        </MenuItem>
      </>
    ),
  },
};
</file>

<file path="src/components/ui/Badge.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { Badge } from './Badge';

const meta = {
  title: 'UI/Badge',
  component: Badge,
  parameters: {
    layout: 'centered',
  },
  tags: ['autodocs'],
  argTypes: {
    variant: {
      control: 'select',
      options: ['primary', 'secondary', 'danger', 'success', 'outline'],
    },
    children: {
      control: 'text',
    },
  },
} satisfies Meta<typeof Badge>;

export default meta;
type Story = StoryObj<typeof meta>;

export const Primary: Story = {
  args: {
    variant: 'primary',
    children: 'Primary',
  },
};

export const Secondary: Story = {
  args: {
    variant: 'secondary',
    children: 'Secondary',
  },
};

export const Danger: Story = {
  args: {
    variant: 'danger',
    children: 'Danger',
  },
};

export const Success: Story = {
  args: {
    variant: 'success',
    children: 'Success',
  },
};

export const Outline: Story = {
  args: {
    variant: 'outline',
    children: 'Outline',
  },
};
</file>

<file path="src/components/ui/icon-loader.ts">
// packages/ui/src/ui/icon-loader.ts
import { icons } from 'lucide-react';

export type IconName = keyof typeof icons;

export const dynamicIconImports = Object.keys(icons).reduce((acc, iconName) => {
  acc[iconName as IconName] = () => import(`lucide-react/dist/esm/icons/${iconName}`);
  return acc;
}, {} as Record<IconName, () => Promise<any>>);
</file>

<file path="src/lib/hooks/useDataFetch.ts">
// packages/ui/src/hooks/useDataFetch.ts

"use client";

import { useState, useCallback } from 'react';

export const useDataFetch = <T>(
  initialData: T | null,
  mockDataSource: T
) => {
  const [data, setData] = useState<T | null>(initialData);
  const [loading, setLoading] = useState<boolean>(true);
  const [error, setError] = useState<string | null>(null);

  const fetchData = useCallback(async () => {
    setLoading(true);
    setError(null);
    try {
      // Simulate network delay
      await new Promise(resolve => setTimeout(resolve, 1000));
      setData(mockDataSource);
    } catch (err) {
      setError('Failed to fetch data');
      console.error(err);
    } finally {
      setLoading(false);
    }
  }, [mockDataSource]);

  // Initial fetch on mount
  useState(() => {
    fetchData();
  });

  return { data, loading, error, fetchData };
};
</file>

<file path="src/utils/cn.ts">
import { type ClassValue, clsx } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
</file>

<file path="src/index12272025.css">
/* Import Tailwind base styles */
@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* Import styles for third-party libraries */
@import 'ag-grid-community/styles/ag-grid.css';
@import 'ag-grid-community/styles/ag-theme-quartz.css';
@import 'react-datepicker/dist/react-datepicker.css';
@import 'tippy.js/dist/tippy.css';

/*
==============================================
RAMME THEME V2.0 - CSS VARIABLE DEFINITIONS
==============================================
- The :root selector defines the default 'light' theme.
- Each subsequent theme class overrides these variables.
*/

:root {
  /* === LAYER 1: BRAND IDENTITY === */
  --app-font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --app-font-serif: Georgia, Cambria, 'Times New Roman', Times, serif;
  --app-font-mono: 'Menlo', 'Monaco', 'Courier New', monospace;

  /* === LAYER 2: COLOR SYSTEM === */
  --app-primary-color: 13 110 253;
  --app-primary-foreground-color: 255 255 255;
  --app-secondary-color: 108 117 125;
  --app-secondary-foreground-color: 255 255 255;
  --app-accent-color: 23 162 184;
  --app-accent-foreground-color: 255 255 255;
  --app-danger-color: 220 53 69;
  --app-danger-foreground-color: 255 255 255;
  --app-text-color: 33 37 41;
  --app-bg-color: 248 249 250;
  --app-card-bg-color: 255 255 255;
  --app-border-color: 222 226 230;
  
  /* === LAYER 3: SHAPE & BORDERS === */
  --app-border-radius-sm: 0.2rem;
  --app-border-radius-md: 0.375rem;
  --app-border-radius-lg: 0.5rem;
  --app-border-radius-full: 9999px;
  --app-border-width: 1px;

  /* === LAYER 4: FORM CONTROLS === */
  --app-input-bg-color: 255 255 255;
  --app-input-text-color: 33 37 41;
  --app-input-border-color: 206 212 218;
  --app-input-focus-ring-color: 13 110 253;
  --app-input-placeholder-color: 108 117 125;

  /* === LAYER 5: COMPONENT-SPECIFIC STYLES === */
  --app-table-header-bg: 248 249 250;
  --app-table-header-text: 73 80 87;
  --app-table-row-hover-bg: 233 236 239;
  --app-table-grid-line-color: 222 226 230;
  --app-chart-palette: 13 110 253, 108 117 125, 23 162 184, 255 193 7, 220 53 69;
  --app-chart-grid-color: 233 236 239;

    /* Notification Colors */
  --app-info-color: 59 130 246; /* blue-500 */
  --app-info-foreground-color: 255 255 255;
  --app-success-color: 34 197 94; /* green-500 */
  --app-success-foreground-color: 255 255 255;
  --app-warning-color: 245 158 11; /* amber-500 */
  --app-warning-foreground-color: 255 255 255;

  /* Chart Colors */
  --app-chart-1: 139 92 246; /* violet-500 */
  --app-chart-2: 234 179 8; /* yellow-500 */
  --app-chart-3: 163 230 53; /* lime-400 */
  --app-chart-4: 52 211 153; /* emerald-400 */
  --app-chart-5: 251 113 133; /* rose-400 */
  
}

/* --- Dark Theme --- */
.dark {
  --app-primary-color: 110 168 254;
  --app-primary-foreground-color: 5 20 40;
  --app-secondary-color: 173 181 189;
  --app-secondary-foreground-color: 5 20 40;
  --app-accent-color: 77 189 207;
  --app-accent-foreground-color: 5 20 40;
  --app-text-color: 233 236 239;
  --app-bg-color: 11 17 23;
  --app-card-bg-color: 26 35 46;
  --app-border-color: 73 80 87;
  
  --app-input-bg-color: 33 37 41;
  --app-input-text-color: 233 236 239;
  --app-input-border-color: 73 80 87;
  --app-input-focus-ring-color: 110 168 254;
  --app-input-placeholder-color: 173 181 189;

  --app-table-header-bg: 33 37 41;
  --app-table-header-text: 206 212 218;
  --app-table-row-hover-bg: 52 58 64;
  --app-table-grid-line-color: 73 80 87;
  --app-chart-palette: 110 168 254, 173 181 189, 77 189 207, 255 193 7, 220 53 69;
  --app-chart-grid-color: 52 58 64;

    /* Notification Colors */
  --app-info-color: 59 130 246; /* blue-500 */
  --app-info-foreground-color: 255 255 255;
  --app-success-color: 34 197 94; /* green-500 */
  --app-success-foreground-color: 255 255 255;
  --app-warning-color: 245 158 11; /* amber-500 */
  --app-warning-foreground-color: 255 255 255;

  /* Chart Colors */
  --app-chart-1: 139 92 246; /* violet-500 */
  --app-chart-2: 234 179 8; /* yellow-500 */
  --app-chart-3: 163 230 53; /* lime-400 */
  --app-chart-4: 52 211 153; /* emerald-400 */
  --app-chart-5: 251 113 133; /* rose-400 */
}

/* --- Corporate Theme --- */
.corporate {
  --app-font-sans: 'Lato', sans-serif;
  --app-font-serif: 'Merriweather', serif;
  --app-primary-color: 16 185 129;
  --app-primary-foreground-color: 255 255 255;
  --app-secondary-color: 245 158 11;
  --app-secondary-foreground-color: 255 255 255;
  --app-accent-color: 59 130 246;
  --app-accent-foreground-color: 255 255 255;
  --app-text-color: 55 65 81;
  --app-bg-color: 249 250 251;
  --app-card-bg-color: 255 255 255;
  --app-border-color: 209 213 219;

  --app-border-radius-md: 0.25rem; /* Sharper corners */

  --app-input-bg-color: 255 255 255;
  --app-input-text-color: 55 65 81;
  --app-input-border-color: 209 213 219;
  --app-input-focus-ring-color: 59 130 246;
  --app-input-placeholder-color: 156 163 175;

  --app-table-header-bg: 243 244 246;
  --app-table-header-text: 75 85 99;
  --app-table-row-hover-bg: 229 231 235;
  --app-table-grid-line-color: 209 213 219;
  --app-chart-grid-color: 229 231 235;

    /* Notification Colors */
  --app-info-color: 59 130 246; /* blue-500 */
  --app-info-foreground-color: 255 255 255;
  --app-success-color: 34 197 94; /* green-500 */
  --app-success-foreground-color: 255 255 255;
  --app-warning-color: 245 158 11; /* amber-500 */
  --app-warning-foreground-color: 255 255 255;

  /* Chart Colors */
  --app-chart-1: 139 92 246; /* violet-500 */
  --app-chart-2: 234 179 8; /* yellow-500 */
  --app-chart-3: 163 230 53; /* lime-400 */
  --app-chart-4: 52 211 153; /* emerald-400 */
  --app-chart-5: 251 113 133; /* rose-400 */

}

/* --- Midnight Theme --- */
.midnight {
  --app-font-sans: 'Roboto Mono', monospace;
  --app-primary-color: 129 140 248;
  --app-primary-foreground-color: 30 41 59;
  --app-secondary-color: 192 132 252;
  --app-secondary-foreground-color: 30 41 59;
  --app-accent-color: 99 102 241;
  --app-accent-foreground-color: 255 255 255;
  --app-text-color: 226 232 240;
  --app-bg-color: 15 23 42;
  --app-card-bg-color: 30 41 59;
  --app-border-color: 71 85 105;

  --app-border-radius-md: 0.5rem; /* More rounded */

  --app-input-bg-color: 51 65 85;
  --app-input-text-color: 226 232 240;
  --app-input-border-color: 71 85 105;
  --app-input-focus-ring-color: 129 140 248;
  --app-input-placeholder-color: 148 163 184;

  --app-table-header-bg: 51 65 85;
  --app-table-header-text: 203 213 225;
  --app-table-row-hover-bg: 71 85 105;
  --app-table-grid-line-color: 71 85 105;
  --app-chart-grid-color: 51 65 85;

    /* Notification Colors */
  --app-info-color: 59 130 246; /* blue-500 */
  --app-info-foreground-color: 255 255 255;
  --app-success-color: 34 197 94; /* green-500 */
  --app-success-foreground-color: 255 255 255;
  --app-warning-color: 245 158 11; /* amber-500 */
  --app-warning-foreground-color: 255 255 255;

  /* Chart Colors */
  --app-chart-1: 139 92 246; /* violet-500 */
  --app-chart-2: 234 179 8; /* yellow-500 */
  --app-chart-3: 163 230 53; /* lime-400 */
  --app-chart-4: 52 211 153; /* emerald-400 */
  --app-chart-5: 251 113 133; /* rose-400 */
}

/* --- Blueprint Theme --- */
.blueprint {
  --app-font-sans: 'Courier New', monospace;
  --app-primary-color: 0 123 255;
  --app-primary-foreground-color: 255 255 255;
  --app-secondary-color: 108 117 125;
  --app-secondary-foreground-color: 255 255 255;
  --app-accent-color: 23 162 184;
  --app-accent-foreground-color: 255 255 255;
  --app-text-color: 51 51 51;
  --app-bg-color: 255 255 255;
  --app-card-bg-color: 255 255 255;
  --app-border-color: 0 123 255;

  --app-border-radius-md: 0rem; /* No border radius */
  --app-border-width: 2px;

  --app-input-bg-color: 255 255 255;
  --app-input-text-color: 51 51 51;
  --app-input-border-color: 0 123 255;
  --app-input-focus-ring-color: 0 123 255;
  --app-input-placeholder-color: 108 117 125;
  
  --app-table-header-bg: 248 249 250;
  --app-table-header-text: 73 80 87;
  --app-table-row-hover-bg: 230 230 230;
  --app-table-grid-line-color: 0 123 255;
  --app-chart-grid-color: 230 242 255; /* approx. rgba(0, 123, 255, 0.1) on white */

    /* Notification Colors */
  --app-info-color: 59 130 246; /* blue-500 */
  --app-info-foreground-color: 255 255 255;
  --app-success-color: 34 197 94; /* green-500 */
  --app-success-foreground-color: 255 255 255;
  --app-warning-color: 245 158 11; /* amber-500 */
  --app-warning-foreground-color: 255 255 255;

  /* Chart Colors */
  --app-chart-1: 139 92 246; /* violet-500 */
  --app-chart-2: 234 179 8; /* yellow-500 */
  --app-chart-3: 163 230 53; /* lime-400 */
  --app-chart-4: 52 211 153; /* emerald-400 */
  --app-chart-5: 251 113 133; /* rose-400 */
  
}

/* --- AG Grid Theme Overrides --- */
:root .ag-theme-quartz {
  --ag-font-family: var(--app-font-sans);
  --ag-background-color: rgb(var(--app-card-bg-color));
  --ag-foreground-color: rgb(var(--app-text-color));
  --ag-border-color: transparent;
  --ag-secondary-border-color: rgb(var(--app-table-grid-line-color));
  --ag-header-background-color: rgb(var(--app-table-header-bg));
  --ag-header-foreground-color: rgb(var(--app-table-header-text));
  --ag-odd-row-background-color: rgb(var(--app-card-bg-color));
  --ag-row-hover-color: rgb(var(--app-table-row-hover-bg));
  --ag-selected-row-background-color: rgb(var(--app-primary-color));
  --ag-selected-row-foreground-color: rgb(var(--app-primary-foreground-color));
  --ag-range-selection-background-color: rgba(var(--app-primary-color), 0.2);
}

/* --- Custom Tippy.js Theme --- */
.tippy-box[data-theme~='ramme'] {
  background-color: rgb(var(--app-secondary-color));
  color: rgb(var(--app-secondary-foreground-color));
  border-radius: var(--app-border-radius-md);
  font-size: 0.875rem;
  line-height: 1.25rem;
  filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.15));
}
.tippy-box[data-theme~='ramme'][data-placement^='top'] > .tippy-arrow::before { border-top-color: rgb(var(--app-secondary-color)); }
.tippy-box[data-theme~='ramme'][data-placement^='bottom'] > .tippy-arrow::before { border-bottom-color: rgb(var(--app-secondary-color)); }
.tippy-box[data-theme~='ramme'][data-placement^='left'] > .tippy-arrow::before { border-left-color: rgb(var(--app-secondary-color)); }
.tippy-box[data-theme~='ramme'][data-placement^='right'] > .tippy-arrow::before { border-right-color: rgb(var(--app-secondary-color)); }
.tippy-content { padding: 0.5rem 0.75rem; }


/* --- Custom React Datepicker Theme --- */
.react-datepicker {
  font-family: var(--app-font-sans);
  background-color: rgb(var(--app-card-bg-color));
  border: var(--app-border-width) solid rgb(var(--app-border-color));
  color: rgb(var(--app-text-color));
}
.react-datepicker__header {
  background-color: rgb(var(--app-bg-color));
  border-bottom: var(--app-border-width) solid rgb(var(--app-border-color));
}
.react-datepicker__current-month, .react-datepicker__day-name {
  color: rgb(var(--app-text-color));
}
.react-datepicker__day {
  color: rgb(var(--app-text-color));
}
.react-datepicker__day:hover {
  background-color: rgb(var(--app-table-row-hover-bg));
}
.react-datepicker__day--selected, .react-datepicker__day--keyboard-selected, .react-datepicker__day--in-range {
  background-color: rgb(var(--app-primary-color));
  color: rgb(var(--app-primary-foreground-color));
}
.react-datepicker__day--disabled {
  opacity: 0.5;
}

/* --- Custom React-Select Theme --- */
.ramme-select__control {
  background-color: rgb(var(--app-input-bg-color)) !important;
  border-color: rgb(var(--app-input-border-color)) !important;
  box-shadow: none !important;
  min-height: 40px;
}

.ramme-select__control--is-focused {
  border-color: rgb(var(--app-primary-color)) !important;
  box-shadow: 0 0 0 1px rgb(var(--app-primary-color)) !important;
}

.ramme-select__input-container,
.ramme-select__placeholder,
.ramme-select__single-value {
  color: rgb(var(--app-text-color)) !important;
}

.ramme-select__menu {
  background-color: rgb(var(--app-card-bg-color)) !important;
  border: 1px solid rgb(var(--app-border-color)) !important;
}

.ramme-select__option {
  background-color: transparent !important;
  color: rgb(var(--app-text-color)) !important;
}

.ramme-select__option--is-focused {
  background-color: rgb(var(--app-accent-color)) !important;
  color: rgb(var(--app-accent-foreground-color)) !important;
}

.ramme-select__option--is-selected {
  background-color: rgb(var(--app-primary-color)) !important;
  color: rgb(var(--app-primary-foreground-color)) !important;
}

.ramme-select__multi-value {
  background-color: rgb(var(--app-secondary-color)) !important;
  color: rgb(var(--app-secondary-foreground-color)) !important;
}

.ramme-select__multi-value__label {
  color: rgb(var(--app-secondary-foreground-color)) !important;
}

.ramme-select__multi-value__remove:hover {
  background-color: rgb(var(--app-danger-color)) !important;
  color: rgb(var(--app-danger-foreground-color)) !important;
}
</file>

<file path=".gitignore">
# Dependencies
/node_modules

# Build output
/dist

# Logs
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*

# OS generated files
.DS_Store
Thumbs.db

# TypeScript cache file
tsconfig.tsbuildinfo

# Local environment variables
.env.local
.env.*.local

*storybook.log
storybook-static
</file>

<file path="CHANGELOG.md">
# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [0.12.1] - 2025-09-27
### Fixed
- Corrected an issue in the `Button` component where custom props were being passed to the DOM element, causing a React warning.
- Updated `README.md` with instructions for running Storybook and other documentation improvements.
</file>

<file path="LICENSE">
MIT License

Copyright (c) 2025 Excesspool Limited Liability Company

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</file>

<file path="postcss.config.cjs">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
</file>

<file path="tailwind.config.cjs">
/** @type {import('tailwindcss').Config} */
module.exports = {
  // Use our library's preset to get all the theme-aware styles
  presets: [require('./tailwind.preset.js')],
  // Tell Tailwind to scan all of our component and story files for CSS classes
  content: [
    './src/**/*.{js,ts,jsx,tsx}',
  ],
  theme: {
    extend: {},
  },
  plugins: [],
};
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ESNext",
    "useDefineForClassFields": true,
    "lib": ["ESNext", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true
  },
  "include": [
    "src",
    ".storybook"
  ],
  "exclude": [
    "node_modules", 
    "dist",
    "src/**/*.stories.tsx"
  ]
}
</file>

<file path="vite.config.ts">
// ramme-ui/vite.config.ts
import { resolve } from 'path';
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import dts from 'vite-plugin-dts';

export default defineConfig({
  plugins: [
    react(),
    dts({ insertTypesEntry: true }),
  ],
  build: {
    lib: {
      entry: resolve(__dirname, 'src/index.ts'),
      name: 'RammeUI',
      formats: ['es', 'umd'],
      fileName: (format) => `index.${format}.js`,
    },
    rollupOptions: {
      external: ['react', 'react-dom', 'tailwindcss'],
      output: {
        globals: {
          react: 'React',
          'react-dom': 'ReactDOM',
          tailwindcss: 'tailwindcss',
        },
      },
    },
  },
});
</file>

<file path="src/blocks/ai/Actions.tsx">
// src/ai/Actions.tsx
import React from 'react';

/**
 * @wizard
 * @name Suggestion
 * @description A small, pill-shaped button that offers a quick, suggested reply or follow-up question to the user.
 * @tags ui, ai, button, suggestion, actions
 * @props
 * - name: onClick
 * type: () => void
 * description: Function to call when the suggestion is clicked.
 * @category ai
 * @id suggestion
 * @id actions
 * @id actions
 * @id actions
 */
export const Suggestion: React.FC<{ children: React.ReactNode; onClick: () => void }> = ({ children, onClick }) => (
    <button onClick={onClick} className="px-3 py-1.5 bg-card-alt hover:bg-bg-hover border border-border rounded-full text-sm text-text-light transition-colors">
        {children}
    </button>
);

/**
 * @wizard
 * @name Actions
 * @description A container for displaying a list of suggested, clickable actions that the user can take next.
 * @tags ui, ai, layout, actions, suggestion
 * @category ai
 */
export const Actions: React.FC<{ children: React.ReactNode }> = ({ children }) => (
    <div className="flex flex-wrap gap-2 mt-3">{children}</div>
);
</file>

<file path="src/blocks/ai/ChatFAB.tsx">
// src/components/ui/ChatFAB.tsx
import React from 'react';
import { Icon } from '../../components/ui/Icon'; 
import { TippyTooltip } from '../../components/feedback/TippyTooltip'; 

export interface ChatFABProps {
  onClick: () => void;
  className?: string;
  tooltipContent?: string;
}

/**
 * @wizard
 * @name ChatFAB
 * @description A floating action button (FAB) specifically for opening a chat interface, with a tooltip and icon.
 * @tags ui, button, chat, fab, ai
 * @props
 * - name: onClick
 * type: () => void
 * description: Function to call when the button is clicked.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for custom styling.
 * - name: tooltipContent
 * type: string
 * description: The text content for the button's tooltip.
 * default: 'Open AI Assistant'
 * @category ui
 * @id chat-fab
 */
export const ChatFAB: React.FC<ChatFABProps> = ({
  onClick,
  className = '',
  tooltipContent = 'Open AI Assistant',
}) => {
  return (
    <TippyTooltip content={tooltipContent} placement="left">
      <button
        onClick={onClick}
        aria-label={tooltipContent}
        className={`
          w-14 h-14
          bg-primary text-primary-foreground 
          rounded-full
          flex items-center justify-center
          shadow-lg
          hover:bg-primary/90
          focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2
          transition-all duration-200 ease-in-out
          hover:scale-110
          active:scale-100
          ${className}
        `}
      >
        <Icon name="bot" size={28} />
      </button>
    </TippyTooltip>
  );
};
</file>

<file path="src/blocks/ai/Conversation.tsx">
// src/ai/Conversation.tsx
import React, { useEffect, useRef } from 'react';

/**
 * @wizard
 * @name Conversation
 * @description A container component that holds a series of Message components and manages the layout and scrolling of the chat history.
 * @tags ui, ai, layout, chat
 * @category ai
 * @id conversation
 */
export const Conversation: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const conversationEndRef = useRef<HTMLDivElement>(null);

  // Automatically scroll to the bottom when new messages are added
  useEffect(() => {
    conversationEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [children]);

  return (
    <div className="flex-1 p-4 overflow-y-auto">
      {children}
      <div ref={conversationEndRef} />
    </div>
  );
};
</file>

<file path="src/blocks/ai/Message.tsx">
// src/ai/Message.tsx
import React from 'react';
import { Avatar } from '../../components/ui/Avatar';
import { Loader } from './Loader';
import { Actions, Suggestion } from './Actions';

export interface MessageProps {
  author: string;
  content?: string;
  isUser?: boolean;
  loading?: boolean;
  suggestions?: string[];
  onSuggestionClick?: (suggestion: string) => void;
}

/**
 * @wizard
 * @name Message
 * @description Displays a single message in a conversation, including an avatar, author, content, and optional suggestions.
 * @tags ui, ai, chat, display
 * @props
 * - name: author
 * type: string
 * description: "The name of the message author (e.g., 'User' or 'AI Assistant')."
 * - name: content
 * type: string
 * description: The text content of the message.
 * - name: isUser
 * type: boolean
 * description: If true, styles the message as from the user.
 * - name: loading
 * type: boolean
 * description: If true, displays the Loader component instead of content.
 * - name: suggestions
 * type: string[]
 * description: An array of strings to display as suggested actions.
 * - name: onSuggestionClick
 * type: (suggestion: string) => void
 * description: Callback for when a suggestion is clicked.
 * @category ai
 * @id message
 */
export const Message: React.FC<MessageProps> = ({
  author,
  content,
  isUser,
  loading,
  suggestions,
  onSuggestionClick = () => {}
}) => (
  <div className={`flex flex-col ${isUser ? 'items-end' : 'items-start'}`}>
    <div className={`flex items-start gap-3 my-2 ${isUser ? 'justify-end' : ''}`}>
      {!isUser && <Avatar name={author} size="md" />}
      <div className={`p-3 rounded-lg max-w-lg ${isUser ? 'bg-primary text-primary-foreground' : 'bg-card'}`}>
        <p className="font-semibold">{!isUser && author}</p>
        {loading ? <Loader /> : <p>{content}</p>}
      </div>
      {isUser && <Avatar name={author} size="md" />}
    </div>
    {suggestions && !isUser && (
      <Actions>
        {suggestions.map((text, i) => <Suggestion key={i} onClick={() => onSuggestionClick(text)}>{text}</Suggestion>)}
      </Actions>
    )}
  </div>
);
</file>

<file path="src/blocks/ai/PromptInput.tsx">
// src/ai/PromptInput.tsx
import React from 'react';
import { Icon } from '../../components/ui/Icon';

export interface PromptInputProps {
  value: string;
  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;
  onSubmit: (e: React.FormEvent) => void;
  placeholder?: string;
}

/**
 * @wizard
 * @name PromptInput
 * @description A specialized input field for users to type and submit prompts, including a send button.
 * @tags ui, ai, form, input, chat
 * @props
 * - name: value
 * type: string
 * description: The current value of the input field.
 * - name: onChange
 * type: (e: React.ChangeEvent<HTMLInputElement>) => void
 * description: Callback fired when the input value changes.
 * - name: onSubmit
 * type: (e: React.FormEvent) => void
 * description: Callback fired when the form is submitted.
 * - name: placeholder
 * type: string
 * description: Placeholder text for the input field.
 * default: "Type your message..."
 * @category ai
 * @id prompt-input
 */
export const PromptInput: React.FC<PromptInputProps> = ({ value, onChange, onSubmit, placeholder = "Type your message..." }) => (
  <form onSubmit={onSubmit} className="flex items-center p-2 border-t border-border">
    <input
      type="text"
      placeholder={placeholder}
      className="flex-1 p-2 bg-transparent focus:outline-none text-text"
      value={value}
      onChange={onChange}
    />
    <button type="submit" className="p-2 text-primary hover:bg-primary/10 rounded-full transition-colors">
      <Icon name="send" />
    </button>
  </form>
);
</file>

<file path="src/blocks/iot/DeviceCard.tsx">
import React from 'react';
import { Icon, type IconName } from '../../components/ui/Icon';
import { cn } from '../../utils/cn';
import { Card } from '../../components/layout/Card';
import { Badge } from '../../components/ui/Badge';

const statusColorMap = {
  online: 'success',
  offline: 'secondary',
  error: 'danger',
  warning: 'outline',
  active: 'primary',
} as const;

export type DeviceStatus = keyof typeof statusColorMap;

/**
 * @wizard
 * @name DeviceCard
 * @description A specialized card designed to represent a physical device or a digital entity with live state. Features slots for status, live values, and interactive controls.
 * @tags layout, iot, device, card, dashboard
 * @category layout
 * @props
 * - name: title
 * type: string
 * description: The name of the device or entity (e.g., "Living Room Thermostat").
 * - name: description
 * type: string
 * description: A subtitle, often used for location or ID (e.g., "Floor 2 ‚Ä¢ ID: #442").
 * - name: icon
 * type: IconName
 * description: The icon representing the device type.
 * - name: status
 * type: 'online' | 'offline' | 'error' | 'warning' | 'active'
 * description: The current operational state of the device. Changes the badge color.
 * default: 'offline'
 * - name: value
 * type: string | number
 * description: The primary "live" metric to display (e.g., "72¬∞", "1,240 rpm").
 * - name: trend
 * type: string
 * description: Optional secondary metric to show change (e.g., "+2%").
 * - name: children
 * type: React.ReactNode
 * description: Interactive controls to place at the bottom of the card (e.g., a ToggleSwitch or Button).
 * - name: className
 * type: string
 * description: Optional additional CSS classes.
 * @id device-card
 */
export interface DeviceCardProps {
  title: string;
  description?: string;
  icon?: IconName;
  status?: DeviceStatus;
  value?: string | number;
  trend?: string;
  children?: React.ReactNode;
  className?: string;
  onClick?: () => void;
}

export const DeviceCard: React.FC<DeviceCardProps> = ({
  title,
  description,
  icon,
  status = 'offline',
  value,
  trend,
  children,
  className,
  onClick,
}) => {
  return (
    <Card 
      className={cn("p-5 flex flex-col justify-between h-full transition-all hover:border-primary/50", className)}
      onClick={onClick}
    >
      {/* Header: Icon, Title, Status */}
      <div className="flex justify-between items-start mb-4">
        <div className="flex gap-3">
          {icon && (
            <div className="p-2 rounded-md bg-muted text-muted-foreground">
              <Icon name={icon} size={20} />
            </div>
          )}
          <div>
            <h3 className="font-semibold text-foreground leading-none mb-1">{title}</h3>
            {description && (
              <p className="text-xs text-muted-foreground">{description}</p>
            )}
          </div>
        </div>
        <Badge variant={statusColorMap[status] || 'secondary'}>
          {status}
        </Badge>
      </div>

      {/* Body: Live Value */}
      {(value || trend) && (
        <div className="mb-4">
          <div className="flex items-baseline gap-2">
            {value && <span className="text-2xl font-bold text-foreground">{value}</span>}
            {trend && <span className="text-xs font-medium text-muted-foreground">{trend}</span>}
          </div>
        </div>
      )}

      {/* Footer: Controls (Slot) */}
      {children && (
        <div className="mt-auto pt-4 border-t border-border">
          {children}
        </div>
      )}
    </Card>
  );
};
</file>

<file path="src/components/data-display/ActivityFeed.tsx">
'use client';

import React from 'react';
import { Card } from '../layout/Card';
//import { Avatar } from '../ui/Avatar';

// --- Helper Function ---
const formatRelativeTime = (date: Date): string => {
  const now = new Date();
  const seconds = Math.round((now.getTime() - date.getTime()) / 1000);
  const minutes = Math.round(seconds / 60);
  const hours = Math.round(minutes / 60);
  const days = Math.round(hours / 24);

  if (seconds < 60) return `${seconds}s ago`;
  if (minutes < 60) return `${minutes}m ago`;
  if (hours < 24) return `${hours}h ago`;
  if (days === 1) return 'Yesterday';
  return `${days}d ago`;
};

// --- Data Structure ---
export interface ActivityItemData {
  id: string | number;
  author: {
    name: string;
    avatarUrl?: string;
  };
  action: string;
  timestamp: Date;
}

// --- Sub-Component for each item in the feed ---
const ActivityItem: React.FC<{ item: ActivityItemData; isLast: boolean }> = ({ item, isLast }) => {
  return (
    <div className="flex gap-4">
      {/* Vertical timeline line and dot */}
      <div className="relative flex flex-col items-center">
        <div className="relative z-10 h-3 w-3 rounded-full bg-border" />
        {!isLast && <div className="absolute top-3 left-1/2 h-full w-px -translate-x-1/2 bg-border" />}
      </div>

      {/* Content */}
      <div className="flex-grow pb-8">
        <p className="text-sm text-muted-foreground">
          {formatRelativeTime(item.timestamp)} by{' '}
          <span className="font-medium text-foreground">{item.author.name}</span>
        </p>
        <p className="text-sm mt-1 font-semibold text-foreground">{item.action}</p>
      </div>
    </div>
  );
};

// --- Main ActivityFeed Component ---
export interface ActivityFeedProps {
  items: ActivityItemData[];
  title?: string;
  changelogUrl?: string;
}

/**
 * @wizard
 * @name ActivityFeed
 * @description Displays a chronological list of recent activities, typically with a timeline indicator.
 * @tags templates, patterns, feed, timeline, data-display
 * @props
 * - name: items
 * type: ActivityItemData[]
 * description: An array of activity items to display in the feed.
 * - name: title
 * type: string
 * description: An optional title for the activity feed card.
 * default: "Activity Feed"
 * - name: changelogUrl
 * type: string
 * description: An optional URL for a "View changelog" link.
 * @category templates-patterns
 * @id activity-feed
 */
export const ActivityFeed: React.FC<ActivityFeedProps> = ({
  items,
  title = 'Activity Feed',
  changelogUrl,
}) => {
  return (
    // FIX: Replaced the `padding` prop with the `className` prop.
    <Card className="p-6">
      <h3 className="text-xl font-bold text-foreground mb-4">{title}</h3>
      <div>
        {items.map((item, index) => (
          <ActivityItem
            key={item.id}
            item={item}
            isLast={index === items.length - 1}
          />
        ))}
      </div>
      {changelogUrl && (
        <a href={changelogUrl} className="text-sm font-semibold text-primary hover:underline">
          View changelog ‚Üí
        </a>
      )}
    </Card>
  );
};
</file>

<file path="src/components/data-display/BarChart.tsx">
// packages/ui/src/charts/BarChart.tsx
"use client";

import React from 'react';
import { BarChart as RechartsBarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';
import { useChartTheme } from '../../lib/hooks/useChartTheme';

// The API is now simpler: it only needs to know the data keys for the bars.
export interface BarChartProps {
  data: any[];
  dataKeyX: string;
  barKeys: string[];
}

/**
 * @wizard
 * @name BarChart
 * @description A theme-aware bar chart component powered by Recharts, for comparing categorical data.
 * @tags charts, data-visualization, rechart
 * @props
 * - name: data
 * type: any[]
 * description: The dataset for the chart. Each object in the array represents a category.
 * - name: dataKeyX
 * type: string
 * description: The key from your data objects to be used for the X-axis (e.g., 'name', 'category').
 * - name: barKeys
 * type: { key: string; color: string }[]
 * description: An array of objects, each specifying a data key for a bar series and its color (e.g., `[{ key: 'pv', color: '#8884d8' }]`).
 * - name: title
 * type: string
 * description: An optional title to display above the chart.
 * @category charts
 * @id bar-chart
 */


export const BarChart: React.FC<BarChartProps> = ({ data, dataKeyX, barKeys }) => {
  const { textColor, gridColor, tooltipBg, palette } = useChartTheme();

  return (
    <ResponsiveContainer width="100%" height="100%">
      <RechartsBarChart data={data} margin={{ top: 5, right: 20, left: 0, bottom: 5 }}>
        <CartesianGrid strokeDasharray="3 3" stroke={gridColor} />
        <XAxis dataKey={dataKeyX} stroke={textColor} tick={{ fill: textColor }} />
        <YAxis stroke={textColor} tick={{ fill: textColor }} />
        <Tooltip
          contentStyle={{ backgroundColor: tooltipBg, borderColor: gridColor, borderRadius: '0.5rem' }}
          itemStyle={{ color: textColor }}
          labelStyle={{ color: textColor, fontWeight: 'bold' }}
        />
        <Legend wrapperStyle={{ color: textColor }} />
        {barKeys.map((key, index) => (
          <Bar key={key} dataKey={key} fill={palette[index % palette.length]} />
        ))}
      </RechartsBarChart>
    </ResponsiveContainer>
  );
};
</file>

<file path="src/components/data-display/ChartWithTable.tsx">
"use client";

import React, { useState } from 'react';
import { Card } from '../layout/Card';
import { Drawer } from '../layout/Drawer';
import { Button } from '../ui/Button';
import { Icon } from '../ui/Icon';
import { Menu, MenuItem } from '../navigation/Menu';
import { Table, TableHeader } from './Table';

export interface ChartWithTableProps {
  /** The title of the chart. */
  title: string;
  /** The chart component to be displayed. */
  children: React.ReactNode;
  /** The data used by the chart, which will be displayed in the table. */
  data: any[];
  /** The header configuration for the data table. */
  tableHeaders: TableHeader[];
}

/**
 * @wizard
 * @name ChartWithTable
 * @description A wrapper component that combines a chart with an option to view its underlying data in a table within a drawer.
 * @tags templates, charts, data-display, pattern, dashboard
 * @props
 * - name: title
 * type: string
 * description: The title displayed at the top of the chart card.
 * - name: children
 * type: React.ReactNode
 * description: The chart component itself (e.g., <BarChart />, <LineChart />).
 * - name: data
 * type: any[]
 * description: The raw data array used to render the chart and the table view.
 * - name: tableHeaders
 * type: TableHeader[]
 * description: The column definitions for the table view.
 * @category templates-patterns
 * @id chart-with-table
 */
export const ChartWithTable: React.FC<ChartWithTableProps> = ({ title, children, data, tableHeaders }) => {
  const [isDrawerOpen, setIsDrawerOpen] = useState(false);

  return (
    // FIX: Replaced the `padding` prop with the `className` prop.
    <Card className="p-6">
      <div className="flex justify-between items-center mb-4">
        {/* FIX: Replaced `text-text` with theme-aware `text-foreground`. */}
        <h3 className="text-2xl font-semibold text-foreground">{title}</h3>
        <Menu
          trigger={
            <Button variant="ghost" size="sm"><Icon name="more-horizontal" /></Button>
          }
          position="bottom-right"
        >
          <MenuItem onClick={() => setIsDrawerOpen(true)}>
            <Icon name="table" size={16} className="mr-2" />
            View as table
          </MenuItem>
          <MenuItem>
            <Icon name="download" size={16} className="mr-2" />
            Download as CSV
          </MenuItem>
        </Menu>
      </div>

      <div className="h-96">
        {children}
      </div>

      <Drawer
        isOpen={isDrawerOpen}
        onClose={() => setIsDrawerOpen(false)}
        position="right"
        size="50%"
        title={`Data for: ${title}`}
      >
        <div className="p-4">
          <Table headers={tableHeaders} data={data} />
        </div>
      </Drawer>
    </Card>
  );
};
</file>

<file path="src/components/data-display/CodeBlock.tsx">
import React from 'react';
import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';
import { vscDarkPlus, coy } from 'react-syntax-highlighter/dist/esm/styles/prism';
import { useTheme } from '../../contexts/ThemeContext';
import { Card } from '../layout/Card';
import { Icon } from '../ui/Icon';

interface CodeBlockProps {
  code: string;
  language: string;
  className?: string;
}

/**
 * @wizard
 * @name CodeBlock
 * @description A component for displaying formatted and syntax-highlighted code snippets.
 * @tags ui, data-display, code
 * @props
 * - name: code
 * type: string
 * description: The string of code to display.
 * - name: language
 * type: string
 * description: The programming language for syntax highlighting (e.g., 'tsx', 'css', 'javascript').
 * @category ui
 * @id code-block
 */
export const CodeBlock: React.FC<CodeBlockProps> = ({ code, language, className }) => {
  const { theme } = useTheme();
  const [copied, setCopied] = React.useState(false);

  const handleCopy = () => {
    navigator.clipboard.writeText(code);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <Card className={`relative overflow-hidden ${className}`}>
      <button
        onClick={handleCopy}
        className="absolute top-2 right-2 p-1.5 bg-card/50 hover:bg-border rounded-md transition-colors"
      >
        {copied ? <Icon name="check" size={16} /> : <Icon name="copy" size={16} />}
      </button>
      <SyntaxHighlighter
        language={language}
        style={theme === 'dark' || theme === 'midnight' ? vscDarkPlus : coy}
        showLineNumbers={false}
        customStyle={{ 
          margin: 0, 
          padding: '1.5rem', 
          backgroundColor: 'transparent',
          fontSize: '0.875rem' 
        }}
        codeTagProps={{
            style: {
                fontFamily: 'var(--app-font-mono)'
            }
        }}
      >
        {code.trim()}
      </SyntaxHighlighter>
    </Card>
  );
};
</file>

<file path="src/components/data-display/DataTable.tsx">
// packages/ui/src/data-display/DataTable.tsx
"use client";

import React, { useMemo } from 'react';
import { AgGridReact, AgGridReactProps } from 'ag-grid-react';
import 'ag-grid-community/styles/ag-grid.css';
import 'ag-grid-community/styles/ag-theme-quartz.css';
import { 
  type ColDef
} from 'ag-grid-community';
import 'ag-grid-enterprise';

export interface DataTableProps extends AgGridReactProps {
  height?: string;
}

/**
 * @wizard
 * @name DataTable
 * @description A powerful data grid component that wraps AG Grid, providing advanced features like sorting, filtering, and resizing, fully themed to match the application.
 * @tags data-display, grid, table, ag-grid, advanced
 * @props
 * - name: rowData
 * type: any[]
 * description: The data to display in the grid, an array of row objects.
 * - name: columnDefs
 * type: ColDef[]
 * description: An array defining the columns of the grid, using AG Grid's `ColDef` structure.
 * - name: height
 * type: string
 * description: The height of the data table container (e.g., '500px', '100%').
 * default: '500px'
 * - name: defaultColDef
 * type: ColDef
 * description: Default column definitions applied to all columns unless overridden.
 * - name: gridOptions
 * type: GridOptions
 * description: Additional AG Grid options to configure the grid's behavior.
 * @category data-display
 * @id data-table
 */
export const DataTable: React.FC<DataTableProps> = ({
  height = '500px',
  defaultColDef,
  ...rest // Capture all other AG Grid props
}) => {

  const defaultColDefMemo = useMemo<ColDef>(() => ({
    flex: 1,
    minWidth: 100,
    resizable: true,
    sortable: true,
    ...defaultColDef,
  }), [defaultColDef]);
  
  const gridClassName = "ag-theme-quartz"; 

  return (
    <div className={gridClassName} style={{ height, width: '100%' }}>
      <AgGridReact
        defaultColDef={defaultColDefMemo}
        {...rest} // Pass all other props through to the grid
      />
    </div>
  );
};
</file>

<file path="src/components/data-display/LineChart.tsx">
// packages/ui/src/charts/LineChart.tsx
"use client";

import React from 'react';
import { 
  LineChart as RechartsLineChart, 
  Line, 
  XAxis, 
  YAxis, 
  CartesianGrid, 
  Tooltip, 
  Legend, 
  ResponsiveContainer,
  XAxisProps, // <-- 1. Import XAxisProps
  YAxisProps  // <-- 2. Import YAxisProps
} from 'recharts';
import { useChartTheme } from '../../lib/hooks/useChartTheme';

export interface LineChartProps {
  data: any[];
  dataKeyX: string;
  lineKeys: string[];
  xAxisProps?: XAxisProps; // <-- 3. Add prop for X-axis rules
  yAxisProps?: YAxisProps; // <-- 4. Add prop for Y-axis rules
  [key: string]: any; // <-- 5. "catch-all" for dot, connectNulls
}

/**
 * @wizard
 * @name LineChart
 * @description A theme-aware line chart component...
 * @tags charts, data-visualization, rechart
 * @category charts
 * @id line-chart
 */
export const LineChart: React.FC<LineChartProps> = ({ 
  data, 
  dataKeyX, 
  lineKeys, 
  xAxisProps, // <-- 6. Get the new props
  yAxisProps,
  ...restOfProps // <-- 7. Get the rest (dot, connectNulls)
}) => {
  const { textColor, gridColor, tooltipBg, palette } = useChartTheme();

  // Add a "No Data" state
  if (!data || data.length === 0) {
    return (
      <div className="flex h-full w-full items-center justify-center">
        <p className="text-sm text-muted-foreground">No data to display</p>
      </div>
    );
  }

  return (
    <ResponsiveContainer width="100%" height="100%">
      <RechartsLineChart data={data} margin={{ top: 5, right: 20, left: 0, bottom: 5 }}>
        <CartesianGrid strokeDasharray="3 3" stroke={gridColor} />
        <XAxis 
          dataKey={dataKeyX} 
          stroke={textColor} 
          tick={{ fill: textColor }}
          {...xAxisProps} // <-- 8. SPREAD the X-axis rules here
        />
        <YAxis 
          stroke={textColor} 
          tick={{ fill: textColor }}
          {...yAxisProps} // <-- 9. SPREAD the Y-axis rules here
        />
        <Tooltip
          contentStyle={{ backgroundColor: tooltipBg, borderColor: gridColor, borderRadius: '0.5rem' }}
          itemStyle={{ color: textColor }}
          labelStyle={{ color: textColor, fontWeight: 'bold' }}
        />
        <Legend wrapperStyle={{ color: textColor }} />
        {lineKeys.map((key, index) => (
          <Line 
            key={key} 
            type="monotone" 
            dataKey={key} 
            stroke={palette[index % palette.length]} 
            strokeWidth={2} 
            activeDot={{ r: 8 }} 
            {...restOfProps} // <-- 10. SPREAD the rest (dot, connectNulls) here
          />
        ))}
      </RechartsLineChart>
    </ResponsiveContainer>
  );
};
</file>

<file path="src/components/data-display/PieChart.tsx">
// packages/ui/src/charts/PieChart.tsx
"use client";

import React from 'react';
import { PieChart as RechartsPieChart, Pie, Cell, Tooltip, Legend, ResponsiveContainer } from 'recharts';
import { useChartTheme } from '../../lib/hooks/useChartTheme';

export interface PieChartProps {
  data: any[];
  dataKey: string;
  nameKey: string;
}

/**
 * @wizard
 * @name PieChart
 * @description A theme-aware pie chart component powered by Recharts, for showing proportional relationships of parts to a whole.
 * @tags charts, data-visualization, rechart
 * @category charts
 * @id pie-chart
 */

export const PieChart: React.FC<PieChartProps> = ({ data, dataKey, nameKey }) => {
  const { textColor, palette } = useChartTheme();

  return (
    <ResponsiveContainer width="100%" height="100%">
      <RechartsPieChart>
        <Pie data={data} dataKey={dataKey} nameKey={nameKey} cx="50%" cy="50%" outerRadius={100} labelLine={false}>
          {data.map((_entry, index) => (
            <Cell key={`cell-${index}`} fill={palette[index % palette.length]} />
          ))}
        </Pie>
        <Tooltip />
        <Legend wrapperStyle={{ color: textColor }} />
      </RechartsPieChart>
    </ResponsiveContainer>
  );
};
</file>

<file path="src/components/data-display/StatCard.tsx">
import React from 'react';
import { Card } from '../layout/Card';
import { Icon, type IconName } from '../ui/Icon';
import { Badge } from '../ui/Badge';

const cn = (...classes: (string | undefined | null | false)[]) => {
  return classes.filter(Boolean).join(' ');
};

export interface StatCardProps {
  title: string;
  value: string;
  icon: IconName;
  changeText?: string;
  changeDirection?: 'positive' | 'negative';
  footerText?: string;
  className?: string;
}

/**
 * @wizard
 * @name StatCard
 * @description A specialized card for prominently displaying a key statistic, including an icon and optional trend indicator.
 * @tags templates, data-display, metrics, dashboard, ui
 * @props
 * - name: title
 * type: string
 * description: The label for the displayed metric.
 * - name: value
 * type: string
 * description: The main value of the statistic.
 * - name: icon
 * type: IconName
 * description: The name of a Lucide icon to represent the metric.
 * - name: changeText
 * type: string
 * description: Text describing the change in the metric (e.g., '10% since last month').
 * - name: changeDirection
 * type: "'positive' | 'negative'"
 * description: The direction of change, which determines the color of the badge.
 * - name: footerText
 * type: string
 * description: Optional text displayed at the bottom of the card for context.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for custom styling.
 * @category templates-patterns
 * @id stat-card
 */

export const StatCard: React.FC<StatCardProps> = ({
  title,
  value,
  icon,
  changeText,
  changeDirection,
  footerText,
  className,
}) => {
  // FIX: Changed 'destructive' to 'danger' to match the Badge component's API.
  const badgeVariant = changeDirection === 'positive' ? 'success' : 'danger';

  return (
    <Card className={cn('p-4 flex flex-col', className)}>
      <div className="flex items-center text-muted-foreground mb-2">
        <Icon name={icon} size={16} className="mr-2" />
        <span className="text-sm font-medium">{title}</span>
      </div>
      <div className="flex-grow">
        <p className="text-3xl font-bold text-foreground">{value}</p>
        {changeText && (
          <div className="flex items-center mt-1 text-sm">
            <Badge variant={badgeVariant}>
              <Icon
                name={changeDirection === 'positive' ? 'arrow-up' : 'arrow-down'}
                size={12}
                className="mr-1"
              />
              {changeText}
            </Badge>
          </div>
        )}
      </div>
      {footerText && (
        <div className="mt-4 pt-2 border-t border-border">
          <p className="text-xs text-muted-foreground">{footerText}</p>
        </div>
      )}
    </Card>
  );
};
</file>

<file path="src/components/data-display/StatusBadge.tsx">
import React from 'react';
import { cn } from '../../utils/cn';

export type StatusType = 'online' | 'offline' | 'error' | 'warning' | 'active';

const statusConfig: Record<StatusType, { color: string; label: string }> = {
  online: { color: 'bg-green-500', label: 'Online' },
  offline: { color: 'bg-gray-400', label: 'Offline' },
  error: { color: 'bg-red-500', label: 'Error' },
  warning: { color: 'bg-yellow-500', label: 'Warning' },
  active: { color: 'bg-blue-500', label: 'Active' },
};

export interface StatusBadgeProps {
  status: StatusType;
  /**
   * Optional custom label. If not provided, uses the default status name.
   * Pass explicit `null` to show only the dot.
   */
  label?: string | null;
  className?: string;
  showDot?: boolean;
}

/**
 * @wizard
 * @name StatusBadge
 * @description A consistent status indicator featuring a color-coded dot and an optional text label. Essential for IoT devices and system states.
 * @tags status, badge, iot, indicator, dot
 * @category data-display
 * @props
 * - name: status
 * type: 'online' | 'offline' | 'error' | 'warning' | 'active'
 * description: The state to represent. Determines the color of the dot.
 * - name: label
 * type: string
 * description: Custom text to display next to the dot. If omitted, displays the status name (e.g., "Online").
 * - name: showDot
 * type: boolean
 * description: Whether to show the colored indicator dot.
 * default: true
 * - name: className
 * type: string
 * description: Additional CSS classes.
 * @id status-badge
 */
export const StatusBadge: React.FC<StatusBadgeProps> = ({
  status,
  label,
  className,
  showDot = true,
}) => {
  const config = statusConfig[status];
  const text = label === null ? null : (label || config.label);

  return (
    <div className={cn("inline-flex items-center gap-2", className)}>
      {showDot && (
        <span 
          className={cn("h-2.5 w-2.5 rounded-full ring-2 ring-white dark:ring-slate-900", config.color)} 
          aria-hidden="true" 
        />
      )}
      {text && (
        <span className="text-sm font-medium text-slate-700 dark:text-slate-300">
          {text}
        </span>
      )}
    </div>
  );
};
</file>

<file path="src/components/data-display/Table.tsx">
// packages/ui/src/data-display/Table.tsx
"use client";

import React from 'react';
import { EmptyState } from '../feedback/EmptyState';

// Exporting the type so it can be used in other components like ChartWithTable
export interface TableHeader {
  key: string;
  label:string;
  render?: (value: any, row: Record<string, any>) => React.ReactNode;
}

export interface TableProps {
  headers: TableHeader[];
  data: Record<string, any>[];
  caption?: string;
  className?: string;
}

/**
 * @wizard
 * @name Table
 * @description A simple, theme-aware HTML table component for displaying tabular data, with support for custom cell rendering and empty states.
 * @tags data-display, table, ui
 * @props
 * - name: headers
 * type: "{ key: string; label: string; render?: (value: any, row: Record<string, any>) => React.ReactNode; }[]"
 * description: An array defining the table columns, including a `key`, `label`, and optional `render` function for custom cell content.
 * - name: data
 * type: "Record<string, any>[]"
 * description: An array of objects, where each object represents a row of data for the table.
 * - name: caption
 * type: string
 * description: An optional caption for the table, providing a title or summary.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for custom styling of the table container.
 * @category data-display
 * @id table
 */
export const Table: React.FC<TableProps> = ({ headers, data, caption, className }) => {
  return (
    <div className={`overflow-x-auto rounded-lg border border-border ${className || ''}`}>
      <table className="w-full text-left">
        {caption && <caption className="p-4 text-lg font-semibold text-text bg-card-alt">{caption}</caption>}
        <thead className="bg-card-alt">
          <tr>
            {headers.map((header) => (
              <th key={header.key} scope="col" className="p-4 text-sm font-semibold text-text whitespace-nowrap">
                {header.label}
              </th>
            ))}
          </tr>
        </thead>
        <tbody className="divide-y divide-border">
          {data.length > 0 ? (
            data.map((row, rowIndex) => (
              <tr key={rowIndex} className="hover:bg-primary/5 transition-colors">
                {headers.map((header) => {
                  const value = row[header.key];
                  return (
                    <td key={header.key} className="p-4 text-sm text-text-light whitespace-nowrap">
                      {header.render ? header.render(value, row) : String(value)}
                    </td>
                  );
                })}
              </tr>
            ))
          ) : (
            <tr>
              <td colSpan={headers.length}>
                <div className="p-8 flex justify-center items-center">
                   <EmptyState
                    title="No Data Available"
                    description="There is no data to display in this table."
                    icon="table"
                  />
                </div>
              </td>
            </tr>
          )}
        </tbody>
      </table>
    </div>
  );
};
</file>

<file path="src/components/feedback/Alert.tsx">
import React from 'react';
import { Icon } from '../ui/Icon'; 

// Define the type for the props
export interface AlertProps {
  title: string;
  children?: React.ReactNode;
  variant?: 'info' | 'success' | 'warning' | 'danger';
  className?: string;
}

// Define the variant configuration with a const assertion
const variantConfig = {
  info: {
    icon: 'info',
    classes: 'bg-primary/10 border-primary/50 text-primary',
  },
  success: {
    icon: 'check-circle',
    classes: 'bg-green-500/10 border-green-500/50 text-green-700 dark:text-green-400',
  },
  warning: {
    icon: 'alert-triangle',
    classes: 'bg-yellow-500/10 border-yellow-500/50 text-yellow-700 dark:text-yellow-400',
  },
  danger: {
    icon: 'x-circle',
    classes: 'bg-red-500/10 border-red-500/50 text-red-700 dark:text-red-500',
  },
} as const;

/**
 * @wizard
 * @name Alert
 * @description Displays static, in-page messages to convey important information like success, warnings, or errors.
 * @tags feedback, message, notification, ui
 * @props
 * - name: title
 * type: string
 * description: The main heading or concise summary of the alert message.
 * - name: children
 * type: React.ReactNode
 * description: Optional additional content or a longer description for the alert.
 * - name: variant
 * type: 'info' | 'success' | 'warning' | 'danger'
 * description: Defines the color scheme, icon, and semantic meaning of the alert.
 * default: 'info'
 * - name: className
 * type: string
 * description: Optional additional CSS classes for custom styling of the alert container.
 * @category feedback
 * @id alert
 */
export const Alert: React.FC<AlertProps> = ({
  title,
  children,
  variant = 'info',
  className
}) => {
  const config = variantConfig[variant];
  
  return (
    <div className={`flex items-start gap-4 p-4 border-l-4 rounded-r-lg ${config.classes} ${className || ''}`} role="alert">
      <div className="flex-shrink-0">
        {/* We need to use the named export for Icon here */}
        <Icon name={config.icon} size={20} />
      </div>
      <div className="flex-grow">
        <h4 className="font-semibold">{title}</h4>
        {children && <div className="text-sm mt-1">{children}</div>}
      </div>
    </div>
  );
};
</file>

<file path="src/components/feedback/EmptyState.tsx">
import React from 'react';
import { Card } from '../layout/Card';
import { Icon } from '../ui/Icon';

interface EmptyStateProps {
  /** The name of the Lucide icon to display. */
  icon?: React.ComponentProps<typeof Icon>['name'];
  /** The main title for the empty state. */
  title: string;
  /** A longer description of the empty state. */
  description?: string;
  /** An optional action button. */
  actionButton?: React.ReactNode;
  /** Additional styling for the outer container. */
  className?: string;
}

/**
 * A component for displaying an empty state message. It's used when there is no
 * data to show, such as in an empty table or after a search with no results.
 */
/**
 * @wizard
 * @name EmptyState
 * @description A component for displaying a message when there is no data or content to show.
 * @tags ui, feedback, empty, placeholder
 * @props
 * - name: icon
 * type: React.ComponentProps<typeof Icon>['name']
 * description: The name of a Lucide icon to visually represent the empty state.
 * - name: title
 * type: string
 * description: The main heading or title for the empty state message.
 * - name: description
 * type: string
 * description: A longer, descriptive text explaining the empty state or next steps.
 * - name: actionButton
 * type: React.ReactNode
 * description: An optional React node, typically a Button, to provide a primary action.
 * - name: className
 * type: string
 * description: Additional CSS classes for custom styling of the container.
 * @category feedback
 * @id empty-state
 */
export const EmptyState: React.FC<EmptyStateProps> = ({ icon, title, description, actionButton, className }) => {
  return (
    <Card className={`p-8 text-center flex flex-col items-center justify-center space-y-4 ${className || ''}`}>
      {icon && (
        <div className="text-text-light/50 mb-4">
          <Icon name={icon} size={64} strokeWidth={1.5} />
        </div>
      )}
      <h3 className="text-2xl font-semibold text-text">
        {title}
      </h3>
      {description && (
        <p className="text-text-light max-w-md">
          {description}
        </p>
      )}
      {actionButton && (
        <div className="mt-4">
          {actionButton}
        </div>
      )}
    </Card>
  );
};
</file>

<file path="src/components/feedback/TippyTooltip.tsx">
import React from 'react';
import Tippy, { type TippyProps } from '@tippyjs/react';
import 'tippy.js/dist/tippy.css';
import { useTheme } from '../../contexts/ThemeContext'; // Import the useTheme hook

/**
 * A wrapper around the Tippy.js library to provide a standardized,
 * theme-aware tooltip for Ramme Framework.
 */
/**
 * @wizard
 * @name TippyTooltip
 * @description A flexible and theme-aware tooltip component that displays additional information on hover.
 * @tags ui, feedback, tooltip, overlay
 * @props
 * - name: children
 * type: React.ReactNode
 * description: The element that triggers the tooltip when hovered over (or clicked, etc.).
 * - name: content
 * type: React.ReactNode
 * description: The content to be displayed inside the tooltip.
 * - name: placement
 * type: TippyProps['placement']
 * description: The position of the tooltip relative to its trigger element (e.g., 'top', 'bottom', 'left', 'right').
 * default: 'top'
 * - name: className
 * type: string
 * description: Optional additional CSS classes for custom styling of the tooltip content.
 * @category feedback
 * @id tippy-tooltip
 */
export const TippyTooltip: React.FC<TippyProps> = ({ children, content, ...props }) => {
  const { theme } = useTheme(); // Use the theme context

  const triggerElement = React.isValidElement(children) ? children : <span>{children}</span>;

  return (
    <Tippy
      content={content}
      theme={theme} // Use the current theme from context
      animation="fade"
      duration={200}
      delay={[200, 0]}
      placement="top"
      {...props}
    >
      {triggerElement}
    </Tippy>
  );
};
</file>

<file path="src/components/feedback/Toast.tsx">
"use client";

import React, { useEffect } from 'react';
import { Icon, type IconName } from '../ui/Icon';
import { cn } from '../../utils/cn';

export type ToastType = 'success' | 'error' | 'info' | 'warning';

export interface ToastProps {
  id: string;
  message: string;
  title?: string;
  type?: ToastType;
  duration?: number;
  onDismiss: (id: string) => void;
}

/**
 * @wizard
 * @name Toast
 * @description A single, transient notification message that appears briefly to provide feedback.
 * @tags feedback, notification, message, ui
 * @props
 * - name: id
 * type: string
 * description: A unique identifier for this specific toast instance.
 * - name: title
 * type: string
 * description: An optional title for the toast notification.
 * - name: message
 * type: string
 * description: The main text content of the toast notification.
 * - name: type
 * type: "'success' | 'error' | 'info' | 'warning'"
 * description: Defines the visual style and semantic meaning of the toast.
 * default: 'info'
 * - name: duration
 * type: number
 * description: How long the toast should remain visible in milliseconds. Set to `0` for a sticky toast.
 * default: 5000
 * - name: onDismiss
 * type: (id: string) => void
 * description: Callback function triggered when the toast is dismissed.
 * @category feedback
 * @id toast
 */
export const Toast: React.FC<ToastProps> = ({
  id,
  message,
  title,
  type = 'info',
  duration = 5000,
  onDismiss,
}) => {
  useEffect(() => {
    if (duration > 0) {
      const timer = setTimeout(() => {
        onDismiss(id);
      }, duration);
      return () => clearTimeout(timer);
    }
  }, [id, duration, onDismiss]);

  // FIX: Map strictly to Core Theme Variables to ensure consistency with Badge/Button.
  const typeStyles: Record<ToastType, { bg: string; icon: IconName }> = {
    info: { 
      // Maps to Brand Primary (e.g., Blue in Light, Green in Corporate)
      bg: 'bg-primary text-primary-foreground border-primary/20', 
      icon: 'info' 
    },
    success: { 
      // Maps to Brand Accent (Matches Badge 'success' variant)
      bg: 'bg-accent text-accent-foreground border-accent/20', 
      icon: 'check-circle' 
    },
    warning: { 
      // Maps to Brand Secondary (Matches Badge 'secondary' variant)
      bg: 'bg-secondary text-secondary-foreground border-secondary/20', 
      icon: 'alert-triangle' 
    },
    error: { 
      // Maps to Brand Destructive (Matches Badge 'danger' variant)
      bg: 'bg-destructive text-destructive-foreground border-destructive/20', 
      icon: 'x-circle' 
    },
  };

  return (
    <div
      className={cn(
        'flex items-center w-full max-w-sm overflow-hidden rounded-lg shadow-lg pointer-events-auto border',
        typeStyles[type].bg
      )}
      role="alert"
    >
      <div className="p-3 shrink-0">
        <Icon name={typeStyles[type].icon} size={24} />
      </div>
      <div className="flex-grow p-3 min-w-0">
        {title && <p className="font-bold text-sm mb-0.5">{title}</p>}
        <p className="text-sm opacity-90 break-words">{message}</p>
      </div>
      <button
        onClick={() => onDismiss(id)}
        className="p-3 self-stretch flex items-center justify-center hover:bg-black/10 transition-colors shrink-0"
        aria-label="Dismiss notification"
      >
        <Icon name="x" size={18} />
      </button>
    </div>
  );
};
</file>

<file path="src/components/feedback/ToastProvider.tsx">
// src/components/feedback/ToastProvider.tsx
"use client";

import React, { useState, useCallback, createContext, useContext } from 'react';
import { createPortal } from 'react-dom';
import { Toast, type ToastType } from './Toast'; // Using named import for Toast

// Define the shape of a Toast object for the state
interface ToastMessage {
  id: string;
  message: string;
  type?: ToastType;
  duration?: number;
}

// Define the shape of the context value
interface ToastContextType {
  addToast: (message: string, type?: ToastType, duration?: number) => void;
  dismissToast: (id: string) => void;
}

// Create the context
const ToastContext = createContext<ToastContextType | undefined>(undefined);

/**
 * @wizard
 * @name useToast
 * @description A React hook to easily add and dismiss toast notifications anywhere within a `ToastProvider`.
 * @tags hook, feedback, notification
 * @returns
 * - name: addToast
 * type: (message: string, type?: ToastType, duration?: number) => void
 * description: A function to trigger a new toast notification.
 * - name: dismissToast
 * type: (id: string) => void
 * description: A function to programmatically dismiss a toast by its ID.
 * @category feedback
 * @id use-toast
 * @id toast-provider
 * @id toast-provider
 * @id toast-provider
 */
export const useToast = () => {
  const context = useContext(ToastContext);
  if (context === undefined) {
    throw new Error('useToast must be used within a ToastProvider');
  }
  return context;
};

/**
 * @wizard
 * @name ToastProvider
 * @description Provides a context for displaying transient notifications (toasts). Wrap your application with this component.
 * @tags feedback, notification, context, provider
 * @props
 * - name: children
 * type: React.ReactNode
 * description: The React nodes that will have access to the `useToast` hook. Typically wraps the entire application.
 * @category feedback
 */
export const ToastProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [toasts, setToasts] = useState<ToastMessage[]>([]);

  const addToast = useCallback((message: string, type: ToastType = 'info', duration: number = 3000) => {
    // Simple unique ID using timestamp and a random string
    const id = Date.now().toString() + Math.random().toString(36).substring(2, 9);
    setToasts((prevToasts) => [...prevToasts, { id, message, type, duration }]);
  }, []);

  const dismissToast = useCallback((id: string) => {
    setToasts((prevToasts) => prevToasts.filter((toast) => toast.id !== id));
  }, []);

  const contextValue = React.useMemo(() => ({ addToast, dismissToast }), [addToast, dismissToast]);

  return (
    <ToastContext.Provider value={contextValue}>
      {children}
      {createPortal(
        // This container holds all the toasts and positions them on the screen
        <div className="fixed bottom-4 right-4 z-50 w-80 max-w-full space-y-2">
          {toasts.map((toast) => (
            <Toast
              key={toast.id}
              id={toast.id}
              message={toast.message}
              type={toast.type}
              duration={toast.duration}
              onDismiss={dismissToast}
            />
          ))}
        </div>,
        document.body // Portal toasts to the body to escape stacking contexts
      )}
    </ToastContext.Provider>
  );
};
</file>

<file path="src/components/forms/ButtonGroup.tsx">
import React from 'react';

/**
 * Props for the ButtonGroup component.
 */
export interface ButtonGroupProps {
  /**
   * The Button components to be grouped together.
   */
  children: React.ReactNode;
  /**
   * Optional additional CSS classes to apply to the container.
   */
  className?: string;
  /**
   * The value of the currently selected button. Providing this will
   * turn the group into a radio-style segmented control.
   */
  value?: string | number;
  /**
   * Callback function that is called when the selected value changes.
   */
  onValueChange?: (value: string | number) => void;
}

// Define the expected props for children to help TypeScript
interface ButtonGroupChildProps {
  className?: string;
  value?: string | number;
  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void;
  variant?: string;
}

/**
 * A component that visually groups multiple buttons together.
 * It can function as a simple visual container or as a stateful
 * segmented control (radio group) when `value` and `onValueChange` props are provided.
 */
/**
 * @wizard
 * @name ButtonGroup
 * @description Groups multiple Button components visually and can function as a segmented control (radio group).
 * @tags ui, form, action, group
 * @props
 * - name: children
 * type: React.ReactNode
 * description: The `Button` components to be grouped together.
 * - name: className
 * type: string
 * description: Optional additional CSS classes to apply to the container.
 * - name: value
 * type: string | number
 * description: For segmented controls, the value of the currently selected button.
 * - name: onValueChange
 * type: (value: string | number) => void
 * description: Callback function for segmented controls, called when the selected value changes.
 * @category form
 * @id button-group
 */

export const ButtonGroup: React.FC<ButtonGroupProps> = ({ children, className, value, onValueChange }) => {
  const childCount = React.Children.count(children);
  const isRadioGroup = value !== undefined && onValueChange !== undefined;

  const buttons = React.Children.map(children, (child, index) => {
    // Use a type guard with a generic to inform TypeScript about the child's props.
    if (!React.isValidElement<ButtonGroupChildProps>(child)) {
      return child;
    }

    let childClassName = child.props.className || '';
    const childValue = child.props.value;

    // --- Border Radius and Margin Logic ---
    if (childCount > 1) {
      if (index === 0) {
        childClassName += ' rounded-r-none';
      } else if (index === childCount - 1) {
        childClassName += ' rounded-l-none';
      } else {
        childClassName += ' rounded-none';
      }
      if (index > 0) {
        childClassName += ' -ml-px';
      }
    }

    // --- Radio Group Logic ---
    let newProps: any = { className: childClassName };
    if (isRadioGroup) {
      const isSelected = childValue === value;
      
      // Explicitly set the variant for selected and unselected states.
      newProps.variant = isSelected ? 'primary' : 'outline';
      
      // Add the inner shadow only to the selected button for a "pressed" look.
      if (isSelected) {
        newProps.className += ' shadow-inner';
      }
      
      // Wrap the onClick handler to manage state.
      newProps.onClick = (e: React.MouseEvent<HTMLButtonElement>) => {
        if (childValue !== undefined) {
          onValueChange(childValue);
        }
        // Call the original onClick if it exists.
        if (child.props.onClick) {
          child.props.onClick(e);
        }
      };
    }

    return React.cloneElement(child, newProps);
  });

  return (
    <div className={`inline-flex items-center ${className || ''}`}>
      {buttons}
    </div>
  );
};
</file>

<file path="src/components/forms/Checkbox.tsx">
'use client'; 

import React, { useState } from 'react';


export interface CheckboxProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: React.ReactNode;
}

/**
 * @wizard
 * @name Checkbox
 * @description A standard checkbox input for selecting one or more options from a set.
 * @tags form, input, selection, ui
 * @props
 * - name: label
 * type: React.ReactNode
 * description: The visible label associated with the checkbox. Can be text or JSX.
 * - name: id
 * type: string
 * description: A unique HTML `id` for the input element. Automatically generated if not provided.
 * - name: checked
 * type: boolean
 * description: Controls whether the checkbox is currently checked.
 * - name: onChange
 * type: (event: React.ChangeEvent<HTMLInputElement>) => void
 * description: Callback function triggered when the checkbox's checked state changes.
 * - name: disabled
 * type: boolean
 * description: If true, the checkbox is unclickable and styled as disabled.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for the input element.
 * @category form
 * @id checkbox
 */
export const Checkbox: React.FC<CheckboxProps> = ({ label, id, className, ...props }) => {
  // Generate a unique ID only once on the client-side render
  const [uniqueId] = useState(() => id || `checkbox-${Math.random().toString(36).substr(2, 9)}`);
  
  const baseStyles = 'form-checkbox h-4 w-4 rounded transition-colors duration-200 ease-in-out cursor-pointer';
  const themeStyles = 'text-primary border-border bg-card focus:ring-primary';
  const disabledStyles = 'disabled:opacity-50 disabled:cursor-not-allowed';

  return (
    <div className="flex items-center">
      <input
        id={uniqueId}
        type="checkbox"
        className={`${baseStyles} ${themeStyles} ${disabledStyles} ${className || ''}`}
        {...props}
      />
      {label && (
        <label htmlFor={uniqueId} className="ml-2 text-sm text-text cursor-pointer">
          {label}
        </label>
      )}
    </div>
  );
};
</file>

<file path="src/components/forms/ComboBox.tsx">
'use client';

import React, { useState, useRef, useEffect, useCallback } from 'react';
import { Input } from './Input'; 
import { cn } from '../../utils/cn'; // Import the cn utility

export interface ComboBoxOption {
  value: string | number;
  label: string;
}

interface ComboBoxProps extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'value' | 'onChange'> {
  options: ComboBoxOption[];
  label?: string;
  value?: string | number | null;
  onOptionSelect?: (selectedValue: string | number | null, selectedLabel: string | null) => void;
  placeholder?: string;
  containerClassName?: string;
}

/**
 * @wizard
 * @name ComboBox
 * @description A text input with an integrated dropdown list of selectable options, allowing both typing and selection.
 * @tags form, input, select, dropdown, autocomplete, ui
 * @category form
 * @id combo-box
 */
export const ComboBox: React.FC<ComboBoxProps> = ({
  options,
  label,
  value: controlledValue,
  onOptionSelect,
  placeholder,
  id,
  className,
  containerClassName,
  ...props
}) => {
  const [inputValue, setInputValue] = useState<string>('');
  const [filteredOptions, setFilteredOptions] = useState<ComboBoxOption[]>(options);
  const [isOpen, setIsOpen] = useState(false);
  const [highlightedIndex, setHighlightedIndex] = useState(-1);

  const wrapperRef = useRef<HTMLDivElement>(null);
  const inputRef = useRef<HTMLInputElement>(null);

  const uniqueId = id || `combobox-${Math.random().toString(36).substr(2, 9)}`;

  useEffect(() => {
    if (controlledValue !== undefined) {
      const selectedOption = options.find(opt => opt.value === controlledValue);
      setInputValue(selectedOption ? selectedOption.label : '');
    }
  }, [controlledValue, options]);

  useEffect(() => {
    if (inputValue === '') {
      setFilteredOptions(options);
    } else {
      setFilteredOptions(
        options.filter(option =>
          option.label.toLowerCase().includes(inputValue.toLowerCase())
        )
      );
    }
    setHighlightedIndex(-1);
  }, [inputValue, options]);

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setInputValue(e.target.value);
    setIsOpen(true);
  };

  const handleOptionClick = (option: ComboBoxOption) => {
    setInputValue(option.label);
    setIsOpen(false);
    onOptionSelect?.(option.value, option.label);
  };

  const handleInputFocus = () => {
    setIsOpen(true);
  };

  const handleClickOutside = useCallback((event: MouseEvent) => {
    if (wrapperRef.current && !wrapperRef.current.contains(event.target as Node)) {
      setIsOpen(false);
    }
  }, []);

  useEffect(() => {
    document.addEventListener('mousedown', handleClickOutside);
    return () => {
      document.removeEventListener('mousedown', handleClickOutside);
    };
  }, [handleClickOutside]);

  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {
    // ... keydown logic remains the same
  };

  return (
    <div className={cn('relative', containerClassName)} ref={wrapperRef}>
      <Input
        id={uniqueId}
        label={label}
        type="text"
        placeholder={placeholder}
        value={inputValue}
        onChange={handleInputChange}
        onFocus={handleInputFocus}
        onKeyDown={handleKeyDown}
        autoComplete="off"
        ref={inputRef}
        className={className}
        {...props}
      />
      {isOpen && filteredOptions.length > 0 && (
        <ul className="absolute z-10 w-full mt-1 bg-card border border-border rounded-md shadow-lg py-1 overflow-auto max-h-60 focus:outline-none">
          {filteredOptions.map((option, index) => (
            <li
              key={option.value}
              className={cn(
                'px-4 py-2 text-sm cursor-pointer text-foreground hover:bg-muted',
                highlightedIndex === index && 'bg-accent text-accent-foreground'
              )}
              onClick={() => handleOptionClick(option)}
              role="option"
              aria-selected={highlightedIndex === index}
            >
              {option.label}
            </li>
          ))}
        </ul>
      )}
    </div>
  );
};
</file>

<file path="src/components/forms/DatePicker.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { useState } from 'react';
import { DatePicker } from './DatePicker';

const meta: Meta<typeof DatePicker> = {
  title: 'Forms/DatePicker',
  component: DatePicker,
  tags: ['autodocs'],
  decorators: [
    (Story) => (
      <div className="h-96 w-full max-w-sm p-4">
        <Story />
      </div>
    ),
  ],
};

export default meta;
type Story = StoryObj<typeof DatePicker>;

export const Default: Story = {
  render: (args) => {
    const [date, setDate] = useState<Date | null>(new Date());
    return <DatePicker {...args} selected={date} onChange={setDate} />;
  },
  args: {
    label: 'Event Date',
    placeholderText: 'Select a date',
  },
};

export const WithError: Story = {
  render: (args) => {
    const [date, setDate] = useState<Date | null>(null);
    return <DatePicker {...args} selected={date} onChange={setDate} />;
  },
  args: {
    label: 'Start Date',
    error: true,
    helperText: 'Start date cannot be in the past.',
  },
};

export const WithTime: Story = {
  render: (args) => {
    const [date, setDate] = useState<Date | null>(new Date());
    return <DatePicker {...args} selected={date} onChange={setDate} />;
  },
  args: {
    label: 'Appointment Time',
    showTimeSelect: true,
    dateFormat: "MMMM d, yyyy h:mm aa",
  },
};
</file>

<file path="src/components/forms/Input.tsx">
import React from 'react';
import { Icon, type IconName } from '../ui/Icon';
import { cn } from '../../utils/cn';

export interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: string;
  icon?: IconName;
  helperText?: string;
  error?: boolean;
  required?: boolean;
  showOptionalLabel?: boolean;
  containerClassName?: string;
}

/**
 * @wizard
 * @name Input
 * @description A theme-aware text input component with support for labels, icons, helper text, and validation states. Supports all standard HTML input attributes.
 * @tags form, input, ui, text
 * @category form
 * @props
 * - name: label
 * type: string
 * description: An optional label to display above the input field.
 * - name: icon
 * type: IconName
 * description: Optional icon name to display inside the input field.
 * - name: helperText
 * type: string
 * description: A string that provides a hint or an error message below the input.
 * - name: error
 * type: boolean
 * description: If true, the input will be styled to indicate an error.
 * default: false
 * - name: required
 * type: boolean
 * description: If true, a required indicator (*) will be displayed next to the label.
 * default: false
 * - name: showOptionalLabel
 * type: boolean
 * description: If true, an "(optional)" indicator will be displayed next to the label.
 * default: false
 * - name: containerClassName
 * type: string
 * description: Optional additional CSS classes for the container.
 * @id input
 */
export const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({
    label,
    icon,
    helperText,
    error = false,
    required = false,
    showOptionalLabel = false,
    className,
    containerClassName,
    ...props
  }, ref) => {

    const baseInputStyles = 'flex h-10 w-full rounded-md border bg-background py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50';
    
    const stateStyles = error ? 'border-destructive' : 'border-input';
    const iconPadding = icon ? 'pl-10 pr-3' : 'px-3';

    return (
      <div className={cn('w-full', containerClassName)}>
        {label && (
          <label htmlFor={props.id || props.name} className="block text-sm font-medium text-foreground mb-1">
            {label}
            {required && <span className="text-destructive ml-1">*</span>}
            {!required && showOptionalLabel && <span className="text-xs text-muted-foreground ml-1">(optional)</span>}
          </label>
        )}
        <div className="relative w-full">
          {icon && (
            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <Icon name={icon} className="text-muted-foreground" size={16} />
            </div>
          )}
          <input
            ref={ref}
            className={cn(baseInputStyles, stateStyles, iconPadding, className)}
            required={required}
            {...props}
          />
        </div>
        {helperText && (
          <p className={cn('mt-1.5 text-xs', error ? 'text-destructive' : 'text-muted-foreground')}>
            {helperText}
          </p>
        )}
      </div>
    );
  }
);
Input.displayName = 'Input';
</file>

<file path="src/components/forms/Radio.tsx">
import React from 'react';

export interface RadioProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: React.ReactNode;
}

/**
 * @wizard
 * @name Radio
 * @description A single radio button input, typically used within a group where only one option can be selected.
 * @tags form, input, selection, ui
 * @props
 * - name: label
 * type: React.ReactNode
 * description: The visible label associated with the radio button. Can be text or JSX.
 * - name: id
 * type: string
 * description: A unique HTML `id` for the input element. Automatically generated if not provided.
 * - name: name
 * type: string
 * description: The HTML `name` attribute, crucial for grouping radio buttons so only one can be selected.
 * - name: value
 * type: string | number | readonly string[]
 * description: The value associated with this radio button when it is selected.
 * - name: checked
 * type: boolean
 * description: Controls whether the radio button is currently selected.
 * - name: onChange
 * type: (event: React.ChangeEvent<HTMLInputElement>) => void
 * description: Callback function triggered when the radio button's checked state changes.
 * - name: disabled
 * type: boolean
 * description: If true, the radio button is unclickable and styled as disabled.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for the input element.
 * @category form
 * @id radio
 */

export const Radio: React.FC<RadioProps> = ({ label, id, className, ...props }) => {
  const uniqueId = id || `radio-${Math.random().toString(36).substr(2, 9)}`;
  const baseStyles = 'form-radio h-4 w-4 transition-colors duration-200 ease-in-out cursor-pointer';
  const themeStyles = 'text-primary border-border bg-card focus:ring-primary';
  const disabledStyles = 'disabled:opacity-50 disabled:cursor-not-allowed';

  return (
    <div className="flex items-center">
      <input
        id={uniqueId}
        type="radio"
        className={`${baseStyles} ${themeStyles} ${disabledStyles} ${className || ''}`}
        {...props}
      />
      {label && (
        <label htmlFor={uniqueId} className="ml-2 text-sm text-text cursor-pointer">
          {label}
        </label>
      )}
    </div>
  );
};
</file>

<file path="src/components/forms/SearchInput.tsx">
import React from 'react';
import { Input } from './Input';
import type { InputProps } from './Input';

/**
 * @wizard
 * @name SearchInput
 * @description A specialized input for search functionality, using the base Input component with a search icon.
 * @tags form, input, search, ui
 * @category form
 * @id search-input
 */
export const SearchInput: React.FC<InputProps> = (props) => {
  return (
    <Input
      type="search"
      icon="search"
      {...props}
    />
  );
};
</file>

<file path="src/components/forms/Textarea.tsx">
// packages/ui/src/form/Textarea.tsx
import React from 'react';

interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {
  label?: string;
  containerClassName?: string;
}

/**
 * @wizard
 * @name Textarea
 * @description A theme-aware textarea component for multi-line text input.
 * @tags form, input, ui
 * @props
 * - name: label
 * type: string
 * description: An optional label to display above the textarea.
 * - name: containerClassName
 * type: string
 * description: Optional additional CSS classes for the container div.
 * @category form
 * @id textarea
 */
export const Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(
  ({ label, className, containerClassName, ...props }, ref) => {
    const baseStyles = 'w-full px-3 py-2 rounded-md bg-card border border-border transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary';
    
    return (
      <div className={`w-full ${containerClassName || ''}`}>
        {label && (
          <label htmlFor={props.id || props.name} className="block text-sm font-medium text-text-light mb-1">
            {label}
          </label>
        )}
        <textarea
          ref={ref}
          className={`${baseStyles} ${className || ''}`}
          {...props}
        />
      </div>
    );
  }
);

Textarea.displayName = 'Textarea';
</file>

<file path="src/components/forms/ToggleSwitch.tsx">
// packages/ui/src/components/ToggleSwitch.tsx
"use client";

import React from 'react';

export interface ToggleSwitchProps {
  /** Whether the toggle is checked or not. */
  checked: boolean;
  /** Callback function that is called when the toggle state changes. */
  onChange: (checked: boolean) => void;
  /** An accessible label for the toggle switch. */
  label: string;
  /** Optional additional CSS classes for the container. */
  className?: string;
  /** If true, the toggle will be disabled. */
  disabled?: boolean;
}

/**
 * @wizard
 * @name ToggleSwitch
 * @description A theme-aware toggle switch component, offering a boolean input alternative to a checkbox.
 * @tags form, ui, toggle, switch, input
 * @props
 * - name: checked
 * type: boolean
 * description: Controls whether the toggle is in the 'on' (checked) or 'off' (unchecked) state.
 * - name: onChange
 * type: (checked: boolean) => void
 * description: Callback function triggered when the toggle state changes.
 * - name: label
 * type: string
 * description: An accessible text label displayed next to the toggle switch.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for the toggle switch container.
 * - name: disabled
 * type: boolean
 * description: If true, the toggle will be unclickable and styled as disabled.
 * default: false
 * @category form
 * @id toggle-switch
 */
export const ToggleSwitch: React.FC<ToggleSwitchProps> = ({
  checked,
  onChange,
  label,
  className,
  disabled = false,
}) => {
  const handleToggle = () => {
    if (!disabled) {
      onChange(!checked);
    }
  };

  const uniqueId = React.useId();

  return (
    <label htmlFor={uniqueId} className={`flex items-center cursor-pointer ${className || ''} ${disabled ? 'opacity-50 cursor-not-allowed' : ''}`}>
      <div className="relative">
        <input
          id={uniqueId}
          type="checkbox"
          className="sr-only" // Hide the default checkbox
          checked={checked}
          onChange={handleToggle}
          disabled={disabled}
        />
        {/* The track of the toggle */}
        <div className={`block w-12 h-6 rounded-full transition-colors duration-200 ease-in-out ${checked ? 'bg-primary' : 'bg-border'}`}></div>
        {/* The thumb of the toggle */}
        <div
          className={`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full shadow-sm transition-transform duration-200 ease-in-out ${checked ? 'translate-x-6' : ''}`}
        ></div>
      </div>
      <div className="ml-3 text-text font-medium select-none">{label}</div>
    </label>
  );
};
</file>

<file path="src/components/layout/Accordion.tsx">
'use client';

// src/components/ui/Accordion.tsx
import React, { useState, useCallback } from 'react';

// AccordionItem Component
interface AccordionItemProps {
  id: string; // Unique ID for the item
  header: React.ReactNode; // Content for the clickable header
  children: React.ReactNode; // Content for the collapsible body
  isOpen?: boolean; // Controlled open state for individual item
  onToggle?: (id: string, isOpen: boolean) => void; // Callback for controlled state
}

/**
 * @wizard
 * @name AccordionItem
 * @description A single, collapsible section within an `Accordion` component, consisting of a header and a hidden content body.
 * @tags layout, ui, collapsible, expandable
 * @props
 * - name: id
 * type: string
 * description: A unique identifier for this accordion item. Essential for `singleOpen` behavior.
 * - name: header
 * type: React.ReactNode
 * description: The content displayed in the clickable header of the accordion item.
 * - name: children
 * type: React.ReactNode
 * description: The content that will be revealed or hidden when the accordion item is toggled.
 * - name: isOpen
 * type: boolean
 * description: Controls the open/closed state for this specific item (when used in a controlled `Accordion`).
 * - name: onToggle
 * type: (id: string, isOpen: boolean) => void
 * description: Callback triggered when the item is toggled, providing its `id` and new `isOpen` state.
 * @category layout
 * @id accordion-item
 * @id accordion
 * @id accordion
 * @id accordion
 */


const AccordionItem: React.FC<AccordionItemProps> = ({ id, header, children, isOpen, onToggle }) => {
  const [internalIsOpen, setInternalIsOpen] = useState(isOpen !== undefined ? isOpen : false);
  const isControlled = isOpen !== undefined;
  const activeIsOpen = isControlled ? isOpen : internalIsOpen;

  const handleToggle = useCallback(() => {
    if (isControlled && onToggle) {
      onToggle(id, !activeIsOpen);
    } else {
      setInternalIsOpen((prev) => !prev);
    }
  }, [id, activeIsOpen, isControlled, onToggle]);

  const arrowClasses = `transform transition-transform duration-300 ${activeIsOpen ? 'rotate-180' : 'rotate-0'}`;

  return (
    <div className="border border-border rounded-md overflow-hidden">
      <button
        id={`accordion-header-${id}`}
        aria-expanded={activeIsOpen}
        aria-controls={`accordion-panel-${id}`}
        onClick={handleToggle}
        className="flex items-center justify-between w-full p-4 text-text bg-background hover:bg-background/80 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"
        role="heading"
        aria-level={3} // Semantic heading level
      >
        <span className="text-xl font-semibold">{header}</span>
        <svg className={`w-6 h-6 text-text ${arrowClasses}`} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7"></path></svg>
      </button>
      <div
        id={`accordion-panel-${id}`}
        role="region"
        aria-labelledby={`accordion-header-${id}`}
        style={{
          maxHeight: activeIsOpen ? '1000px' : '0', // Arbitrary large height for transition
          overflow: 'hidden',
          transition: 'max-height 0.3s ease-in-out'
        }}
      >
        <div className="p-4 bg-card">
          {children}
        </div>
      </div>
    </div>
  );
};

// Accordion Component (Container for multiple AccordionItems)
interface AccordionProps {
  children: React.ReactElement<AccordionItemProps>[]; // Expects AccordionItem children
  singleOpen?: boolean; // If only one item can be open at a time
  className?: string; // Class for the outer accordion container
}

/**
 * @wizard
 * @name Accordion
 * @description A container for multiple collapsible sections (`AccordionItem`s), useful for organizing content.
 * @tags layout, ui, collapsible, expandable
 * @props
 * - name: children
 * type: React.ReactElement<AccordionItemProps>[]
 * description: A collection of `AccordionItem` components to be managed by this Accordion.
 * - name: singleOpen
 * type: boolean
 * description: If true, only one `AccordionItem` can be open at a time. Opening one closes others.
 * default: false
 * - name: className
 * type: string
 * description: Optional additional CSS classes for the Accordion container.
 * @category layout
 */

const Accordion: React.FC<AccordionProps> = ({ children, singleOpen = false, className }) => {
  const [openItem, setOpenItem] = useState<string | null>(null);

  const handleToggleItem = useCallback((id: string, isOpen: boolean) => {
    if (singleOpen) {
      setOpenItem(isOpen ? id : null);
    }
  }, [singleOpen]);

  return (
    <div className={`space-y-4 ${className || ''}`}>
      {React.Children.map(children, (child) => {
        if (!React.isValidElement(child)) {
          return child;
        }
        return React.cloneElement(child, {
          isOpen: singleOpen ? child.props.id === openItem : undefined,
          onToggle: singleOpen ? handleToggleItem : undefined,
        });
      })}
    </div>
  );
};

export { Accordion, AccordionItem };
</file>

<file path="src/components/layout/ActionBar.tsx">
// src/templates-patterns/ActionBar.tsx
import React from 'react';

export interface ActionBarProps {
  /** The content of the action bar, typically buttons. */
  children: React.ReactNode;
  /** Optional additional CSS classes. */
  className?: string;
}

/**
 * @wizard
 * @name ActionBar
 * @description A persistent bar, typically at the bottom of a form or page, used to group primary actions like 'Save' and 'Cancel'.
 * @tags layout, form, actions, buttons, ui, pattern
 * @props
 * - name: children
 * type: React.ReactNode
 * description: The content of the action bar, typically `Button` components.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for custom styling of the action bar container.
 * @category layout
 * @id action-bar
 */
export const ActionBar: React.FC<ActionBarProps> = ({ children, className }) => {
  return (
    <div className={`flex items-center justify-end gap-4 p-4 bg-background-alt border-t border-border ${className || ''}`}>
      {children}
    </div>
  );
};
</file>

<file path="src/components/layout/Card.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { Card } from './Card';
import { Button } from '../ui/Button';

const meta: Meta<typeof Card> = {
  title: 'Layout/Card',
  component: Card,
  tags: ['autodocs'],
  decorators: [
    (Story) => (
      <div className="p-8 bg-muted/20 min-h-[200px] flex items-center justify-center">
        <Story />
      </div>
    ),
  ],
  argTypes: {
    children: { control: 'text' },
    className: { control: 'text' },
  },
};

export default meta;
type Story = StoryObj<typeof Card>;

export const Default: Story = {
  args: {
    children: (
      <div className="space-y-2">
        <h3 className="text-lg font-semibold">Card Title</h3>
        <p className="text-sm text-muted-foreground">
          This is a basic card. It uses the "card" background and "border" color from the active theme.
        </p>
      </div>
    ),
    className: 'p-6 w-96',
  },
};

export const Interactive: Story = {
  args: {
    className: 'p-6 w-96 hover:shadow-md transition-shadow cursor-pointer',
    children: (
      <div className="flex items-center justify-between">
        <div>
          <p className="font-medium">Clickable Card</p>
          <p className="text-xs text-muted-foreground">Hover to see shadow boost</p>
        </div>
        <Button size="sm" variant="ghost">Action</Button>
      </div>
    ),
  },
};

export const NoBorder: Story = {
  args: {
    className: 'p-6 w-96 border-none shadow-lg',
    children: (
      <p className="font-medium text-center">Borderless / Elevated</p>
    ),
  },
};
</file>

<file path="src/components/layout/Drawer.tsx">
'use client';

import React, { useState, useEffect, useCallback, useRef } from 'react';
import { createPortal } from 'react-dom';
import { Icon } from '../ui/Icon';
import { cn } from '../../utils/cn'; 

export interface DrawerProps {
  isOpen: boolean;
  onClose: () => void;
  children: React.ReactNode;
  
  // ‚úÖ NEW: Footer slot for action buttons
  footer?: React.ReactNode; 
  
  position?: 'left' | 'right' | 'top' | 'bottom';
  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full' | string;
  title?: string;
  className?: string;
  overlayDismiss?: boolean;
}

const SIZE_PRESETS = {
  sm: '320px',
  md: '480px',
  lg: '640px',
  xl: '80vw',
  full: '100vw',
};

export const Drawer: React.FC<DrawerProps> = ({
  isOpen,
  onClose,
  children,
  footer,
  position = 'right',
  size = 'md',
  title,
  className,
  overlayDismiss = true,
}) => {
  const [shouldRender, setShouldRender] = useState(false);
  const [transitionedIn, setTransitionedIn] = useState(false);
  const drawerContentRef = useRef<HTMLDivElement>(null);

  const getSizeValue = (s: string) => SIZE_PRESETS[s as keyof typeof SIZE_PRESETS] || s;

  // ... (Transition logic remains the same) ...
  const getTransitionClasses = useCallback(() => {
    switch (position) {
      case 'left': return { from: '-translate-x-full', to: 'translate-x-0', positionClass: 'left-0 top-0 h-full' };
      case 'right': return { from: 'translate-x-full', to: 'translate-x-0', positionClass: 'right-0 top-0 h-full' };
      case 'top': return { from: '-translate-y-full', to: 'translate-y-0', positionClass: 'left-0 top-0 w-full' };
      case 'bottom': return { from: 'translate-y-full', to: 'translate-y-0', positionClass: 'left-0 bottom-0 w-full' };
      default: return { from: 'translate-x-full', to: 'translate-x-0', positionClass: 'right-0 top-0 h-full' };
    }
  }, [position]);

  const getDrawerStyles = useCallback((): React.CSSProperties => {
    const style: React.CSSProperties = {};
    const finalSize = getSizeValue(size);
    if (position === 'left' || position === 'right') {
      style.width = finalSize;
      style.maxWidth = '100vw';
    } else {
      style.height = finalSize;
      style.maxHeight = '100vh';
    }
    return style;
  }, [position, size]);

  const { from, to, positionClass } = getTransitionClasses();
  const drawerStyles = getDrawerStyles();

  // ‚úÖ NEW: Handle Body Scroll Lock
  useEffect(() => {
    if (isOpen) {
      document.body.style.overflow = 'hidden'; // Freeze background
    } else {
      document.body.style.overflow = ''; // Unfreeze
    }
    return () => { document.body.style.overflow = ''; }; // Cleanup
  }, [isOpen]);

  useEffect(() => {
    let animationFrame: number;
    let timer: number;
    if (isOpen) {
      setShouldRender(true);
      animationFrame = requestAnimationFrame(() => {
        timer = window.setTimeout(() => setTransitionedIn(true), 10);
      });
    } else {
      setTransitionedIn(false);
      timer = window.setTimeout(() => setShouldRender(false), 500);
    }
    return () => { cancelAnimationFrame(animationFrame); clearTimeout(timer); };
  }, [isOpen]);

  const handleOverlayClick = useCallback((event: React.MouseEvent) => {
    if (overlayDismiss && drawerContentRef.current && !drawerContentRef.current.contains(event.target as Node)) {
      onClose();
    }
  }, [onClose, overlayDismiss]);

  const handleEscapeKey = useCallback((event: KeyboardEvent) => {
    if (event.key === 'Escape' && isOpen) onClose();
  }, [isOpen, onClose]);

  useEffect(() => {
    if (shouldRender) document.addEventListener('keydown', handleEscapeKey);
    else document.removeEventListener('keydown', handleEscapeKey);
    return () => document.removeEventListener('keydown', handleEscapeKey);
  }, [shouldRender, handleEscapeKey]);

  if (!shouldRender) return null;

  return createPortal(
    <div
      className={cn(
        'fixed inset-0 z-50 flex transition-opacity duration-500 ease-in-out',
        transitionedIn ? 'opacity-100' : 'opacity-0',
        'bg-black/50'
      )}
      onClick={handleOverlayClick}
    >
      <div
        ref={drawerContentRef}
        style={drawerStyles}
        className={cn(
          'fixed bg-card border-border text-foreground shadow-xl flex flex-col',
          'transform transition-transform duration-500 ease-out',
          positionClass,
          transitionedIn ? to : from,
          className
        )}
      >
        {/* Header */}
        <div className="flex justify-between items-center p-4 border-b border-border flex-shrink-0">
          {title && <h3 className="text-xl font-semibold">{title}</h3>}
          <button
            onClick={onClose}
            className="text-muted-foreground hover:text-foreground transition-colors"
            aria-label="Close drawer"
          >
            <Icon name="x" size={24} />
          </button>
        </div>

        {/* Body */}
        <div className="flex-grow p-4 overflow-y-auto">
          {children}
        </div>

        {/* ‚úÖ NEW: Footer Section */}
        {footer && (
          <div className="p-4 border-t border-border flex-shrink-0 bg-card">
            {footer}
          </div>
        )}
      </div>
    </div>,
    document.body
  );
};
</file>

<file path="src/components/layout/List.tsx">
// src/components/ui/List.tsx
import React from 'react';

interface ListItemProps extends React.LiHTMLAttributes<HTMLLIElement> {
  // Add any specific props if needed
}

/**
 * @wizard
 * @name ListItem
 * @description Represents a single item within a `List` component.
 * @tags ui, layout, typography
 * @props
 * - name: children
 * type: React.ReactNode
 * description: The content of the list item.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for the list item (`<li>`).
 * @category layout
 * @id list-item
 * @id list
 * @id definition-term
 * @id definition-description
 * @id definition-list
 * @id list
 * @id definition-term
 * @id definition-description
 * @id definition-list
 * @id list
 * @id definition-term
 * @id definition-description
 * @id definition-list
 */

const ListItem: React.FC<ListItemProps> = ({ children, className, ...props }) => {
  const baseStyles = 'mb-1 last:mb-0';
  const themeStyles = 'text-text';
  return (
    <li className={`${baseStyles} ${themeStyles} ${className || ''}`} {...props}>
      {children}
    </li>
  );
};

interface ListProps extends React.HTMLAttributes<HTMLUListElement | HTMLOListElement> {
  type?: 'ul' | 'ol'; // 'ul' for unordered, 'ol' for ordered
  children: React.ReactNode;
}

/**
 * @wizard
 * @name List
 * @description A component for displaying either ordered or unordered lists of `ListItem`s.
 * @tags ui, layout, typography
 * @props
 * - name: type
 * type: 'ul' | 'ol'
 * description: Specifies whether the list should be unordered ('ul') or ordered ('ol').
 * default: 'ul'
 * - name: children
 * type: React.ReactNode
 * description: The list items, typically `ListItem` components.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for the list container (`<ul>` or `<ol>`).
 * @category layout
 */

const List: React.FC<ListProps> = ({ type = 'ul', children, className, ...props }) => {
  const baseStyles = 'space-y-1'; // Tailwind class for spacing between list items
  const themeStyles = 'text-text'; // General text color, ListItem handles its own
  const listTag = type === 'ol' ? 'ol' : 'ul';

  return React.createElement(
    listTag,
    { className: `${baseStyles} ${themeStyles} ${className || ''}`, ...props },
    children
  );
};

interface DefinitionTermProps extends React.HTMLAttributes<HTMLElement> {
  children: React.ReactNode;
}

/**
 * @wizard
 * @name DefinitionTerm
 * @description Represents a term within a `DefinitionList`.
 * @tags ui, layout, typography
 * @props
 * - name: children
 * type: React.ReactNode
 * description: The content of the definition term.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for the definition term (`<dt>`).
 * @category layout
 */

const DefinitionTerm: React.FC<DefinitionTermProps> = ({ children, className, ...props }) => {
  const baseStyles = 'font-semibold text-text';
  return (
    <dt className={`${baseStyles} ${className || ''}`} {...props}>
      {children}
    </dt>
  );
};

interface DefinitionDescriptionProps extends React.HTMLAttributes<HTMLElement> {
  children: React.ReactNode;
}

/**
 * @wizard
 * @name DefinitionDescription
 * @description Represents the description for a term within a `DefinitionList`.
 * @tags ui, layout, typography
 * @props
 * - name: children
 * type: React.ReactNode
 * description: The content of the definition description.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for the definition description (`<dd>`).
 * @category layout
 */

const DefinitionDescription: React.FC<DefinitionDescriptionProps> = ({ children, className, ...props }) => {
  const baseStyles = 'ml-4 text-text'; // Indent description
  return (
    <dd className={`${baseStyles} ${className || ''}`} {...props}>
      {children}
    </dd>
  );
};

interface DefinitionListProps extends React.HTMLAttributes<HTMLDListElement> {
  children: React.ReactNode;
}

/**
 * @wizard
 * @name DefinitionList
 * @description Displays a list of terms and their corresponding definitions.
 * @tags ui, layout, typography, data-display
 * @props
 * - name: children
 * type: React.ReactNode
 * description: A collection of `DefinitionTerm` and `DefinitionDescription` components.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for the definition list container (`<dl>`).
 * @category layout
 */

const DefinitionList: React.FC<DefinitionListProps> = ({ children, className, ...props }) => {
  const baseStyles = 'space-y-2'; // Spacing between term/description pairs
  return (
    <dl className={`${baseStyles} ${className || ''}`} {...props}>
      {children}
    </dl>
  );
};


export { List, ListItem, DefinitionList, DefinitionTerm, DefinitionDescription };
</file>

<file path="src/components/layout/Modal.tsx">
'use client';

import React, { useRef, useEffect, useCallback } from 'react';
import { createPortal } from 'react-dom';
import { Icon } from '../ui/Icon';
import { cn } from '../../utils/cn';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  children: React.ReactNode;
  title?: string;
  footer?: React.ReactNode;
  className?: string;
}

/**
 * @wizard
 * @name Modal
 * @description A dialog box that appears on top of the current page, requiring user interaction to dismiss.
 * @tags ui, overlay, dialog, popup
 * @category layout
 * @id modal
 */
export const Modal: React.FC<ModalProps> = ({ isOpen, onClose, children, title, footer, className }) => {
  const modalRef = useRef<HTMLDivElement>(null);

  const handleEscape = useCallback((event: KeyboardEvent) => {
    if (event.key === 'Escape' && isOpen) {
      onClose();
    }
  }, [isOpen, onClose]);

  useEffect(() => {
    document.addEventListener('keydown', handleEscape, false);
    return () => {
      document.removeEventListener('keydown', handleEscape, false);
    };
  }, [handleEscape]);

  if (!isOpen) return null;

  return createPortal(
    <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50">
      <div
        ref={modalRef}
        className={cn(
          'relative w-full max-w-lg mx-auto rounded-lg shadow-xl overflow-hidden',
          'bg-card border border-border text-foreground',
          className
        )}
        role="dialog"
        aria-modal="true"
        aria-labelledby={title ? "modal-title" : undefined}
      >
        {/* Modal Header */}
        <div className="flex justify-between items-center p-4 border-b border-border">
          {title && <h3 id="modal-title" className="text-xl font-semibold">{title}</h3>}
          <button
            onClick={onClose}
            className="text-muted-foreground hover:text-foreground transition-colors"
            aria-label="Close modal"
          >
            <Icon name="x" size={20} />
          </button>
        </div>

        {/* Modal Body */}
        <div className="p-4">
          {children}
        </div>

        {/* Modal Footer */}
        {footer && (
          <div className="p-4 border-t border-border flex justify-end space-x-2">
            {footer}
          </div>
        )}
      </div>
    </div>,
    document.body
  );
};
</file>

<file path="src/components/layout/PageHeader.tsx">
// packages/ui/src/templates-patterns/PageHeader.tsx
import React from 'react';

export interface PageHeaderProps {
  /** The main title of the page. */
  title: string;
  /** A brief description or subtitle displayed below the title. */
  description?: string;
  /** A slot for action buttons or other controls, typically aligned to the right. */
  actions?: React.ReactNode;
  /** Optional additional CSS classes. */
  className?: string;
}

/**
 * @wizard
 * @name PageHeader
 * @description Displays the main header section of a page, including a title, optional description, and a slot for action buttons.
 * @tags layout, typography, header, ui, template
 * @props
 * - name: title
 * type: string
 * description: The main title of the page.
 * - name: description
 * type: string
 * description: A brief descriptive subtitle displayed below the main title.
 * - name: actions
 * type: React.ReactNode
 * description: A slot for action buttons or other controls, typically aligned to the right of the header.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for custom styling of the page header container.
 * @category templates-patterns
 * @id page-header
 */
export const PageHeader: React.FC<PageHeaderProps> = ({ title, description, actions, className }) => {
  return (
    <div className={`flex flex-col md:flex-row md:items-center md:justify-between gap-4 py-4 border-b border-border ${className || ''}`}>
      <div className="flex-grow">
        <h1 className="text-3xl font-bold text-text">{title}</h1>
        {description && <p className="mt-1 text-text-light">{description}</p>}
      </div>
      {actions && <div className="flex-shrink-0">{actions}</div>}
    </div>
  );
};
</file>

<file path="src/components/layout/SectionHeader.tsx">
// packages/ui/src/templates-patterns/SectionHeader.tsx
import React from 'react';

export interface SectionHeaderProps {
  /** The title of the content section. */
  title: string;
  /** Optional additional CSS classes. */
  className?: string;
}

/**
 * @wizard
 * @name SectionHeader
 * @description A simple, consistent header for organizing sections of content within a page.
 * @tags layout, typography, header, ui
 * @props
 * - name: title
 * type: string
 * description: The main title for the content section.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for custom styling of the header container.
 * @category templates-patterns
 * @id section-header
 */
export const SectionHeader: React.FC<SectionHeaderProps> = ({ title, className }) => {
  return (
    <div className={`pb-2 border-b border-border ${className || ''}`}>
      <h2 className="text-xl font-semibold text-text">{title}</h2>
    </div>
  );
};
</file>

<file path="src/components/layout/Sidebar.stories.tsx">
import React from 'react';
import type { Meta, StoryObj } from '@storybook/react';
import { MemoryRouter } from 'react-router-dom';
import {
  Sidebar,
  SidebarProvider,
  useSidebar,
  SidebarTrigger,
} from './Sidebar';

// Import our new, updated content component
import { StorySidebarContent } from './StorySidebarContent';

const meta: Meta<typeof Sidebar> = {
  title: 'Layout/Sidebar',
  component: Sidebar,
  decorators: [
    (Story) => (
      <MemoryRouter initialEntries={['/']}>
        {/* The Provider must wrap everything */}
        <SidebarProvider>
          <div className="flex h-[800px] w-full bg-background">
            <Story /> {/* Renders <Sidebar> */}
            <main className="flex-1 p-8 relative flex flex-col">
              
              <div className="flex items-center justify-between mb-8">
                <h1 className="text-2xl font-bold">Main Content Area</h1>
                {/* Mobile Trigger handles its own visibility (md:hidden) */}
                <SidebarTrigger /> 
              </div>

              <div className="prose dark:prose-invert max-w-none">
                <p className="text-muted-foreground">
                  This layout demonstrates the <strong>"Zero Jank"</strong> sidebar architecture.
                </p>
                <ul className="list-disc pl-5 mt-4 space-y-2 text-muted-foreground">
                  <li>
                    <strong>Ghost Spacer:</strong> Notice how the content doesn't "jump" when you toggle. 
                    An invisible spacer reserves the room instantly.
                  </li>
                  <li>
                    <strong>Text Handling:</strong> Labels fade out before the width collapses, preventing text wrapping/squishing.
                  </li>
                  <li>
                    <strong>Mobile Overlay:</strong> Resize the window to mobile view to see the backdrop behavior.
                  </li>
                </ul>
              </div>

            </main>
          </div>
        </SidebarProvider>
      </MemoryRouter>
    ),
  ],
  parameters: {
    layout: 'fullscreen',
  },
};

export default meta;

type Story = StoryObj<typeof meta>;

// --- Stories ---

export const Default: Story = {
  render: () => (
    <Sidebar>
      <StorySidebarContent />
    </Sidebar>
  ),
};

export const InitiallyOpen: Story = {
  render: () => {
    const { setIsOpen } = useSidebar();

    // Force open on mount for visual regression testing
    React.useEffect(() => {
      setIsOpen(true);
    }, [setIsOpen]);

    return (
      <Sidebar>
        <StorySidebarContent />
      </Sidebar>
    );
  },
};
</file>

<file path="src/components/layout/StorySidebarContent.tsx">
import { SidebarItem } from './Sidebar';
import { IconName } from '../ui/Icon';

export const mockItems: SidebarItem[] = [
  { id: '1', label: 'Dashboard', icon: 'layout' as IconName },
  { id: '2', label: 'Analytics', icon: 'bar-chart' as IconName },
  { id: '3', label: 'Settings', icon: 'settings' as IconName },
];

export const mockUser = {
  name: 'Jane Doe',
  email: 'jane@example.com',
  avatarUrl: 'https://i.pravatar.cc/150?u=a042581f4e29026024d',
};
</file>

<file path="src/components/navigation/Breadcrumbs.tsx">
import React from 'react';
import { Link } from 'react-router-dom';

interface BreadcrumbItemProps {
  label: React.ReactNode;
  to?: string;
  isCurrent?: boolean;
  className?: string;
  icon?: React.ReactNode;
}

/**
 * @wizard
 * @name BreadcrumbItem
 * @description Represents a single step or link within a `Breadcrumbs` navigation path.
 * @tags navigation, ui, link
 * @props
 * - name: label
 * type: React.ReactNode
 * description: The text or content displayed for this breadcrumb item.
 * - name: to
 * type: string
 * description: The URL path for this item to navigate to. If not provided, it's just text.
 * - name: isCurrent
 * type: boolean
 * description: If true, indicates this is the current page and will not be a clickable link.
 * - name: icon
 * type: React.ReactNode
 * description: An optional icon to display next to the breadcrumb label.
 * - name: className
 * type: string
 * description: Additional CSS classes for custom styling of the individual item.
 * @category navigation
 * @id breadcrumb-item
 * @id breadcrumbs
 * @id breadcrumbs
 * @id breadcrumbs
 */
const BreadcrumbItem: React.FC<BreadcrumbItemProps> = ({ label, to, isCurrent, className, icon }) => {
  const baseStyles = 'inline-flex items-center text-sm font-medium';
  const themeStyles = isCurrent ? 'text-text' : 'text-primary hover:text-secondary';
  const separatorStyles = 'ml-2 text-muted-foreground';

  // FIX: Cloned the icon to pass size and className props directly, removing the span wrapper.
  const iconElement = icon && React.isValidElement(icon)
    ? React.cloneElement(icon as React.ReactElement<any>, {
        size: 14, // This is equivalent to Tailwind's h-3.5/w-3.5
        className: 'mr-1.5',
      })
    : null;

  const content = (
    <>
      {iconElement}
      {label}
    </>
  );

  return (
    <li className={`${baseStyles} ${themeStyles} ${className || ''}`} aria-current={isCurrent ? 'page' : undefined}>
      {to && !isCurrent ? (
        <Link to={to} className="inline-flex items-center hover:underline">
          {content}
        </Link>
      ) : (
        <span className="inline-flex items-center">{content}</span>
      )}
      {!isCurrent && <span className={separatorStyles}>/</span>}
    </li>
  );
};

interface BreadcrumbsProps {
  children: React.ReactElement<BreadcrumbItemProps>[];
  className?: string;
}

/**
 * @wizard
 * @name Breadcrumbs
 * @description A navigation component that shows the user's current location within a hierarchy of pages.
 * @tags navigation, ui, path
 * @props
 * - name: children
 * type: React.ReactElement<BreadcrumbItemProps>[]
 * description: A collection of `BreadcrumbItem` components representing the path.
 * - name: className
 * type: string
 * description: Additional CSS classes for custom styling of the breadcrumbs container.
 * @category navigation
 */
const Breadcrumbs: React.FC<BreadcrumbsProps> = ({ children, className }) => {
  return (
    <nav className={`flex ${className || ''}`} aria-label="Breadcrumb">
      <ol className="inline-flex items-center space-x-1 md:space-x-2">
        {children}
      </ol>
    </nav>
  );
};

export { Breadcrumbs, BreadcrumbItem };
</file>

<file path="src/components/navigation/Menu.tsx">
'use client';

/**
 * @file Menu.tsx
 * @repository ramme-ui
 * @description Provides the dropdown Menu, MenuItem, and MenuDivider components.
 *
 * @developer_notes
 * STRATEGIC UPGRADE (10/20/2025):
 * This component has been upgraded to support polymorphism using the `asChild`
 * pattern, facilitated by the `@radix-ui/react-slot` package.
 *
 * 1. Why?: The original `MenuItem` was hardcoded to render a `<button>`.
 * This made it impossible for consumer applications (like `ramme-app-starter`)
 * to use it with React Router's `<Link>` component, which must render an `<a>` tag
 * to be accessible and functional.
 *
 * 2. The Fix: `MenuItem` now accepts an `asChild` prop.
 * - If `asChild` is `false` (default), it renders a `<button>` as before.
 * - If `asChild` is `true`, it renders a `<Slot>` component, which
 * "melts" its props onto the React component passed as its child.
 *
 * 3. Consistency: This pattern matches our `Button` component, creating a
 * consistent and predictable API across the entire `ramme-ui` library.
 * We also migrated the hardcoded class strings to use our `cn` utility.
 */

import React, { useState, useRef, useEffect, useCallback } from 'react';
import { Slot } from '@radix-ui/react-slot';
import { cn } from '../../utils/cn';

/**
 * @wizard
 * @name MenuDivider
 * @description A visual separator for grouping MenuItems within a Menu.
 * @id menu-divider
 * @id menu-item
 * @id menu
 * @id menu-item
 * @id menu
 * @id menu-item
 * @id menu
 */
const MenuDivider: React.FC = () => (
  <div className="my-1 h-px bg-border" role="separator" />
);

interface MenuItemProps {
  children: React.ReactNode;
  onClick?: () => void;
  disabled?: boolean;
  icon?: React.ReactNode;
  asChild?: boolean;
}

/**
 * @wizard
 * @name MenuItem
 * @description An individual selectable item within a Menu component.
 */
const MenuItem: React.FC<MenuItemProps> = ({
  children,
  onClick,
  disabled,
  icon,
  asChild = false,
}) => {
  const itemClasses = cn(
    'flex items-center w-full text-left px-3 py-1.5 text-sm cursor-pointer transition-colors duration-150 ease-in-out whitespace-nowrap rounded-md',
    'hover:bg-accent hover:text-accent-foreground text-text',
    disabled && 'opacity-50 cursor-not-allowed',
  );

  // We still calculate the icon, but only use it if asChild is false
  const iconElement =
    icon && React.isValidElement(icon)
      ? React.cloneElement(icon as React.ReactElement<any>, {
          size: 14,
          className: 'mr-2 text-muted-foreground',
        })
      : null;

  const Comp = asChild ? Slot : 'button';

  return (
    <Comp
      onClick={onClick}
      disabled={disabled}
      className={itemClasses}
      role="menuitem"
    >
      {/* --- THIS IS THE FIX ---
        If asChild is true, pass *only* children.
        If asChild is false, render the icon and children as before.
      */}
      {asChild ? (
        children
      ) : (
        <>
          {iconElement}
          {children}
        </>
      )}
    </Comp>
  );
};

// ... (Rest of Menu.tsx remains the same) ...

interface MenuProps {
  trigger: React.ReactNode;
  children: React.ReactNode;
  position?: 'bottom-left' | 'bottom-right' | 'top-left' | 'top-right';
}

/**
 * @wizard
 * @name Menu
 * @description A dropdown menu component, useful for navigation or contextual actions.
 */
const Menu: React.FC<MenuProps> = ({
  trigger,
  children,
  position = 'bottom-right',
}) => {
  const [isOpen, setIsOpen] = useState(false);
  const menuRef = useRef<HTMLDivElement>(null);
  const closeTimerRef = useRef<number | null>(null);

  const handleMouseEnter = () => {
    if (closeTimerRef.current) clearTimeout(closeTimerRef.current);
    setIsOpen(true);
  };

  const handleMouseLeave = () => {
    closeTimerRef.current = window.setTimeout(() => setIsOpen(false), 150);
  };

  const toggleMenu = useCallback(() => setIsOpen((prev) => !prev), []);

  const handleClickOutside = useCallback((event: MouseEvent) => {
    if (menuRef.current && !menuRef.current.contains(event.target as Node)) {
      setIsOpen(false);
    }
  }, []);

  useEffect(() => {
    if (isOpen) {
      document.addEventListener('mousedown', handleClickOutside);
    } else {
      document.removeEventListener('mousedown', handleClickOutside);
    }
    return () => {
      document.removeEventListener('mousedown', handleClickOutside);
    };
  }, [isOpen, handleClickOutside]);

  const getPositionClasses = () => {
    switch (position) {
      case 'bottom-left':
        return 'top-full left-0 mt-1';
      case 'bottom-right':
        return 'top-full right-0 mt-1';
      case 'top-left':
        return 'bottom-full left-0 mb-1';
      case 'top-right':
        return 'bottom-full right-0 mb-1';
      default:
        return 'top-full right-0 mt-2';
    }
  };

  return (
    <div
      className="relative inline-block text-left"
      ref={menuRef}
      onMouseEnter={handleMouseEnter}
      onMouseLeave={handleMouseLeave}
    >
      <div onClick={toggleMenu} className="cursor-pointer">
        {trigger}
      </div>
      {isOpen && (
        <div
          onMouseEnter={handleMouseEnter}
          className={`origin-top-right absolute z-50 rounded-md shadow-lg bg-card border border-border ring-1 ring-black ring-opacity-5 focus:outline-none min-w-[12rem] w-max ${getPositionClasses()}`}
          role="menu"
          aria-orientation="vertical"
        >
          <div className="p-2" role="none">
            {children}
          </div>
        </div>
      )}
    </div>
  );
};

export { Menu, MenuItem, MenuDivider };
</file>

<file path="src/components/navigation/Pagination.tsx">
'use client';

import React, { useCallback, useMemo } from 'react';
import { Button } from '../ui/Button';

export interface PaginationProps {
  /** The currently active page number. */
  currentPage: number;
  /** The total number of pages available. */
  totalPages: number;
  /** Callback function invoked when the page is changed. */
  onPageChange: (page: number) => void;
  /** The maximum number of page buttons to display. */
  maxPageButtons?: number;
  /** Optional additional CSS classes for the container. */
  className?: string;
}

/**
 * @wizard
 * @name Pagination
 * @description A navigation control for moving between pages of content.
 * @tags navigation, ui, data-display
 * @props
 * - name: currentPage
 * type: number
 * description: The currently active page number (1-based index).
 * - name: totalPages
 * type: number
 * description: The total number of pages available.
 * - name: onPageChange
 * type: (page: number) => void
 * description: Callback function invoked when the user selects a new page.
 * - name: maxPageButtons
 * type: number
 * description: The maximum number of visible page number buttons.
 * default: 5
 * - name: className
 * type: string
 * description: Optional additional CSS classes for the container.
 * @category navigation
 * @id pagination
 */
export const Pagination: React.FC<PaginationProps> = ({
  currentPage,
  totalPages,
  onPageChange,
  maxPageButtons = 5,
  className,
}) => {
  const getPageNumbers = useMemo(() => {
    const pages: (number | '...')[] = [];
    if (totalPages <= maxPageButtons) {
      for (let i = 1; i <= totalPages; i++) {
        pages.push(i);
      }
      return pages;
    }

    const half = Math.floor(maxPageButtons / 2);
    let startPage = Math.max(1, currentPage - half);
    let endPage = Math.min(totalPages, currentPage + half);

    if (currentPage - half <= 1) {
      endPage = maxPageButtons;
    }
    if (currentPage + half >= totalPages) {
      startPage = totalPages - maxPageButtons + 1;
    }

    if (startPage > 1) {
      pages.push(1);
      if (startPage > 2) {
        pages.push('...');
      }
    }

    for (let i = startPage; i <= endPage; i++) {
      pages.push(i);
    }

    if (endPage < totalPages) {
      if (endPage < totalPages - 1) {
        pages.push('...');
      }
      pages.push(totalPages);
    }

    return pages;
  }, [currentPage, totalPages, maxPageButtons]);

  const handlePageClick = useCallback((page: number) => {
    onPageChange(page);
  }, [onPageChange]);

  const handlePrevClick = useCallback(() => {
    onPageChange(currentPage - 1);
  }, [currentPage, onPageChange]);

  const handleNextClick = useCallback(() => {
    onPageChange(currentPage + 1);
  }, [currentPage, onPageChange]);

  if (totalPages <= 1) {
    return null;
  }

  return (
    <nav className={`flex items-center justify-center gap-2 ${className || ''}`} aria-label="Pagination">
      <Button
        variant="outline"
        size="sm"
        onClick={handlePrevClick}
        disabled={currentPage === 1}
        // FIX: Changed from `iconBefore` to `iconLeft` and passed the icon name string
        iconLeft="chevron-left"
      >
        Previous
      </Button>

      <div className="flex items-center gap-1">
        {getPageNumbers.map((page, index) =>
          typeof page === 'number' ? (
            <Button
              key={page}
              variant={currentPage === page ? 'primary' : 'ghost'}
              size="sm"
              onClick={() => handlePageClick(page)}
              className="w-10"
            >
              {page}
            </Button>
          ) : (
            <span key={`ellipsis-${index}`} className="px-2 py-1 text-sm text-muted-foreground">
              ...
            </span>
          )
        )}
      </div>

      <Button
        variant="outline"
        size="sm"
        onClick={handleNextClick}
        disabled={currentPage === totalPages}
        // FIX: Changed from `iconAfter` to `iconRight` and passed the icon name string
        iconRight="chevron-right"
      >
        Next
      </Button>
    </nav>
  );
};
</file>

<file path="src/components/navigation/Stepper.tsx">
import React from 'react';
import { Icon } from '../ui/Icon';

export interface Step {
  label: string;
  summary?: string;
}

export interface StepperProps {
  /** An array of step objects to display. */
  steps: Step[];
  /** The index of the currently active step (0-based). */
  currentStep: number;
  /** Optional additional CSS classes for the container. */
  className?: string;
}

/**
 * A component that displays progress through a sequence of steps.
 * It's ideal for multi-step forms, wizards, or onboarding flows.
 */

/**
 * @wizard
 * @name Stepper
 * @description Guides users through a sequence of discrete steps, ideal for multi-step forms or onboarding flows.
 * @tags navigation, progress, wizard, ui
 * @props
 * - name: steps
 * type: { label: string; summary?: string; }[]
 * description: An array of step objects, each with a `label` and optional `summary`.
 * - name: currentStep
 * type: number
 * description: The 0-based index of the currently active step.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for the stepper container.
 * @category navigation
 * @id stepper
 */

export const Stepper: React.FC<StepperProps> = ({ steps, currentStep, className }) => {
  return (
    <div className={`flex justify-between items-start ${className || ''}`}>
      {steps.map((step, index) => {
        const isCompleted = index < currentStep;
        const isActive = index === currentStep;
        const isInactive = index > currentStep;

        return (
          <React.Fragment key={index}>
            <div className="flex flex-col items-center text-center">
              <div
                className={`w-8 h-8 rounded-full flex items-center justify-center border-2 transition-all duration-300
                  ${isCompleted ? 'bg-primary border-primary text-white' : ''}
                  ${isActive ? 'bg-card border-primary text-primary' : ''}
                  ${isInactive ? 'bg-card border-border text-text-light' : ''}
                `}
              >
                {isCompleted ? <Icon name="check" size={16} /> : <span>{index + 1}</span>}
              </div>
              <div className="mt-2">
                <p className={`font-semibold text-sm ${isActive ? 'text-primary' : 'text-text'}`}>{step.label}</p>
                {step.summary && <p className="text-xs text-text-light mt-1">{step.summary}</p>}
              </div>
            </div>

            {/* Connector Line */}
            {index < steps.length - 1 && (
              <div className="flex-1 mt-4 mx-2 h-0.5">
                <div
                  className={`h-full w-full rounded-full transition-colors duration-300 ${index < currentStep ? 'bg-primary' : 'bg-border'}`}
                ></div>
              </div>
            )}
          </React.Fragment>
        );
      })}
    </div>
  );
};
</file>

<file path="src/components/navigation/Tabs.tsx">
'use client';

import React, { useState, useCallback, useMemo } from 'react';

export interface TabPanelProps {
  id: string;
  label: string;
  children: React.ReactNode;
  icon?: React.ReactNode;
}

/**
 * @wizard
 * @name TabPanel
 * @description Represents a single tab and its associated content panel within a `Tabs` component.
 * @tags navigation, ui, content
 * @props
 * - name: id
 * type: string
 * description: A unique identifier for this tab panel, used to link it to its header.
 * - name: label
 * type: string
 * description: The text label displayed on the tab header.
 * - name: children
 * type: React.ReactNode
 * description: The content to be displayed when this tab is active.
 * - name: icon
 * type: React.ReactNode
 * description: An optional icon to display next to the tab label in the header.
 * @category navigation
 * @id tab-panel
 * @id tabs
 * @id tabs
 * @id tabs
 */
export const TabPanel: React.FC<TabPanelProps> = ({ children }) => {
  return <div role="tabpanel" className="p-4 bg-card rounded-b-lg border border-t-0 border-border">{children}</div>;
};

export interface TabsProps {
  children: React.ReactElement<TabPanelProps>[];
  defaultActiveTab?: string;
  className?: string;
}

/**
 * @wizard
 * @name Tabs
 * @description A navigation component that allows users to switch between different content panels within the same area.
 * @tags navigation, ui, content-switcher
 * @props
 * - name: children
 * type: React.ReactElement<TabPanelProps>[]
 * description: A collection of `TabPanel` components that define the tabs and their content.
 * - name: defaultActiveTab
 * type: string
 * description: The `id` of the tab that should be active by default when the component mounts.
 * - name: className
 * type: string
 * description: Additional CSS classes for custom styling of the tabs container.
 * @category navigation
 */
export const Tabs: React.FC<TabsProps> = ({ children, defaultActiveTab, className }) => {
  const initialActiveTab = useMemo(() => {
    if (defaultActiveTab) return defaultActiveTab;
    return children.length > 0 ? children[0].props.id : '';
  }, [children, defaultActiveTab]);

  const [activeTab, setActiveTab] = useState<string>(initialActiveTab);
  const handleTabClick = useCallback((tabId: string) => setActiveTab(tabId), []);

  return (
    <div className={className}>
      <div className="flex border-b border-border mb-px" role="tablist">
        {children.map((tab) => {
          // FIX: Cloned the icon to pass size and className props directly.
          const icon = tab.props.icon;
          const iconElement = icon && React.isValidElement(icon)
            ? React.cloneElement(icon as React.ReactElement<any>, {
                size: 16, // Equivalent to h-4/w-4
                className: 'mr-2',
              })
            : null;

          return (
            <button
              key={tab.props.id}
              id={`tab-${tab.props.id}`}
              role="tab"
              aria-controls={tab.props.id}
              aria-selected={activeTab === tab.props.id}
              onClick={() => handleTabClick(tab.props.id)}
              className={`inline-flex items-center px-4 py-2 text-text text-lg font-medium border-b-2 transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 ${
                activeTab === tab.props.id
                  ? 'border-primary'
                  : 'border-transparent hover:border-border'
              }`}
            >
              {iconElement}
              {tab.props.label}
            </button>
          )
        })}
      </div>
      {children.find((tab) => tab.props.id === activeTab)}
    </div>
  );
};
</file>

<file path="src/components/ui/Button.stories.tsx">
import type { Meta, StoryObj } from '@storybook/react';
import { Button } from './Button';
import { Icon } from './Icon';

const meta = {
  title: 'UI/Button',
  component: Button,
  parameters: {
    layout: 'centered',
  },
  tags: ['autodocs'],
  argTypes: {
    variant: {
      control: 'select',
      options: [
        'primary',
        'danger',
        'outline',
        'secondary',
        'ghost',
        'link',
        'accent',
      ],
    },
    size: {
      control: 'select',
      options: ['sm', 'md', 'lg', 'icon'],
    },
    children: {
      control: 'text',
    },
    loading: {
      control: 'boolean',
    },
    // We use 'select' here if possible, but 'text' is fine for generic input
    iconLeft: { control: 'text' },
    iconRight: { control: 'text' },
    asChild: {
      control: 'boolean',
      description:
        'Render the component as its child element (e.g., for <Link> or <a>)',
    },
  },
} satisfies Meta<typeof Button>;

export default meta;
type Story = StoryObj<typeof meta>;

export const Primary: Story = {
  args: {
    variant: 'primary',
    children: 'Button',
  },
};

export const Danger: Story = {
  args: {
    variant: 'danger',
    children: 'Delete',
  },
};

export const WithIconLeft: Story = {
  args: {
    variant: 'primary',
    children: 'Login',
    iconLeft: 'log-in',
  },
};

export const Loading: Story = {
  args: {
    variant: 'primary',
    children: 'Submitting',
    loading: true,
  },
};

// ‚úÖ UPDATE 1: Use 'render' for complex children to keep args serializable
export const IconOnly: Story = {
  args: {
    variant: 'ghost',
    size: 'icon',
    // We don't pass children in args here
  },
  render: (args) => (
    <Button {...args}>
      <Icon name="settings" />
    </Button>
  ),
};

// ‚úÖ UPDATE 2: Use 'render' for polymorphic components
export const PolymorphicLink: Story = {
  name: 'Polymorphic (as Link)',
  args: {
    variant: 'outline',
    asChild: true,
  },
  render: (args) => (
    <Button {...args}>
      <a
        href="https://google.com"
        target="_blank"
        rel="noopener noreferrer"
        className="flex items-center"
      >
        <Icon name="external-link" className="mr-2" />
        Open Google
      </a>
    </Button>
  ),
};
</file>

<file path="src/components/ui/Icon.tsx">
'use client';

import React, { memo, useState, useEffect } from 'react';
// This line is now corrected to import the 'LucideIcon' type directly.
import type { LucideProps, LucideIcon } from 'lucide-react';
import dynamicIconImports from 'lucide-react/dynamicIconImports';

// Define the props for our custom Icon component
export type IconName = keyof typeof dynamicIconImports;

interface IconProps extends Omit<LucideProps, 'name'> {
  name: IconName;
  className?: string;
}

/**
 * @wizard
 * @name Icon
 * @description A dynamic component that renders scalable vector icons from the Lucide library.
 * @tags ui, graphics, svg, symbol
 * @props
 * - name: name
 * type: IconName
 * description: The specific name of the Lucide icon to display (e.g., 'user', 'settings', 'check').
 * - name: size
 * type: number | string
 * description: The width and height of the icon in pixels or CSS units.
 * default: 24 (implicit from Lucide default)
 * - name: color
 * type: string
 * description: The color of the icon.
 * - name: strokeWidth
 * type: number | string
 * description: The width of the icon's stroke.
 * default: 2 (implicit from Lucide default)
 * - name: className
 * type: string
 * description: Optional additional CSS classes for styling the SVG element.
 * @category ui
 * @id icon
 */
const IconComponent: React.FC<IconProps> = ({ name, className, ...props }) => {
  // State to hold the dynamically imported icon component
  const [ImportedIcon, setImportedIcon] = useState<LucideIcon | null>(null);

  useEffect(() => {
    let isMounted = true;
    const importIcon = async () => {
      try {
        // Dynamically import the icon
        const module = await dynamicIconImports[name]();
        if (isMounted) {
          // Set the imported component into state
          setImportedIcon(() => module.default);
        }
      } catch (error) {
          console.error(`Icon not found: ${name}`);
      }
    };
    importIcon();
    
    // Cleanup function to prevent state updates on unmounted components
    return () => {
      isMounted = false;
    };
  }, [name]); // This effect runs only when the 'name' prop changes

  // If the icon has been imported, render it
  if (ImportedIcon) {
    return <ImportedIcon className={className} {...props} />;
  }

  // Otherwise, render a fallback placeholder
  return <span style={{ height: props.size || 24, width: props.size || 24, display: 'inline-block' }} />;
};

// Memoize the component to prevent re-renders if props haven't changed
export const Icon = memo(IconComponent);
</file>

<file path="src/contexts/ThemeContext.tsx">
'use client';

import React, {
  createContext,
  useState,
  useEffect,
  useContext,
  useCallback,
  useMemo,
} from 'react';

export type ThemeName = 'light' | 'dark' | 'corporate' | 'midnight' | 'blueprint';

export const availableThemes: ThemeName[] = [
  'light',
  'dark',
  'corporate',
  'midnight',
  'blueprint',
];

// --- FONT MAPPING (Tier 1 Explicit Overrides) ---
// We explicitly define the fonts here to guarantee they switch, 
// rather than relying on CSS class inheritance which can be flaky.
const STANDARD_THEME_FONTS: Record<ThemeName, { sans: string; serif: string; mono: string }> = {
  light: { 
    sans: '"Inter", system-ui, sans-serif', 
    serif: 'Georgia, serif', 
    mono: '"Menlo", monospace' 
  },
  dark: { 
    sans: '"Inter", system-ui, sans-serif', 
    serif: 'Georgia, serif', 
    mono: '"Menlo", monospace' 
  },
  corporate: { 
    sans: '"Lato", sans-serif', 
    serif: '"Merriweather", serif', 
    mono: '"Menlo", monospace' 
  },
  midnight: { 
    sans: '"Roboto Mono", monospace', 
    serif: 'Georgia, serif', 
    mono: '"Roboto Mono", monospace' 
  },
  blueprint: { 
    sans: '"Courier New", monospace', 
    serif: 'Georgia, serif', 
    mono: '"Courier New", monospace' 
  },
};

// --- TIER 2: THEME SCHEMA ---
export interface ThemeConfig {
  name: string;
  colors: {
    primary: string;           
    primaryForeground: string;
    secondary: string;
    secondaryForeground: string;
    accent: string;
    accentForeground: string;
    danger: string;
    dangerForeground: string;
    background: string;
    card: string;
    text: string;
    border: string;
    muted: string;
    mutedForeground: string;
    input: string;
    inputBorder: string;
    ring: string;
  };
  borderRadius: string;
  fonts?: {
    sans: string;
    serif: string;
    mono: string;
  };
}

interface ThemeContextType {
  theme: ThemeName;
  availableThemes: ThemeName[];
  setTheme: (themeName: ThemeName) => void;
  
  // --- VISUAL TOKENS ---
  borderRadius: string;
  setBorderRadius: (radius: string) => void;
  fontSize: string;
  setFontSize: (size: string) => void;

  // --- TIER 2: CUSTOM THEME INJECTION ---
  customTheme: ThemeConfig | null;
  setCustomTheme: (config: ThemeConfig | null) => void;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

export const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({
  children,
}) => {
  // --- State ---
  const [theme, setThemeState] = useState<ThemeName>(() => {
    if (typeof window !== 'undefined') {
      const storedTheme = localStorage.getItem('theme') as ThemeName;
      return (storedTheme && availableThemes.includes(storedTheme)) ? storedTheme : 'light';
    }
    return 'light';
  });

  const [borderRadius, setBorderRadiusState] = useState<string>('0.5rem');
  const [fontSize, setFontSizeState] = useState<string>('1rem');
  const [customTheme, setCustomThemeState] = useState<ThemeConfig | null>(null);

  // --- Hydration ---
  useEffect(() => {
    if (typeof window !== 'undefined') {
      const savedRadius = localStorage.getItem('borderRadius');
      const savedFont = localStorage.getItem('fontSize');
      const savedCustomTheme = localStorage.getItem('customTheme');

      if (savedRadius) setBorderRadiusState(savedRadius);
      if (savedFont) setFontSizeState(savedFont);
      if (savedCustomTheme) {
        try {
          setCustomThemeState(JSON.parse(savedCustomTheme));
        } catch (e) {
          console.warn('Failed to parse custom theme');
        }
      }
    }
  }, []);

  // --- Setters ---
  const setTheme = useCallback((newTheme: ThemeName) => {
    setThemeState(newTheme);
    setCustomThemeState(null); 
    localStorage.setItem('theme', newTheme);
    localStorage.removeItem('customTheme');
  }, []);

  const setCustomTheme = useCallback((config: ThemeConfig | null) => {
    setCustomThemeState(config);
    if (config) {
      localStorage.setItem('customTheme', JSON.stringify(config));
    } else {
      localStorage.removeItem('customTheme');
    }
  }, []);

  const setBorderRadius = useCallback((radius: string) => {
    setBorderRadiusState(radius);
    localStorage.setItem('borderRadius', radius);
  }, []);

  const setFontSize = useCallback((size: string) => {
    setFontSizeState(size);
    localStorage.setItem('fontSize', size);
  }, []);

  // --- THEME ENGINE: The "Paint" Effect ---
  useEffect(() => {
    const root = document.documentElement;

    // 1. Reset standard classes
    availableThemes.forEach((t) => root.classList.remove(t));
    root.classList.remove('custom-theme');

    // 2. Helper to set/remove CSS variables
    const setVar = (key: string, val: string) => root.style.setProperty(key, val);
    const removeVar = (key: string) => root.style.removeProperty(key);

    const cssVars = [
      '--app-primary-color', '--app-primary-foreground-color',
      '--app-secondary-color', '--app-secondary-foreground-color',
      '--app-accent-color', '--app-accent-foreground-color',
      '--app-danger-color', '--app-danger-foreground-color',
      '--app-bg-color', '--app-card-bg-color', '--app-text-color', '--app-border-color',
      '--app-muted-bg', '--app-muted-text',
      '--app-input-bg-color', '--app-input-border-color', '--app-input-focus-ring-color'
    ];

    if (customTheme) {
      // === MODE A: CUSTOM INJECTION (AI) ===
      root.classList.add('custom-theme'); 
      const c = customTheme.colors;
      
      // Inject Colors
      setVar('--app-primary-color', c.primary);
      setVar('--app-primary-foreground-color', c.primaryForeground);
      setVar('--app-secondary-color', c.secondary);
      setVar('--app-secondary-foreground-color', c.secondaryForeground);
      setVar('--app-accent-color', c.accent);
      setVar('--app-accent-foreground-color', c.accentForeground);
      setVar('--app-danger-color', c.danger);
      setVar('--app-danger-foreground-color', c.dangerForeground);
      
      setVar('--app-bg-color', c.background);
      setVar('--app-card-bg-color', c.card);
      setVar('--app-text-color', c.text);
      setVar('--app-border-color', c.border);
      setVar('--app-muted-bg', c.muted);
      setVar('--app-muted-text', c.mutedForeground);
      setVar('--app-input-bg-color', c.input);
      setVar('--app-input-border-color', c.inputBorder);
      setVar('--app-input-focus-ring-color', c.ring);

      // ‚úÖ FIX 1: Explicitly Inject Fonts for Custom Themes
      if (customTheme.fonts) {
        setVar('--app-font-sans', customTheme.fonts.sans);
        setVar('--app-font-serif', customTheme.fonts.serif);
        setVar('--app-font-mono', customTheme.fonts.mono);
      }

      // ‚úÖ FIX 2: Force Paint Background immediately (Zero Jank)
      // This ensures the background changes even if Tailwind classes on <body> are missing or delayed
      document.body.style.backgroundColor = `rgb(${c.background})`;
      document.body.style.color = `rgb(${c.text})`;

      // Radius
      setVar('--app-border-radius-md', customTheme.borderRadius);
      setVar('--app-border-radius-sm', `calc(${customTheme.borderRadius} - 0.25rem)`);
      setVar('--app-border-radius-lg', `calc(${customTheme.borderRadius} + 0.25rem)`);

    } else {
      // === MODE B: STANDARD PRESET ===
      root.classList.add(theme);
      
      // Clean up injected variables
      cssVars.forEach(removeVar);

      // ‚úÖ FIX 3: Explicitly Inject Fonts for Standard Themes
      // We look up the font in our map and force it, ensuring 'Corporate' gets 'Lato'
      const standardFont = STANDARD_THEME_FONTS[theme];
      setVar('--app-font-sans', standardFont.sans);
      setVar('--app-font-serif', standardFont.serif);
      setVar('--app-font-mono', standardFont.mono);

      // ‚úÖ FIX 4: Reset Body Background to NULL
      // This allows the standard CSS classes (.dark, .corporate) in index.css to take over control
      document.body.style.backgroundColor = '';
      document.body.style.color = '';

      // Standard Radius
      setVar('--app-border-radius-md', borderRadius);
      setVar('--app-border-radius-sm', `calc(${borderRadius} - 0.25rem)`);
      setVar('--app-border-radius-lg', `calc(${borderRadius} + 0.25rem)`);
    }

    // Size is always state-driven
    setVar('--app-font-size-base', fontSize);

  }, [theme, customTheme, borderRadius, fontSize]);

  const value = useMemo(
    () => ({
      theme,
      availableThemes,
      setTheme,
      borderRadius,
      setBorderRadius,
      fontSize,
      setFontSize,
      customTheme,
      setCustomTheme
    }),
    [theme, setTheme, borderRadius, setBorderRadius, fontSize, setFontSize, customTheme, setCustomTheme]
  );

  return (
    <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>
  );
};

export const useTheme = () => {
  const context = useContext(ThemeContext);
  if (context === undefined) {
    throw new Error('useTheme must be used within a ThemeProvider');
  }
  return context;
};
</file>

<file path="src/lib/hooks/useChartTheme.ts">
import { useState, useEffect } from 'react';
import { useTheme } from '../../contexts/ThemeContext';

interface ChartTheme {
  textColor: string;
  gridColor: string;
  tooltipBg: string;
  palette: string[];
}

export const useChartTheme = (): ChartTheme => {
  // ‚úÖ FIX: Destructure customTheme so we can react to it
  const { theme, customTheme } = useTheme();
  
  const [chartTheme, setChartTheme] = useState<ChartTheme>({
    textColor: 'rgb(33 37 41)',
    gridColor: 'rgb(233 236 239)',
    tooltipBg: 'rgb(255 255 255)',
    palette: [],
  });

  useEffect(() => {
    // Helper to safely get RGB values
    const getVar = (name: string) => {
        // We use document.documentElement because our ThemeProvider applies classes/styles there
        return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
    };

    // ‚úÖ FIX: Small timeout to ensure the DOM has updated with the new class/style
    // before we read the computed values. This prevents reading "stale" colors.
    const timer = setTimeout(() => {
        const paletteString = getVar('--app-chart-palette');
        const palette = paletteString 
            ? paletteString.split(',').map(color => `rgb(${color.trim()})`) 
            : [];

        setChartTheme({
          textColor: `rgb(${getVar('--app-text-color')})`,
          gridColor: `rgb(${getVar('--app-chart-grid-color')})`,
          tooltipBg: `rgb(${getVar('--app-card-bg-color')})`,
          palette,
        });
    }, 10); // 10ms is enough to let the DOM settle

    return () => clearTimeout(timer);

  }, [theme, customTheme]); // ‚úÖ FIX: Re-run when EITHER theme string OR custom object changes

  return chartTheme;
};
</file>

<file path="src/lib/types/wizard.d.ts">
// packages/ui/src/types/wizard.d.ts

import type { ColDef, GridOptions } from 'ag-grid-community';
import type { ThemeName } from '../../contexts/ThemeContext';

// NEW: Define and export the type for a single prop.
export interface WizardEntryProp {
  name: string;
  type: string;
  description: string;
  default?: string;
}

// Define the shape of a wizard entry for components/layouts/utils/data
export interface WizardEntry {
  id: string;
  name: string;
  version: string; // <--- Added this property
  description: string;
  tags: string[];
  category: string;
  filePath: string;
  importPath?: string;
  
  // UPDATED: Use the new WizardEntryProp type here.
  props?: WizardEntryProp[]; 
  availableData?: string[];
  
  // Specific for mock data
  returns?: {
    name: string;
    type: string;
    description: string;
  }[];
}

// Define the overall shape of the wizard manifest
export interface WizardManifest {
  components: WizardEntry[];
  layouts: WizardEntry[];
  utils: WizardEntry[];
  hooks: WizardEntry[];
  data: WizardEntry[];
  devices?: WizardEntry[]; 
}
</file>

<file path="src/component-registry.ts">
// ‚ö†Ô∏è AUTO-GENERATED by scripts/generate-registry.js
// Do not edit manually.
import React from 'react';
import { Suggestion } from './blocks/ai/Actions';
import { Actions } from './blocks/ai/Actions';
import { ChatFAB } from './blocks/ai/ChatFAB';
import { Conversation } from './blocks/ai/Conversation';
import { Loader } from './blocks/ai/Loader';
import { Message } from './blocks/ai/Message';
import { PromptInput } from './blocks/ai/PromptInput';
import { DeviceCard } from './blocks/iot/DeviceCard';
import { ActivityFeed } from './components/data-display/ActivityFeed';
import { BarChart } from './components/data-display/BarChart';
import { ChartWithTable } from './components/data-display/ChartWithTable';
import { CodeBlock } from './components/data-display/CodeBlock';
import { DataTable } from './components/data-display/DataTable';
import { LineChart } from './components/data-display/LineChart';
import { PieChart } from './components/data-display/PieChart';
import { StatCard } from './components/data-display/StatCard';
import { StatusBadge } from './components/data-display/StatusBadge';
import { Table } from './components/data-display/Table';
import { Alert } from './components/feedback/Alert';
import { EmptyState } from './components/feedback/EmptyState';
import { TippyTooltip } from './components/feedback/TippyTooltip';
import { Toast } from './components/feedback/Toast';
import { ToastProvider } from './components/feedback/ToastProvider';
import { ButtonGroup } from './components/forms/ButtonGroup';
import { Checkbox } from './components/forms/Checkbox';
import { ComboBox } from './components/forms/ComboBox';
import { DatePicker } from './components/forms/DatePicker';
import { FileUpload } from './components/forms/FileUpload';
import { FormTemplate } from './components/forms/FormTemplate';
import { Input } from './components/forms/Input';
import { Radio } from './components/forms/Radio';
import { SearchInput } from './components/forms/SearchInput';
import { SegmentedControl } from './components/forms/SegmentedControl';
import { Textarea } from './components/forms/Textarea';
import { ToggleSwitch } from './components/forms/ToggleSwitch';
import { AccordionItem } from './components/layout/Accordion';
import { Accordion } from './components/layout/Accordion';
import { ActionBar } from './components/layout/ActionBar';
import { Card } from './components/layout/Card';
import { Drawer } from './components/layout/Drawer';
import { ListItem } from './components/layout/List';
import { List } from './components/layout/List';
import { DefinitionTerm } from './components/layout/List';
import { DefinitionDescription } from './components/layout/List';
import { DefinitionList } from './components/layout/List';
import { Modal } from './components/layout/Modal';
import { PageHeader } from './components/layout/PageHeader';
import { SectionHeader } from './components/layout/SectionHeader';
import { Sidebar } from './components/layout/Sidebar';
import { BreadcrumbItem } from './components/navigation/Breadcrumbs';
import { Breadcrumbs } from './components/navigation/Breadcrumbs';
import { MenuDivider } from './components/navigation/Menu';
import { MenuItem } from './components/navigation/Menu';
import { Menu } from './components/navigation/Menu';
import { Pagination } from './components/navigation/Pagination';
import { Stepper } from './components/navigation/Stepper';
import { TabPanel } from './components/navigation/Tabs';
import { Tabs } from './components/navigation/Tabs';
import { Avatar } from './components/ui/Avatar';
import { Badge } from './components/ui/Badge';
import { Button } from './components/ui/Button';
import { Icon } from './components/ui/Icon';

export const AUTO_REGISTRY: Record<string, React.FC<any>> = {
  'Suggestion': Suggestion,
  'suggestion': Suggestion,
  'Actions': Actions,
  'actions': Actions,
  'ChatFAB': ChatFAB,
  'chat-fab': ChatFAB,
  'chatfab': ChatFAB,
  'Conversation': Conversation,
  'conversation': Conversation,
  'Loader': Loader,
  'loader': Loader,
  'Message': Message,
  'message': Message,
  'PromptInput': PromptInput,
  'prompt-input': PromptInput,
  'promptinput': PromptInput,
  'DeviceCard': DeviceCard,
  'device-card': DeviceCard,
  'devicecard': DeviceCard,
  'ActivityFeed': ActivityFeed,
  'activity-feed': ActivityFeed,
  'activityfeed': ActivityFeed,
  'BarChart': BarChart,
  'bar-chart': BarChart,
  'barchart': BarChart,
  'ChartWithTable': ChartWithTable,
  'chart-with-table': ChartWithTable,
  'chartwithtable': ChartWithTable,
  'CodeBlock': CodeBlock,
  'code-block': CodeBlock,
  'codeblock': CodeBlock,
  'DataTable': DataTable,
  'data-table': DataTable,
  'datatable': DataTable,
  'LineChart': LineChart,
  'line-chart': LineChart,
  'linechart': LineChart,
  'PieChart': PieChart,
  'pie-chart': PieChart,
  'piechart': PieChart,
  'StatCard': StatCard,
  'stat-card': StatCard,
  'statcard': StatCard,
  'StatusBadge': StatusBadge,
  'status-badge': StatusBadge,
  'statusbadge': StatusBadge,
  'Table': Table,
  'table': Table,
  'Alert': Alert,
  'alert': Alert,
  'EmptyState': EmptyState,
  'empty-state': EmptyState,
  'emptystate': EmptyState,
  'TippyTooltip': TippyTooltip,
  'tippy-tooltip': TippyTooltip,
  'tippytooltip': TippyTooltip,
  'Toast': Toast,
  'toast': Toast,
  'ToastProvider': ToastProvider,
  'toast-provider': ToastProvider,
  'toastprovider': ToastProvider,
  'ButtonGroup': ButtonGroup,
  'button-group': ButtonGroup,
  'buttongroup': ButtonGroup,
  'Checkbox': Checkbox,
  'checkbox': Checkbox,
  'ComboBox': ComboBox,
  'combo-box': ComboBox,
  'combobox': ComboBox,
  'DatePicker': DatePicker,
  'date-picker': DatePicker,
  'datepicker': DatePicker,
  'FileUpload': FileUpload,
  'file-upload': FileUpload,
  'fileupload': FileUpload,
  'FormTemplate': FormTemplate,
  'form-template': FormTemplate,
  'formtemplate': FormTemplate,
  'Input': Input,
  'input': Input,
  'Radio': Radio,
  'radio': Radio,
  'SearchInput': SearchInput,
  'search-input': SearchInput,
  'searchinput': SearchInput,
  'SegmentedControl': SegmentedControl,
  'segmented-control': SegmentedControl,
  'segmentedcontrol': SegmentedControl,
  'Textarea': Textarea,
  'textarea': Textarea,
  'ToggleSwitch': ToggleSwitch,
  'toggle-switch': ToggleSwitch,
  'toggleswitch': ToggleSwitch,
  'AccordionItem': AccordionItem,
  'accordion-item': AccordionItem,
  'accordionitem': AccordionItem,
  'Accordion': Accordion,
  'accordion': Accordion,
  'ActionBar': ActionBar,
  'action-bar': ActionBar,
  'actionbar': ActionBar,
  'Card': Card,
  'card': Card,
  'Drawer': Drawer,
  'drawer': Drawer,
  'ListItem': ListItem,
  'list-item': ListItem,
  'listitem': ListItem,
  'List': List,
  'list': List,
  'DefinitionTerm': DefinitionTerm,
  'definition-term': DefinitionTerm,
  'definitionterm': DefinitionTerm,
  'DefinitionDescription': DefinitionDescription,
  'definition-description': DefinitionDescription,
  'definitiondescription': DefinitionDescription,
  'DefinitionList': DefinitionList,
  'definition-list': DefinitionList,
  'definitionlist': DefinitionList,
  'Modal': Modal,
  'modal': Modal,
  'PageHeader': PageHeader,
  'page-header': PageHeader,
  'pageheader': PageHeader,
  'SectionHeader': SectionHeader,
  'section-header': SectionHeader,
  'sectionheader': SectionHeader,
  'Sidebar': Sidebar,
  'sidebar': Sidebar,
  'BreadcrumbItem': BreadcrumbItem,
  'breadcrumb-item': BreadcrumbItem,
  'breadcrumbitem': BreadcrumbItem,
  'Breadcrumbs': Breadcrumbs,
  'breadcrumbs': Breadcrumbs,
  'MenuDivider': MenuDivider,
  'menu-divider': MenuDivider,
  'menudivider': MenuDivider,
  'MenuItem': MenuItem,
  'menu-item': MenuItem,
  'menuitem': MenuItem,
  'Menu': Menu,
  'menu': Menu,
  'Pagination': Pagination,
  'pagination': Pagination,
  'Stepper': Stepper,
  'stepper': Stepper,
  'TabPanel': TabPanel,
  'tab-panel': TabPanel,
  'tabpanel': TabPanel,
  'Tabs': Tabs,
  'tabs': Tabs,
  'Avatar': Avatar,
  'avatar': Avatar,
  'Badge': Badge,
  'badge': Badge,
  'Button': Button,
  'button': Button,
  'Icon': Icon,
  'icon': Icon,
};
</file>

<file path="src/index.css">
/* 1. LOAD THE FONTS (Critical for Theming) */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lato:wght@400;700&family=Merriweather:wght@300;700&family=Roboto+Mono:wght@400;500&family=Courier+Prime&display=swap');

/* Import Tailwind base styles */
@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* Import styles for third-party libraries */
@import 'ag-grid-community/styles/ag-grid.css';
@import 'ag-grid-community/styles/ag-theme-quartz.css';
@import 'tippy.js/dist/tippy.css';

/*
==============================================
RAMME THEME V2.2 - CSS VARIABLE DEFINITIONS
==============================================
*/

:root {
  /* === LAYER 1: BRAND IDENTITY === */
  --app-font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --app-font-serif: Georgia, Cambria, 'Times New Roman', Times, serif;
  --app-font-mono: 'Menlo', 'Monaco', 'Courier New', monospace;

  /* === LAYER 2: COLOR SYSTEM === */
  --app-primary-color: 13 110 253; /* Blue-600 */
  --app-primary-foreground-color: 255 255 255;
  
  --app-secondary-color: 108 117 125; /* Gray-500 */
  --app-secondary-foreground-color: 255 255 255;
  
  --app-accent-color: 23 162 184; /* Cyan-600 */
  --app-accent-foreground-color: 255 255 255;
  
  --app-danger-color: 220 53 69;
  --app-danger-foreground-color: 255 255 255;

  /* Base UI Colors */
  --app-bg-color: 248 249 250;
  --app-card-bg-color: 255 255 255;
  --app-text-color: 33 37 41;
  --app-border-color: 222 226 230;

  /* Muted Surface */
  --app-muted-bg: 241 245 249; 
  --app-muted-text: 100 116 139; 

  /* === LAYER 3: SHAPE & BORDERS === */
  --app-border-radius-sm: 0.2rem;
  --app-border-radius-md: 0.375rem;
  --app-border-radius-lg: 0.5rem;
  --app-border-radius-full: 9999px;
  --app-border-width: 1px;

  /* === LAYER 4: FORM CONTROLS === */
  --app-input-bg-color: 255 255 255;
  --app-input-text-color: 33 37 41;
  --app-input-border-color: 206 212 218;
  --app-input-focus-ring-color: 13 110 253;
  --app-input-placeholder-color: 108 117 125;

  /* === LAYER 5: COMPONENT-SPECIFIC STYLES === */
  --app-table-header-bg: 248 249 250;
  --app-table-header-text: 73 80 87;
  --app-table-row-hover-bg: 233 236 239;
  --app-table-grid-line-color: 222 226 230;
  --app-chart-grid-color: 233 236 239;

  /* Notification Colors */
  --app-info-color: 59 130 246; 
  --app-info-foreground-color: 255 255 255;
  --app-success-color: 34 197 94; 
  --app-success-foreground-color: 255 255 255;
  --app-warning-color: 245 158 11; 
  --app-warning-foreground-color: 255 255 255;

  /* Chart Colors (Synced with Brand) */
  --app-chart-1: 13 110 253;  /* Primary (Blue) */
  --app-chart-2: 23 162 184;  /* Accent (Cyan) */
  --app-chart-3: 102 16 242;  /* Indigo */
  --app-chart-4: 255 193 7;   /* Amber */
  --app-chart-5: 220 53 69;   /* Red */
  
  /* The Palette String used by JS Charts */
  --app-chart-palette: 13 110 253, 23 162 184, 102 16 242, 255 193 7, 220 53 69;
}

/* --- Dark Theme --- */
.dark {
  color-scheme: dark; /* Helps browser native inputs */
  --app-primary-color: 110 168 254; /* Blue-300 */
  --app-primary-foreground-color: 5 20 40;
  --app-secondary-color: 173 181 189;
  --app-secondary-foreground-color: 5 20 40;
  --app-accent-color: 77 189 207;
  --app-accent-foreground-color: 5 20 40;
  
  --app-text-color: 233 236 239;
  --app-bg-color: 11 17 23;
  --app-card-bg-color: 26 35 46;
  --app-border-color: 73 80 87;

  --app-muted-bg: 30 41 59; 
  --app-muted-text: 148 163 184;
  
  --app-input-bg-color: 33 37 41;
  --app-input-text-color: 233 236 239;
  --app-input-border-color: 73 80 87;
  --app-input-focus-ring-color: 110 168 254;
  --app-input-placeholder-color: 173 181 189;

  --app-table-header-bg: 33 37 41;
  --app-table-header-text: 206 212 218;
  --app-table-row-hover-bg: 52 58 64;
  --app-table-grid-line-color: 73 80 87;
  --app-chart-grid-color: 52 58 64;

  --app-info-color: 59 130 246; 
  --app-info-foreground-color: 255 255 255;
  --app-success-color: 34 197 94; 
  --app-success-foreground-color: 255 255 255;
  --app-warning-color: 245 158 11; 
  --app-warning-foreground-color: 255 255 255;

  /* Chart Colors (Lighter for Dark Mode) */
  --app-chart-1: 110 168 254; /* Primary (Light Blue) */
  --app-chart-2: 77 189 207;  /* Accent (Cyan) */
  --app-chart-3: 167 139 250; /* Violet */
  --app-chart-4: 252 211 77;  /* Amber */
  --app-chart-5: 252 165 165; /* Rose */

  --app-chart-palette: 110 168 254, 77 189 207, 167 139 250, 252 211 77, 252 165 165;
}

/* --- Corporate Theme (Green/Professional) --- */
.corporate {
  --app-primary-color: 16 185 129; /* Emerald-500 */
  --app-primary-foreground-color: 255 255 255;
  --app-secondary-color: 245 158 11; /* Amber-500 */
  --app-secondary-foreground-color: 255 255 255;
  --app-accent-color: 59 130 246; /* Blue-500 */
  --app-accent-foreground-color: 255 255 255;
  
  --app-text-color: 55 65 81;
  --app-bg-color: 249 250 251;
  --app-card-bg-color: 255 255 255;
  --app-border-color: 209 213 219;

  --app-muted-bg: 243 244 246;
  --app-muted-text: 107 114 128;

  --app-border-radius-md: 0.25rem;

  --app-input-bg-color: 255 255 255;
  --app-input-text-color: 55 65 81;
  --app-input-border-color: 209 213 219;
  --app-input-focus-ring-color: 16 185 129; /* Green Ring */
  --app-input-placeholder-color: 156 163 175;

  --app-table-header-bg: 243 244 246;
  --app-table-header-text: 75 85 99;
  --app-table-row-hover-bg: 229 231 235;
  --app-table-grid-line-color: 209 213 219;
  --app-chart-grid-color: 229 231 235;

  --app-info-color: 59 130 246;
  --app-info-foreground-color: 255 255 255;
  --app-success-color: 34 197 94;
  --app-success-foreground-color: 255 255 255;
  --app-warning-color: 245 158 11;
  --app-warning-foreground-color: 255 255 255;

  /* Chart Colors (Earth Tones) */
  --app-chart-1: 16 185 129; /* Emerald */
  --app-chart-2: 245 158 11; /* Amber */
  --app-chart-3: 59 130 246; /* Blue */
  --app-chart-4: 107 114 128; /* Gray */
  --app-chart-5: 239 68 68;  /* Red */

  --app-chart-palette: 16 185 129, 245 158 11, 59 130 246, 107 114 128, 239 68 68;
}

/* --- Midnight Theme (Deep Purple/Indigo) --- */
.midnight {
  color-scheme: dark;
  --app-primary-color: 129 140 248; /* Indigo-400 */
  --app-primary-foreground-color: 30 41 59;
  --app-secondary-color: 192 132 252; /* Purple-400 */
  --app-secondary-foreground-color: 30 41 59;
  --app-accent-color: 99 102 241; /* Indigo-500 */
  --app-accent-foreground-color: 255 255 255;
  
  --app-text-color: 226 232 240;
  --app-bg-color: 15 23 42;
  --app-card-bg-color: 30 41 59;
  --app-border-color: 71 85 105;

  --app-muted-bg: 30 41 59; 
  --app-muted-text: 148 163 184;

  --app-border-radius-md: 0.5rem;

  --app-input-bg-color: 51 65 85;
  --app-input-text-color: 226 232 240;
  --app-input-border-color: 71 85 105;
  --app-input-focus-ring-color: 129 140 248;
  --app-input-placeholder-color: 148 163 184;

  --app-table-header-bg: 51 65 85;
  --app-table-header-text: 203 213 225;
  --app-table-row-hover-bg: 71 85 105;
  --app-table-grid-line-color: 71 85 105;
  --app-chart-grid-color: 51 65 85;

  --app-info-color: 59 130 246;
  --app-info-foreground-color: 255 255 255;
  --app-success-color: 34 197 94;
  --app-success-foreground-color: 255 255 255;
  --app-warning-color: 245 158 11;
  --app-warning-foreground-color: 255 255 255;

  /* Chart Colors (Neon/Cyber) */
  --app-chart-1: 129 140 248; /* Indigo */
  --app-chart-2: 192 132 252; /* Purple */
  --app-chart-3: 45 212 191;  /* Teal */
  --app-chart-4: 251 113 133; /* Rose */
  --app-chart-5: 250 204 21;  /* Yellow */

  --app-chart-palette: 129 140 248, 192 132 252, 45 212 191, 251 113 133, 250 204 21;
}

/* --- Blueprint Theme (Technical Blue) --- */
.blueprint {
  --app-primary-color: 0 123 255; /* Tech Blue */
  --app-primary-foreground-color: 255 255 255;
  --app-secondary-color: 108 117 125;
  --app-secondary-foreground-color: 255 255 255;
  --app-accent-color: 23 162 184;
  --app-accent-foreground-color: 255 255 255;
  
  --app-text-color: 51 51 51;
  --app-bg-color: 255 255 255;
  --app-card-bg-color: 255 255 255;
  --app-border-color: 0 123 255;

  --app-muted-bg: 230 230 230;
  --app-muted-text: 100 100 100;

  --app-border-radius-md: 0rem;
  --app-border-width: 2px;

  --app-input-bg-color: 255 255 255;
  --app-input-text-color: 51 51 51;
  --app-input-border-color: 0 123 255;
  --app-input-focus-ring-color: 0 123 255;
  --app-input-placeholder-color: 108 117 125;
  
  --app-table-header-bg: 248 249 250;
  --app-table-header-text: 73 80 87;
  --app-table-row-hover-bg: 230 230 230;
  --app-table-grid-line-color: 0 123 255;
  --app-chart-grid-color: 230 242 255;

  --app-info-color: 59 130 246;
  --app-info-foreground-color: 255 255 255;
  --app-success-color: 34 197 94;
  --app-success-foreground-color: 255 255 255;
  --app-warning-color: 245 158 11;
  --app-warning-foreground-color: 255 255 255;

  /* Chart Colors (Blue Monochromatic) */
  --app-chart-1: 0 123 255;   /* Primary Blue */
  --app-chart-2: 23 162 184;  /* Cyan */
  --app-chart-3: 108 117 125; /* Gray */
  --app-chart-4: 253 126 20;  /* Orange (Warning) */
  --app-chart-5: 220 53 69;   /* Red (Error) */

  --app-chart-palette: 0 123 255, 23 162 184, 108 117 125, 253 126 20, 220 53 69;
}

/* === AG GRID THEME OVERRIDES ===
   These are placed LAST to ensure they override the default Quartz styles.
   We target the class directly to ensure it picks up the CSS variables
   from whatever scope it resides in.

   We use !important on the variables to ensure they override the 
   defaults set by the ag-theme-quartz class itself.
*/
.ag-theme-quartz {
  --ag-font-family: var(--app-font-sans) !important;
  --ag-background-color: rgb(var(--app-card-bg-color)) !important;
  --ag-foreground-color: rgb(var(--app-text-color)) !important;
  --ag-border-color: transparent !important;
  
  /* Grid Lines */
  --ag-secondary-border-color: rgb(var(--app-table-grid-line-color)) !important;
  --ag-row-border-color: rgb(var(--app-table-grid-line-color)) !important;
  
  /* Headers */
  --ag-header-background-color: rgb(var(--app-table-header-bg)) !important;
  --ag-header-foreground-color: rgb(var(--app-table-header-text)) !important;
  
  /* Rows */
  --ag-odd-row-background-color: rgb(var(--app-card-bg-color)) !important;
  --ag-row-hover-color: rgb(var(--app-table-row-hover-bg)) !important;
  
  /* Selection */
  --ag-selected-row-background-color: rgb(var(--app-primary-color)) !important;
  --ag-selected-row-foreground-color: rgb(var(--app-primary-foreground-color)) !important;
  --ag-range-selection-background-color: rgba(var(--app-primary-color), 0.2) !important;
  
  /* Inputs */
  --ag-input-focus-border-color: rgb(var(--app-primary-color)) !important;
}

/* --- Custom Tippy.js Theme --- */
.tippy-box[data-theme~='ramme'] {
  background-color: rgb(var(--app-secondary-color));
  color: rgb(var(--app-secondary-foreground-color));
  border-radius: var(--app-border-radius-md);
  font-size: 0.875rem;
  line-height: 1.25rem;
  filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.15));
}
.tippy-box[data-theme~='ramme'][data-placement^='top'] > .tippy-arrow::before { border-top-color: rgb(var(--app-secondary-color)); }
.tippy-box[data-theme~='ramme'][data-placement^='bottom'] > .tippy-arrow::before { border-bottom-color: rgb(var(--app-secondary-color)); }
.tippy-box[data-theme~='ramme'][data-placement^='left'] > .tippy-arrow::before { border-left-color: rgb(var(--app-secondary-color)); }
.tippy-box[data-theme~='ramme'][data-placement^='right'] > .tippy-arrow::before { border-right-color: rgb(var(--app-secondary-color)); }
.tippy-content { padding: 0.5rem 0.75rem; }
</file>

<file path="tailwind.preset.js">
/** @type {import('tailwindcss').Config} */
module.exports = {
  theme: {
    extend: {
      colors: {
        border: 'rgb(var(--app-border-color) / <alpha-value>)',
        input: 'rgb(var(--app-input-border-color) / <alpha-value>)',
        ring: 'rgb(var(--app-input-focus-ring-color) / <alpha-value>)',
        background: 'rgb(var(--app-bg-color) / <alpha-value>)',
        foreground: 'rgb(var(--app-text-color) / <alpha-value>)',
        primary: {
          DEFAULT: 'rgb(var(--app-primary-color) / <alpha-value>)',
          foreground: 'rgb(var(--app-primary-foreground-color) / <alpha-value>)',
        },
        secondary: {
          DEFAULT: 'rgb(var(--app-secondary-color) / <alpha-value>)',
          foreground: 'rgb(var(--app-secondary-foreground-color) / <alpha-value>)',
        },
        destructive: {
          DEFAULT: 'rgb(var(--app-danger-color) / <alpha-value>)',
          foreground: 'rgb(var(--app-danger-foreground-color) / <alpha-value>)',
        },
        muted: {
          DEFAULT: 'rgb(var(--app-card-bg-color) / <alpha-value>)',
          foreground: 'rgb(var(--app-text-color) / <alpha-value>)',
        },
        accent: {
          DEFAULT: 'rgb(var(--app-accent-color) / <alpha-value>)',
          foreground: 'rgb(var(--app-accent-foreground-color) / <alpha-value>)',
        },
        card: {
          DEFAULT: 'rgb(var(--app-card-bg-color) / <alpha-value>)',
          foreground: 'rgb(var(--app-text-color) / <alpha-value>)',
        },
        // ADDED: Notification Colors
        info: {
          DEFAULT: 'rgb(var(--app-info-color) / <alpha-value>)',
          foreground: 'rgb(var(--app-info-foreground-color) / <alpha-value>)',
        },
        success: {
          DEFAULT: 'rgb(var(--app-success-color) / <alpha-value>)',
          foreground: 'rgb(var(--app-success-foreground-color) / <alpha-value>)',
        },
        warning: {
          DEFAULT: 'rgb(var(--app-warning-color) / <alpha-value>)',
          foreground: 'rgb(var(--app-warning-foreground-color) / <alpha-value>)',
        },
        error: {
          DEFAULT: 'rgb(var(--app-danger-color) / <alpha-value>)', // Re-using danger for error
          foreground: 'rgb(var(--app-danger-foreground-color) / <alpha-value>)',
        },
        // ADDED: Chart Colors
        chart: {
          1: 'rgb(var(--app-chart-1) / <alpha-value>)',
          2: 'rgb(var(--app-chart-2) / <alpha-value>)',
          3: 'rgb(var(--app-chart-3) / <alpha-value>)',
          4: 'rgb(var(--app-chart-4) / <alpha-value>)',
          5: 'rgb(var(--app-chart-5) / <alpha-value>)',
        },
      },
      borderColor: {
        DEFAULT: 'rgb(var(--app-border-color) / <alpha-value>)',
      },
      borderRadius: {
        lg: `var(--app-border-radius-lg)`,
        md: `var(--app-border-radius-md)`,
        sm: `var(--app-border-radius-sm)`,
      },
      fontFamily: {
        sans: ['var(--app-font-sans)'],
        serif: ['var(--app-font-serif)'],
      },
      fontSize: {
        xs: ['calc(var(--app-font-size-base) * 0.75)', { lineHeight: '1rem' }],
        sm: ['calc(var(--app-font-size-base) * 0.875)', { lineHeight: '1.25rem' }],
        base: ['var(--app-font-size-base)', { lineHeight: '1.5rem' }],
        lg: ['calc(var(--app-font-size-base) * 1.125)', { lineHeight: '1.75rem' }],
        xl: ['calc(var(--app-font-size-base) * 1.25)', { lineHeight: '1.75rem' }],
      },
    },
  },
  plugins: [],
};
</file>

<file path="scripts/generate-manifest.js">
const fs = require('fs');
const path = require('path');
const crypto = require('crypto');
const doctrine = require('doctrine');

// --- CONFIGURATION ---
const SRC_DIR = path.resolve(__dirname, '../src');
const HISTORY_FILE = path.resolve(__dirname, '../src/component-history.json');
const OUTPUT_FILE = path.resolve(__dirname, '../wizardManifest.ts');
const TEMP_FILE = path.resolve(__dirname, 'manifest.temp.json');

// --- 1. LOAD HISTORY ---
let componentHistory = {};
if (fs.existsSync(HISTORY_FILE)) {
  try {
    componentHistory = JSON.parse(fs.readFileSync(HISTORY_FILE, 'utf-8'));
  } catch (e) {
    console.warn('‚ö†Ô∏è Could not parse component history. Starting fresh.');
  }
}

// Category Mapping
const CATEGORY_MAP = {
  component: 'components',
  components: 'components',
  ui: 'components',
  input: 'components',
  form: 'components',
  feedback: 'components',
  navigation: 'components',
  'data-display': 'components',
  layout: 'layouts',
  layouts: 'layouts',
  iot: 'components', 
  ai: 'components',
  blocks: 'components',
  util: 'utils',
  utils: 'utils',
  hook: 'hooks',
  hooks: 'hooks',
  data: 'data'
};

// --- HELPER FUNCTIONS ---
const getSourceFiles = (dir) => {
  let files = [];
  const items = fs.readdirSync(dir, { withFileTypes: true });
  for (const item of items) {
    const fullPath = path.join(dir, item.name);
    if (item.isDirectory()) {
      files = [...files, ...getSourceFiles(fullPath)];
    } else if (item.name.endsWith('.tsx') || item.name.endsWith('.ts')) {
      if (!item.name.endsWith('.test.tsx') && !item.name.endsWith('.stories.tsx')) {
        files.push(fullPath);
      }
    }
  }
  return files;
};

const generateFingerprint = (entry) => {
  const data = JSON.stringify({
    description: entry.description,
    props: entry.props,
    tags: entry.tags,
    category: entry.category
  });
  return crypto.createHash('md5').update(data).digest('hex');
};

const bumpVersion = (oldVersion) => {
  const parts = oldVersion.split('.').map(Number);
  parts[2] += 1; 
  return parts.join('.');
};

const parseJsDoc = (content, filePath) => {
  const docRegex = /\/\*\*([\s\S]*?)\*\//g;
  const entries = [];
  let match;

  while ((match = docRegex.exec(content)) !== null) {
    const jsdoc = `/**${match[1]}*/`;
    const ast = doctrine.parse(jsdoc, { unwrap: true, sloppy: true });
    
    const isWizard = ast.tags.some(tag => tag.title === 'wizard');
    if (!isWizard) continue;

    const entry = {
      id: '',
      name: '',
      version: '1.0.0',
      description: ast.description || '',
      tags: [],
      category: '',
      props: [],
      importPath: '' 
    };

    for (const tag of ast.tags) {
      const desc = tag.description || ''; 
      switch (tag.title) {
        case 'name':
          entry.name = tag.name || desc;
          entry.id = entry.name
            .replace(/([a-z])([A-Z])/g, '$1-$2')
            .replace(/[\s_]+/g, '-')
            .toLowerCase();
          break;
        case 'description':
          entry.description = desc;
          break;
        case 'tags':
          entry.tags = desc.split(',').map(t => t.trim()).filter(Boolean);
          break;
        case 'category':
          entry.category = desc.toLowerCase().trim();
          break;
        case 'props':
          if (!desc) break;
          entry.props = desc.split(/(?:\r?\n|^)- /).map(propStr => {
              if (!propStr.trim()) return null;
              const propLines = propStr.trim().split(/\r?\n/);
              const prop = {};
              propLines.forEach(line => {
                const separatorIndex = line.indexOf(':');
                if (separatorIndex === -1) return;
                const key = line.slice(0, separatorIndex).trim();
                const value = line.slice(separatorIndex + 1).trim();
                if (key && value) {
                  prop[key.replace(/^- /, '')] = value;
                }
              });
              return prop;
            }).filter(Boolean);
          break;
      }
    }

    if (entry.name) {
      const parsedPath = path.parse(filePath);
      entry.importPath = './' + path.join(parsedPath.dir, parsedPath.name).replace(/\\/g, '/').replace(/^src\//, '');

      const fingerprint = generateFingerprint(entry);
      const history = componentHistory[entry.id];

      if (history) {
        if (history.fingerprint === fingerprint) {
          entry.version = history.version;
        } else {
          console.log(`üÜô Updated: ${entry.name} (v${bumpVersion(history.version)})`);
          entry.version = bumpVersion(history.version);
        }
      } else {
        console.log(`‚ú® New: ${entry.name} (v1.0.0)`);
      }

      componentHistory[entry.id] = {
        version: entry.version,
        fingerprint: fingerprint,
        lastUpdated: new Date().toISOString()
      };

      entries.push(entry);
    }
  }
  return entries;
};

// --- MAIN EXECUTION ---
const buildManifest = () => {
  console.log('üöÄ Starting Manifest Generation...');
  
  const manifest = {
    components: [],
    layouts: [],
    utils: [],
    hooks: [],
    data: [],
  };

  const registryList = [];
  const seenRegistryIds = new Set(); // ‚úÖ FIX: Track seen IDs to prevent duplicates

  const files = getSourceFiles(SRC_DIR);
  let totalEntries = 0;

  for (const file of files) {
    const content = fs.readFileSync(file, 'utf-8');
    const filePath = path.relative(path.join(__dirname, '..'), file).replace(/\\\\/g, '/');
    const entries = parseJsDoc(content, filePath);

    for (const entry of entries) {
      entry.filePath = filePath;
      totalEntries++;
      
      const rawCat = entry.category ? entry.category : 'component';
      const manifestKey = CATEGORY_MAP[rawCat] || 'components';

      if (manifest[manifestKey]) {
        manifest[manifestKey].push(entry);
      } else {
        manifest.components.push(entry);
      }

      // --- FILTER FOR REGISTRY ---
      const isRenderableCategory = ['components', 'layouts', 'iot', 'ai', 'blocks'].includes(manifestKey);
      
      // ‚úÖ FIX: Strict filtering for hooks and mock data
      const isNotHook = !entry.name.startsWith('use');
      const isNotMock = !entry.name.startsWith('mock');

      if (isRenderableCategory && isNotHook && isNotMock) {
        // ‚úÖ FIX: Deduplicate based on ID
        if (!seenRegistryIds.has(entry.id)) {
          seenRegistryIds.add(entry.id);
          registryList.push({
            name: entry.name,
            id: entry.id,
            path: entry.importPath
          });
        } else {
          // Silent skip for duplicates to keep logs clean
        }
      }
    }
  }

  // 1. Write History
  fs.writeFileSync(HISTORY_FILE, JSON.stringify(componentHistory, null, 2));

  // 2. Write Manifest
  const manifestContent = `
// This file is auto-generated by scripts/generate-manifest.js
// Do not modify this file directly.
import type { WizardManifest } from './src/lib/types/wizard';

export const wizardManifest: WizardManifest = ${JSON.stringify(manifest, null, 2)} as const;
`;
  fs.writeFileSync(OUTPUT_FILE, manifestContent.trim());

  // 3. Write Registry Baton
  fs.writeFileSync(TEMP_FILE, JSON.stringify(registryList, null, 2));

  console.log(`\n‚ú® Generated manifest with ${totalEntries} entries!`);
  console.log(`üì¶ Handoff file written to ${TEMP_FILE}`);
};

try {
  require('doctrine');
  buildManifest();
} catch (e) {
  console.error('Doctrine not found. Please run: pnpm add -D doctrine @types/doctrine');
  process.exit(1);
}
</file>

<file path="src/blocks/ai/Loader.tsx">
import React from 'react';
import { cn } from '../../utils/cn';
import { Icon } from '../../components/ui/Icon';

export interface LoaderProps {
  /** The visual style of the loader. */
  variant?: 'bubble' | 'sparkle' | 'bar';
  /** Optional text to display next to the animation (e.g., "Thinking...") */
  label?: string;
  className?: string;
}

/**
 * @wizard
 * @name Loader
 * @description A compact, theme-aware animation for indicating AI processing states. Optimized for chat interfaces.
 * @tags ui, ai, feedback, loading, chat
 * @props
 * - name: variant
 * type: "'bubble' | 'sparkle' | 'bar'"
 * description: The visual style. 'bubble' is standard for chat. 'sparkle' is for creative generation.
 * default: 'bubble'
 * - name: label
 * type: string
 * description: Optional text displayed next to the animation.
 * - name: className
 * type: string
 * description: Custom classes for the container.
 * @category ai
 * @id loader
 */
export const Loader: React.FC<LoaderProps> = ({ 
  variant = 'bubble', 
  label, 
  className 
}) => {
  
  // --- VARIANT 1: The "Typing Bubble" (Standard Chat) ---
  if (variant === 'bubble') {
    return (
      <div className={cn("flex items-center gap-3 h-8 animate-in fade-in zoom-in-95 duration-200", className)}>
        <div className="flex items-center gap-1 px-3 py-2 bg-muted rounded-full rounded-tl-none">
          <div className="w-1.5 h-1.5 bg-foreground/40 rounded-full animate-bounce [animation-delay:-0.3s]" />
          <div className="w-1.5 h-1.5 bg-foreground/40 rounded-full animate-bounce [animation-delay:-0.15s]" />
          <div className="w-1.5 h-1.5 bg-foreground/40 rounded-full animate-bounce" />
        </div>
        {label && (
          <span className="text-xs font-medium text-muted-foreground animate-pulse">
            {label}
          </span>
        )}
      </div>
    );
  }

  // --- VARIANT 2: The "Magic Sparkle" (Creative/Generative) ---
  if (variant === 'sparkle') {
    return (
      <div className={cn("flex items-center gap-2 h-8 animate-in fade-in duration-300", className)}>
        <div className="relative flex items-center justify-center w-6 h-6">
          <div className="absolute inset-0 bg-primary/20 rounded-full animate-ping opacity-75 duration-1000" />
          <Icon name="sparkles" className="w-4 h-4 text-primary relative z-10 animate-pulse" />
        </div>
        <span className={cn(
          "text-xs font-medium bg-clip-text text-transparent bg-gradient-to-r from-primary to-accent animate-pulse", 
          !label && "hidden"
        )}>
          {label || "Generating..."}
        </span>
      </div>
    );
  }

  // --- VARIANT 3: The "Pulse Bar" (Inline/Subtle) ---
  return (
    <div className={cn("flex items-center gap-2 h-6 animate-in fade-in duration-200", className)}>
      <div className="flex items-center gap-0.5 h-full">
        <div className="w-1 h-3 bg-primary/50 rounded-full animate-[pulse_1s_ease-in-out_infinite]" />
        <div className="w-1 h-4 bg-primary rounded-full animate-[pulse_1s_ease-in-out_0.2s_infinite]" />
        <div className="w-1 h-3 bg-primary/50 rounded-full animate-[pulse_1s_ease-in-out_0.4s_infinite]" />
      </div>
      {label && <span className="text-xs text-muted-foreground">{label}</span>}
    </div>
  );
};
</file>

<file path="src/components/forms/DatePicker.tsx">
import React from 'react';
import ReactDatePicker from 'react-datepicker';
import { cn } from '../../utils/cn';
import { Icon } from '../ui/Icon';
import 'react-datepicker/dist/react-datepicker.css';

// We inject a global style override to force the library to respect our tokens
const GLOBAL_STYLE_OVERRIDE = `
  .react-datepicker {
    font-family: inherit !important;
    background-color: rgb(var(--app-card-bg-color)) !important;
    border: 1px solid rgb(var(--app-border-color)) !important;
    border-radius: var(--app-border-radius-md) !important;
    color: rgb(var(--app-text-color)) !important;
  }
  .react-datepicker__header {
    background-color: rgb(var(--app-bg-color)) !important;
    border-bottom: 1px solid rgb(var(--app-border-color)) !important;
  }
  .react-datepicker__current-month, .react-datepicker__day-name, .react-datepicker__day {
    color: rgb(var(--app-text-color)) !important;
  }
  .react-datepicker__day:hover {
    background-color: rgb(var(--app-primary-color) / 0.1) !important;
  }
  .react-datepicker__day--selected, .react-datepicker__day--keyboard-selected {
    background-color: rgb(var(--app-primary-color)) !important;
    color: rgb(var(--app-primary-foreground-color)) !important;
  }
  .react-datepicker__navigation-icon::before {
    border-color: rgb(var(--app-text-color)) !important;
  }
`;

export interface DatePickerProps {
  label?: string;
  selected: Date | null;
  onChange: (date: Date | null) => void;
  className?: string;
  placeholderText?: string;
  dateFormat?: string;
  minDate?: Date;
  maxDate?: Date;
  error?: boolean;
  helperText?: string;
  showTimeSelect?: boolean;
  isClearable?: boolean;
}

/**
 * @wizard
 * @name DatePicker
 * @description A theme-aware calendar input for selecting dates. Wraps react-datepicker to ensure consistent styling and "Zero Jank" layout stability.
 * @tags form, input, date, calendar, ui
 * @category form
 * @id date-picker
 */
export const DatePicker: React.FC<DatePickerProps> = ({
  label,
  selected,
  onChange,
  className,
  error,
  helperText,
  ...props
}) => {
  return (
    <div className={cn("w-full flex flex-col", className)}>
      <style>{GLOBAL_STYLE_OVERRIDE}</style>
      
      {label && (
        <label className="block text-sm font-medium text-foreground mb-1.5">
          {label}
        </label>
      )}
      
      <div className="relative">
        <ReactDatePicker
          selected={selected}
          onChange={onChange}
          className={cn(
            "flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
            error ? "border-destructive" : "border-input"
          )}
          wrapperClassName="w-full" // Forces the input to take full width
          showPopperArrow={false}
          {...props}
        />
        <div className="absolute right-3 top-2.5 pointer-events-none text-muted-foreground">
          <Icon name="calendar" className="h-4 w-4" />
        </div>
      </div>

      {helperText && (
        <p className={cn("mt-1.5 text-xs", error ? "text-destructive" : "text-muted-foreground")}>
          {helperText}
        </p>
      )}
    </div>
  );
};
</file>

<file path="src/components/forms/FileUpload.tsx">
import React, { useState, useCallback, useRef } from 'react';
import { Button } from '../ui/Button';
import { Icon } from '../ui/Icon';
import { cn } from '../../utils/cn';

interface FileUploadProps {
  onFileUpload: (files: File[]) => void;
  multiple?: boolean;
  acceptedFileTypes?: string;
  label?: string;
  className?: string;
  helperText?: string;
}

/**
 * @wizard
 * @name FileUpload
 * @description A modern drag-and-drop file upload area with visual feedback and file listing.
 * @tags form, input, upload, files, ui
 * @category form
 * @id file-upload
 */
export const FileUpload: React.FC<FileUploadProps> = ({
  onFileUpload,
  multiple = false,
  acceptedFileTypes,
  label,
  className,
  helperText
}) => {
  const [dragActive, setDragActive] = useState(false);
  const [uploadedFiles, setUploadedFiles] = useState<File[]>([]);
  const inputRef = useRef<HTMLInputElement>(null);

  const handleDrag = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();
    if (e.type === 'dragenter' || e.type === 'dragover') {
      setDragActive(true);
    } else if (e.type === 'dragleave') {
      setDragActive(false);
    }
  }, []);

  const handleFiles = (files: File[]) => {
    setUploadedFiles(prev => multiple ? [...prev, ...files] : [files[0]]);
    onFileUpload(files);
  };

  const handleDrop = useCallback((e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();
    setDragActive(false);
    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {
      handleFiles(Array.from(e.dataTransfer.files));
    }
  }, [multiple]);

  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {
    e.preventDefault();
    if (e.target.files && e.target.files.length > 0) {
      handleFiles(Array.from(e.target.files));
    }
  }, [multiple]);

  const removeFile = (indexToRemove: number) => {
    setUploadedFiles(prev => prev.filter((_, index) => index !== indexToRemove));
  };

  return (
    <div className={cn("w-full", className)}>
      {label && (
        <label className="block text-sm font-medium text-foreground mb-1.5">
          {label}
        </label>
      )}
      
      <div
        className={cn(
          "relative flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-lg transition-colors duration-200 ease-in-out cursor-pointer",
          dragActive 
            ? "border-primary bg-primary/5" 
            : "border-border bg-card hover:bg-muted/50",
          "min-h-[150px]"
        )}
        onDragEnter={handleDrag}
        onDragLeave={handleDrag}
        onDragOver={handleDrag}
        onDrop={handleDrop}
        onClick={() => inputRef.current?.click()}
      >
        <input
          ref={inputRef}
          type="file"
          className="hidden"
          multiple={multiple}
          accept={acceptedFileTypes}
          onChange={handleChange}
        />
        
        <div className="bg-muted p-3 rounded-full mb-3">
          <Icon name="upload-cloud" className="h-6 w-6 text-muted-foreground" />
        </div>
        
        <p className="text-sm font-medium text-foreground text-center">
          <span className="text-primary font-semibold hover:underline">Click to upload</span> or drag and drop
        </p>
        
        <p className="text-xs text-muted-foreground mt-1">
          {acceptedFileTypes ? acceptedFileTypes.replace(/,/g, ', ') : 'Any file type'} 
          {multiple ? '' : ' (Single file)'}
        </p>
      </div>

      {/* File List Preview */}
      {uploadedFiles.length > 0 && (
        <div className="mt-4 space-y-2">
          {uploadedFiles.map((file, idx) => (
            <div key={`${file.name}-${idx}`} className="flex items-center justify-between p-2 rounded-md border border-border bg-card">
              <div className="flex items-center gap-3 overflow-hidden">
                <div className="bg-primary/10 p-2 rounded text-primary">
                  <Icon name="file" className="h-4 w-4" />
                </div>
                <div className="min-w-0">
                  <p className="text-sm font-medium text-foreground truncate">{file.name}</p>
                  <p className="text-xs text-muted-foreground">{(file.size / 1024).toFixed(1)} KB</p>
                </div>
              </div>
              <Button 
                variant="ghost" 
                size="icon" 
                className="h-8 w-8 text-muted-foreground hover:text-destructive"
                onClick={(e) => { e.stopPropagation(); removeFile(idx); }}
              >
                <Icon name="x" className="h-4 w-4" />
              </Button>
            </div>
          ))}
        </div>
      )}

      {helperText && (
        <p className="mt-1.5 text-xs text-muted-foreground">
          {helperText}
        </p>
      )}
    </div>
  );
};
</file>

<file path="src/components/forms/FormTemplate.tsx">
import React, { useState, useCallback } from 'react';

import { Input } from '../forms/Input';
import { Select, type SelectOption } from '../forms/Select';
import { Checkbox } from '../forms/Checkbox';
import { Radio } from '../forms/Radio';
import { Textarea } from '../forms/Textarea';
import { ToggleSwitch } from '../forms/ToggleSwitch';
import { ComboBox } from '../forms/ComboBox';
import { MultiSelect, type MultiSelectOption } from '../forms/MultiSelect';
import { DatePicker } from '../forms/DatePicker';
import { FileUpload } from '../forms/FileUpload';
import { SegmentedControl, type SegmentedControlOption } from '../forms/SegmentedControl';

// --- TYPE DEFINITIONS ---

interface FormFieldBase {
  name: string;
  label: string;
  className?: string;
  disabled?: boolean;
  colSpan?: number;
  helperText?: string;
  required?: boolean;
}

interface FormInput extends FormFieldBase {
  type: 'text' | 'email' | 'password' | 'number';
  placeholder?: string;
  value?: string | number;
}
interface FormTextarea extends FormFieldBase {
  type: 'textarea';
  placeholder?: string;
  value?: string;
  rows?: number;
}
interface FormSelect extends FormFieldBase {
  type: 'select';
  options: SelectOption[];
  value?: string | number;
}
interface FormCheckbox extends FormFieldBase {
  type: 'checkbox';
  checked?: boolean;
}
interface FormToggle extends FormFieldBase {
  type: 'toggle';
  checked?: boolean;
}
interface FormRadio extends FormFieldBase {
  type: 'radio';
  value: string | number;
  checked?: boolean;
  radioGroup: string;
}
interface FormComboBox extends FormFieldBase {
  type: 'combobox';
  options: SelectOption[];
  value?: string | number | null;
  placeholder?: string;
}
interface FormMultiSelect extends FormFieldBase {
  type: 'multiselect';
  options: MultiSelectOption[];
  value?: MultiSelectOption[] | null;
  placeholder?: string;
}
interface FormDatePicker extends FormFieldBase {
  type: 'datepicker';
  value?: Date | null;
  placeholder?: string;
}
// NEW: File Upload
interface FormFileUpload extends FormFieldBase {
  type: 'file';
  multiple?: boolean;
  acceptedFileTypes?: string;
}
// NEW: Segmented Control
interface FormSegmentedControl extends FormFieldBase {
  type: 'segment';
  options: SegmentedControlOption[];
  value?: string | number;
}

export type FormField =
  | FormInput
  | FormTextarea
  | FormSelect
  | FormCheckbox
  | FormToggle
  | FormRadio
  | FormComboBox
  | FormMultiSelect
  | FormDatePicker
  | FormFileUpload
  | FormSegmentedControl;

// --- COMPONENT PROPS ---

export interface FormTemplateProps {
  fields: FormField[];
  onSubmit: (formData: Record<string, any>) => void;
  className?: string;
  children?: React.ReactNode;
}

/**
 * @wizard
 * @name FormTemplate
 * @description A data-driven form builder that renders a grid of input fields from a configuration array. Now supports File Uploads and Segmented Controls.
 * @category form
 * @tags form, template, builder, input, layout
 * @props
 * - name: fields
 * type: FormField[]
 * description: An array of field definition objects.
 * - name: onSubmit
 * type: (formData: Record<string, any>) => void
 * description: Callback function triggered when the form is submitted.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for the form container.
 * @id form-template
 */

export const FormTemplate: React.FC<FormTemplateProps> = ({
  fields,
  onSubmit,
  className,
  children,
}) => {
  const [formData, setFormData] = useState<Record<string, any>>(() => {
    const initialState: Record<string, any> = {};
    fields.forEach(field => {
       if (field.type === 'checkbox' || field.type === 'toggle') {
        initialState[field.name] = field.checked || false;
      } else if (field.type === 'radio') {
        if (field.checked) {
          initialState[field.radioGroup] = field.value;
        }
      } else if (field.type === 'file') {
        initialState[field.name] = [];
      } else {
        initialState[field.name] = field.value || '';
      }
    });
    return initialState;
  });

  const handleFieldChange = useCallback((name: string, value: any) => {
    setFormData(prev => ({ ...prev, [name]: value }));
  }, []);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    onSubmit(formData);
  };

  const renderField = (field: FormField) => {
    const commonProps = { 
      id: field.name, 
      label: field.label, 
      className: field.className, 
      disabled: field.disabled,
      helperText: field.helperText,
      required: field.required
    };

    switch (field.type) {
      case 'text': case 'email': case 'password': case 'number':
        return <Input {...commonProps} name={field.name} type={field.type} placeholder={field.placeholder} value={formData[field.name]} onChange={(e) => handleFieldChange(field.name, e.target.value)} />;
      case 'textarea':
        return <Textarea {...commonProps} name={field.name} placeholder={field.placeholder} value={formData[field.name]} onChange={(e) => handleFieldChange(field.name, e.target.value)} rows={field.rows} />;
      case 'select':
        // Updated to use the new React-Select wrapper which expects `onChange` to receive an object
        const selectedOption = field.options.find(opt => opt.value === formData[field.name]);
        return <Select {...commonProps} options={field.options} value={selectedOption} onChange={(opt) => handleFieldChange(field.name, opt?.value)} />;
      case 'checkbox':
        return <Checkbox {...commonProps} name={field.name} checked={formData[field.name]} onChange={(e) => handleFieldChange(field.name, e.target.checked)} />;
      case 'toggle':
        return <ToggleSwitch {...commonProps} checked={formData[field.name]} onChange={(checked) => handleFieldChange(field.name, checked)} />;
      case 'radio':
        return <Radio {...commonProps} name={field.radioGroup} value={field.value} checked={formData[field.radioGroup] === field.value} onChange={(e) => handleFieldChange(field.radioGroup, e.target.value)} />;
      case 'combobox':
        return <ComboBox {...commonProps} options={field.options} value={formData[field.name]} onOptionSelect={(value) => handleFieldChange(field.name, value)} placeholder={field.placeholder} />;
      case 'multiselect':
        return <MultiSelect {...commonProps} options={field.options} value={formData[field.name]} onChange={(value) => handleFieldChange(field.name, value)} placeholder={field.placeholder} />;
      case 'datepicker':
        return <DatePicker {...commonProps} selected={formData[field.name]} onChange={(date) => handleFieldChange(field.name, date)} placeholderText={field.placeholder} />;
      // --- NEW TYPES ---
      case 'file':
        return <FileUpload {...commonProps} multiple={field.multiple} acceptedFileTypes={field.acceptedFileTypes} onFileUpload={(files) => handleFieldChange(field.name, files)} />;
      case 'segment':
        return (
          <div className="space-y-1.5">
             <label className="block text-sm font-medium text-foreground">{field.label}</label>
             <SegmentedControl {...commonProps} options={field.options} value={formData[field.name]} onChange={(val) => handleFieldChange(field.name, val)} />
             {field.helperText && <p className="text-xs text-muted-foreground">{field.helperText}</p>}
          </div>
        );
      default: return null;
    }
  };

  return (
    <form onSubmit={handleSubmit} className={className}>
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        {fields.map((field) => (
          <div 
            key={field.name + (field.type === 'radio' ? field.value : '')}
            style={{ gridColumn: `span ${field.colSpan || 1}` }}
          >
            {renderField(field)}
          </div>
        ))}
      </div>
      
      {children && <div className="mt-8">{children}</div>}
    </form>
  );
};
</file>

<file path="src/components/forms/MultiSelect.tsx">
'use client';

import React, { useId } from 'react';
import ReactSelect, { components, MultiValue, ActionMeta, DropdownIndicatorProps, MultiValueRemoveProps } from 'react-select';
import { cn } from '../../utils/cn';
import { Icon } from '../ui/Icon';

export interface MultiSelectOption {
  value: string | number;
  label: string;
}

export interface MultiSelectProps {
  options: MultiSelectOption[];
  value: MultiSelectOption[] | null;
  onChange: (selected: MultiSelectOption[] | null) => void;
  label?: string;
  placeholder?: string;
  isClearable?: boolean;
  isDisabled?: boolean;
  isLoading?: boolean;
  isSearchable?: boolean;
  className?: string;
  error?: boolean;
  helperText?: string;
}

// Custom Dropdown Arrow
const DropdownIndicator = (props: DropdownIndicatorProps<MultiSelectOption, true>) => {
  return (
    <components.DropdownIndicator {...props}>
      <Icon name="chevron-down" className="h-4 w-4 text-muted-foreground" />
    </components.DropdownIndicator>
  );
};

// Custom "X" for removing tags
const MultiValueRemove = (props: MultiValueRemoveProps<MultiSelectOption, true>) => {
  return (
    <components.MultiValueRemove {...props}>
      <Icon name="x" className="h-3 w-3" />
    </components.MultiValueRemove>
  );
};

export const MultiSelect: React.FC<MultiSelectProps> = ({
  options,
  value,
  onChange,
  label,
  placeholder = "Select...",
  isClearable = true,
  isDisabled = false,
  isLoading = false,
  isSearchable = true,
  className,
  error,
  helperText,
}) => {
  const uniqueId = useId();

  const handleChange = (
    newValue: MultiValue<MultiSelectOption>,
    _actionMeta: ActionMeta<MultiSelectOption>
  ) => {
    const selectedOptions = newValue ? Array.from(newValue) : null;
    onChange(selectedOptions);
  };

  // --- THEME ENGINE MAPPING ---
  const customStyles = {
    control: (base: any, state: any) => ({
      ...base,
      backgroundColor: 'rgb(var(--app-card-bg-color))',
      borderColor: error 
        ? 'rgb(var(--app-danger-color))' 
        : state.isFocused 
          ? 'rgb(var(--app-primary-color))' 
          : 'rgb(var(--app-border-color))',
      color: 'rgb(var(--app-text-color))',
      borderRadius: 'var(--app-border-radius-md)',
      boxShadow: state.isFocused ? '0 0 0 1px rgb(var(--app-primary-color))' : 'none',
      '&:hover': {
        borderColor: state.isFocused 
          ? 'rgb(var(--app-primary-color))' 
          : 'rgb(var(--app-text-color) / 0.5)'
      },
      minHeight: '2.5rem',
    }),
    menu: (base: any) => ({
      ...base,
      backgroundColor: 'rgb(var(--app-card-bg-color))',
      border: '1px solid rgb(var(--app-border-color))',
      borderRadius: 'var(--app-border-radius-md)',
      zIndex: 50,
    }),
    option: (base: any, state: any) => ({
      ...base,
      backgroundColor: state.isSelected
        ? 'rgb(var(--app-primary-color))'
        : state.isFocused
          ? 'rgb(var(--app-primary-color) / 0.1)'
          : 'transparent',
      color: state.isSelected
        ? 'rgb(var(--app-primary-foreground-color))'
        : 'rgb(var(--app-text-color))',
      cursor: 'pointer',
      '&:active': {
        backgroundColor: 'rgb(var(--app-primary-color) / 0.2)'
      }
    }),
    // --- MULTI-SELECT SPECIFIC STYLES ---
    multiValue: (base: any) => ({
      ...base,
      backgroundColor: 'rgb(var(--app-secondary-color) / 0.2)',
      borderRadius: 'var(--app-border-radius-sm)',
    }),
    multiValueLabel: (base: any) => ({
      ...base,
      color: 'rgb(var(--app-text-color))',
      fontSize: '0.875rem',
      fontWeight: 500,
    }),
    multiValueRemove: (base: any) => ({
      ...base,
      color: 'rgb(var(--app-text-color) / 0.7)',
      ':hover': {
        backgroundColor: 'rgb(var(--app-danger-color))',
        color: 'rgb(var(--app-danger-foreground-color))',
      },
    }),
    input: (base: any) => ({
      ...base,
      color: 'rgb(var(--app-text-color))',
    }),
    placeholder: (base: any) => ({
      ...base,
      color: 'rgb(var(--app-text-color) / 0.5)',
    }),
  };

  return (
    <div className={cn("w-full", className)}>
      {label && (
        <label htmlFor={uniqueId} className="block text-sm font-medium text-foreground mb-1.5">
          {label}
        </label>
      )}
      <ReactSelect<MultiSelectOption, true>
        instanceId={uniqueId}
        styles={customStyles}
        components={{ DropdownIndicator, MultiValueRemove }}
        options={options}
        value={value}
        onChange={handleChange}
        isMulti
        isClearable={isClearable}
        isDisabled={isDisabled}
        isLoading={isLoading}
        isSearchable={isSearchable}
        placeholder={placeholder}
        menuPortalTarget={typeof document !== 'undefined' ? document.body : null}
        menuPosition="fixed"
      />
      {helperText && (
        <p className={cn("mt-1.5 text-xs", error ? "text-destructive" : "text-muted-foreground")}>
          {helperText}
        </p>
      )}
    </div>
  );
};
</file>

<file path="src/components/forms/SegmentedControl.tsx">
import React from 'react';
import { cn } from '../../utils/cn';

export interface SegmentedControlOption {
  label: string;
  value: string | number;
  disabled?: boolean;
}

export interface SegmentedControlProps {
  /** The list of segments to display. */
  options: SegmentedControlOption[];
  /** The currently selected value. */
  value: string | number;
  /** Callback fired when a segment is selected. */
  onChange: (value: any) => void;
  /** The size of the control. */
  size?: 'sm' | 'md';
  /** Additional CSS classes. */
  className?: string;
}

/**
 * @wizard
 * @name SegmentedControl
 * @description A theme-aware linear toggle component. Ideal for switching between discrete modes (e.g., "Map / List").
 * @tags input, toggle, switch, radio, control
 * @category form
 * @id segmented-control
 */
export const SegmentedControl: React.FC<SegmentedControlProps> = ({
  options,
  value,
  onChange,
  size = 'md',
  className,
}) => {
  return (
    <div className={cn(
      // Container: Use 'muted' background for the track (works in all themes)
      "inline-flex bg-muted rounded-lg p-1 border border-border",
      className
    )}>
      {options.map((option) => {
        const isSelected = option.value === value;
        return (
          <button
            key={String(option.value)}
            onClick={() => !option.disabled && onChange(option.value)}
            disabled={option.disabled}
            className={cn(
              "relative rounded-md font-medium transition-all duration-200 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-primary",
              
              // Size Variants
              size === 'sm' ? "text-xs px-3 py-1" : "text-sm px-4 py-1.5",
              
              // State Styles (Theme Aware)
              isSelected 
                ? "bg-card text-foreground shadow-sm ring-1 ring-black/5 dark:ring-white/10" 
                : "text-muted-foreground hover:text-foreground hover:bg-background/50",
              
              option.disabled && "opacity-50 cursor-not-allowed"
            )}
            type="button"
          >
            {option.label}
          </button>
        );
      })}
    </div>
  );
};
</file>

<file path="src/components/forms/Select.tsx">
'use client';

import React, { useId } from 'react';
import ReactSelect, { components, DropdownIndicatorProps } from 'react-select';
import { cn } from '../../utils/cn';
import { Icon } from '../ui/Icon';

export interface SelectOption {
  value: string | number;
  label: string;
}

export interface SelectProps {
  options: SelectOption[];
  value?: SelectOption | null;
  onChange: (option: SelectOption | null) => void;
  label?: string;
  placeholder?: string;
  isDisabled?: boolean;
  isLoading?: boolean;
  isClearable?: boolean;
  isSearchable?: boolean;
  className?: string;
  error?: boolean;
  helperText?: string;
}

const DropdownIndicator = (props: DropdownIndicatorProps<SelectOption, false>) => {
  return (
    <components.DropdownIndicator {...props}>
      <Icon name="chevron-down" className="h-4 w-4 text-muted-foreground" />
    </components.DropdownIndicator>
  );
};

export const Select: React.FC<SelectProps> = ({
  options,
  value,
  onChange,
  label,
  placeholder = "Select...",
  isDisabled = false,
  isLoading = false,
  isClearable = true,
  isSearchable = true,
  className,
  error,
  helperText
}) => {
  const uniqueId = useId();

  // --- THEME ENGINE MAPPING ---
  // We use CSS variables to ensure the Select matches the active theme dynamically.
  const customStyles = {
    control: (base: any, state: any) => ({
      ...base,
      backgroundColor: 'rgb(var(--app-card-bg-color))',
      borderColor: error 
        ? 'rgb(var(--app-danger-color))' 
        : state.isFocused 
          ? 'rgb(var(--app-primary-color))' 
          : 'rgb(var(--app-border-color))',
      color: 'rgb(var(--app-text-color))',
      borderRadius: 'var(--app-border-radius-md)',
      boxShadow: state.isFocused ? '0 0 0 1px rgb(var(--app-primary-color))' : 'none',
      '&:hover': {
        borderColor: state.isFocused 
          ? 'rgb(var(--app-primary-color))' 
          : 'rgb(var(--app-text-color) / 0.5)'
      },
      minHeight: '2.5rem', // Match Tailwind h-10
    }),
    menu: (base: any) => ({
      ...base,
      backgroundColor: 'rgb(var(--app-card-bg-color))',
      border: '1px solid rgb(var(--app-border-color))',
      borderRadius: 'var(--app-border-radius-md)',
      zIndex: 50,
    }),
    option: (base: any, state: any) => ({
      ...base,
      backgroundColor: state.isSelected
        ? 'rgb(var(--app-primary-color))'
        : state.isFocused
          ? 'rgb(var(--app-primary-color) / 0.1)'
          : 'transparent',
      color: state.isSelected
        ? 'rgb(var(--app-primary-foreground-color))'
        : 'rgb(var(--app-text-color))',
      cursor: 'pointer',
      '&:active': {
        backgroundColor: 'rgb(var(--app-primary-color) / 0.2)'
      }
    }),
    singleValue: (base: any) => ({
      ...base,
      color: 'rgb(var(--app-text-color))',
    }),
    input: (base: any) => ({
      ...base,
      color: 'rgb(var(--app-text-color))',
    }),
    placeholder: (base: any) => ({
      ...base,
      color: 'rgb(var(--app-text-color) / 0.5)',
    }),
  };

  return (
    <div className={cn("w-full", className)}>
      {label && (
        <label htmlFor={uniqueId} className="block text-sm font-medium text-foreground mb-1.5">
          {label}
        </label>
      )}
      
      <ReactSelect
        instanceId={uniqueId}
        styles={customStyles}
        components={{ DropdownIndicator }}
        options={options}
        value={value}
        onChange={(newValue) => onChange(newValue as SelectOption)}
        isDisabled={isDisabled}
        isLoading={isLoading}
        isClearable={isClearable}
        isSearchable={isSearchable}
        placeholder={placeholder}
        menuPortalTarget={typeof document !== 'undefined' ? document.body : null} 
        menuPosition="fixed" 
      />

      {helperText && (
        <p className={cn("mt-1.5 text-xs", error ? "text-destructive" : "text-muted-foreground")}>
          {helperText}
        </p>
      )}
    </div>
  );
};
</file>

<file path="src/components/layout/Card.tsx">
import React, { forwardRef } from 'react';
import { cn } from '../../utils/cn'; // ‚úÖ Use central utility

export interface CardProps extends React.HTMLAttributes<HTMLDivElement> {
  // Extends standard div props
}

/**
 * @wizard
 * @name Card
 * @description A versatile container that adapts to the current theme. Its background, border, and shape are themeable.
 * @tags layout, ui, container, box
 * @props
 * - name: children
 * type: React.ReactNode
 * description: The content to be displayed inside the card.
 * - name: className
 * type: string
 * description: Optional additional CSS classes for custom styling. Use this for adding padding, shadows, etc. (e.g., 'p-4 shadow-lg').
 * @category layout
 * @id card
 */
export const Card = forwardRef<HTMLDivElement, CardProps>(
  ({ className, children, ...props }, ref) => {
    return (
      <div
        ref={ref}
        className={cn(
          // Base Appearance
          "bg-card text-card-foreground", // ‚úÖ Ensures text matches background contrast
          "rounded-lg border border-border shadow-sm", // ‚úÖ Default modern style
          className
        )}
        {...props}
      >
        {children}
      </div>
    );
  }
);

Card.displayName = "Card";
</file>

<file path="src/components/ui/Avatar.tsx">
import React from 'react';
import { cn } from '../../utils/cn'; // Ensure we use our utility

interface AvatarProps {
  /** The URL of the image to display. */
  src?: string;
  /** The name of the user, used for generating initials as a fallback. */
  name: string;
  /** The size of the avatar. */
  size?: 'sm' | 'md' | 'lg';
  /** Optional additional CSS classes. */
  className?: string;
}

/**
 * @wizard
 * @name Avatar
 * @description Displays a user's profile picture or initials as a fallback, with different size options.
 * @tags ui, profile, user
 * @props
 * - name: name
 * type: string
 * description: The name of the user, used for generating initials if no `src` is provided.
 * - name: src
 * type: string
 * description: The URL of the image to display as the avatar. If not provided, initials are shown.
 * - name: size
 * type: 'sm' | 'md' | 'lg'
 * description: Controls the dimensions and font size of the avatar.
 * default: 'md'
 * - name: className
 * type: string
 * description: Optional additional CSS classes for custom styling.
 * @category ui
 * @id avatar
 */
export const Avatar: React.FC<AvatarProps> = ({ src, name, size = 'md', className }) => {
  const getInitials = (name: string) => {
    const names = name.split(' ');
    if (names.length > 1) {
      return `${names[0][0]}${names[names.length - 1][0]}`.toUpperCase();
    }
    return name.substring(0, 2).toUpperCase();
  };

  const sizeClasses = {
    sm: 'h-8 w-8 text-xs',
    md: 'h-12 w-12 text-sm', // Adjusted font size for better balance
    lg: 'h-16 w-16 text-xl',
  };

  return (
    <div
      className={cn(
        // Base styles: Flex centering, shape, and "Zero Jank" protection (shrink-0)
        "relative inline-flex shrink-0 items-center justify-center rounded-full overflow-hidden",
        // Theme styles: Use semantic tokens, not hardcoded colors
        "bg-secondary text-secondary-foreground",
        // Size and custom overrides
        sizeClasses[size],
        className
      )}
    >
      {src ? (
        <img 
          src={src} 
          alt={name} 
          className="h-full w-full object-cover" 
        />
      ) : (
        <span className="font-semibold">{getInitials(name)}</span>
      )}
    </div>
  );
};
</file>

<file path="src/components/ui/Badge.tsx">
import React, { forwardRef } from 'react';
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '../../utils/cn'; // ‚úÖ Use the powerful central utility

// Define badge styles and variants using cva
const badgeVariants = cva(
  'inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2',
  {
    variants: {
      variant: {
        primary:
          'border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80',
        secondary:
          'border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80',
        danger:
          'border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80',
        success:
          'border-transparent bg-success text-success-foreground shadow hover:bg-success/80', // ‚úÖ Fixed: Use semantic success token
        warning:
          'border-transparent bg-warning text-warning-foreground shadow hover:bg-warning/80', // ‚úÖ Added: Missing variant
        outline: 'text-foreground',
      },
    },
    defaultVariants: {
      variant: 'primary',
    },
  }
);

export interface BadgeProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof badgeVariants> {}

/**
 * @wizard
 * @name Badge
 * @description A small component to display a status, count, or label.
 * @tags ui, label, indicator
 * @props
 * - name: variant
 * type: "'primary' | 'secondary' | 'danger' | 'success' | 'warning' | 'outline'"
 * description: The visual style of the badge.
 * - name: children
 * type: React.ReactNode
 * description: The content to display inside the badge.
 * - name: className
 * type: string
 * description: Optional additional CSS classes.
 * @category ui
 * @id badge
 */
export const Badge = forwardRef<HTMLDivElement, BadgeProps>(
  ({ className, variant, ...props }, ref) => {
    return (
      <div 
        ref={ref} // ‚úÖ Fixed: Forward ref to DOM element
        className={cn(badgeVariants({ variant }), className)} 
        {...props} 
      />
    );
  }
);

Badge.displayName = 'Badge';

export { badgeVariants };
</file>

<file path="src/components/ui/Button.tsx">
/**
 * @file Button.tsx
 * @repository ramme-ui
 * @description The primary Button component for the Ramme design system.
 */

import React from 'react';
import { cva } from 'class-variance-authority'; // <--- Removed unused 'type VariantProps'
import { Icon, type IconName } from './Icon';
import { cn } from '../../utils/cn';
import { Slot } from '@radix-ui/react-slot';

/** @wizard
 * @name Button
 * @description The primary interactive element. Supports polymorphism (rendering as a link) via the 'asChild' prop.
 * @category Input
 * @props 
 * - name: variant
 * type: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger' | 'link' | 'accent'
 * description: The visual style of the button.
 * default: 'primary'
 * - name: size
 * type: 'sm' | 'md' | 'lg' | 'icon'
 * description: The size of the button.
 * default: 'md'
 * - name: loading
 * type: boolean
 * description: If true, replaces content with a spinner.
 * default: false
 * - name: iconLeft
 * type: IconName
 * description: Optional icon to display before the text.
 * - name: asChild
 * type: boolean
 * description: If true, delegates rendering to the child element (e.g. for Links).
 * default: false
 * - name: onClick
 * type: () => void
 * description: Callback fired when the button is clicked.
 * @id button
 */

const buttonVariants = cva(
  'inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',
  {
    variants: {
      variant: {
        primary: 'bg-primary text-primary-foreground hover:bg-primary/90',
        danger:
          'bg-destructive text-destructive-foreground hover:bg-destructive/90',
        outline:
          'border border-input bg-background hover:bg-accent hover:text-accent-foreground',
        secondary:
          'bg-secondary text-secondary-foreground hover:bg-secondary/80',
        ghost: 'hover:bg-accent hover:text-accent-foreground',
        link: 'text-primary underline-offset-4 hover:underline',
        accent: 'bg-accent text-accent-foreground hover:bg-accent/90',
      },
      size: {
        sm: 'h-9 rounded-md px-3',
        md: 'h-10 px-4 py-2',
        lg: 'h-11 rounded-md px-8',
        icon: 'h-10 w-10',
      },
    },
    defaultVariants: {
      variant: 'primary',
      size: 'md',
    },
  },
);

// Explicitly defining the interface prevents type loss during the build
export interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger' | 'link' | 'accent' | null;
  size?: 'sm' | 'md' | 'lg' | 'icon' | null;
  asChild?: boolean;
  loading?: boolean;
  iconLeft?: IconName;
  iconRight?: IconName;
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  (
    {
      className,
      variant,
      size,
      children,
      asChild = false,
      loading,
      iconLeft,
      iconRight,
      ...props
    },
    ref,
  ) => {
    const Comp = asChild ? Slot : 'button';

    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        disabled={loading || props.disabled}
        {...props}
      >
        {asChild ? (
          children
        ) : (
          <>
            {loading && <Icon name="loader-circle" className="animate-spin mr-2" />}
            {!loading && iconLeft && <Icon name={iconLeft} className="mr-2" />}
            {children}
            {!loading && iconRight && <Icon name={iconRight} className="ml-2" />}
          </>
        )}
      </Comp>
    );
  },
);
Button.displayName = 'Button';

export { Button, buttonVariants };
</file>

<file path="src/contexts/ThemeContext.stories.tsx">
import React, { useState } from 'react';
import type { Meta, StoryObj } from '@storybook/react';
import { useTheme, availableThemes, type ThemeConfig } from './ThemeContext';
import { Button } from '../components/ui/Button';
import { Card } from '../components/layout/Card';
import { Input } from '../components/forms/Input';
import { Select, type SelectOption } from '../components/forms/Select';
import { MultiSelect, type MultiSelectOption } from '../components/forms/MultiSelect';
import { DatePicker } from '../components/forms/DatePicker';
import { BarChart } from '../components/data-display/BarChart';
import { DataTable } from '../components/data-display/DataTable';
import { SectionHeader } from '../components/layout/SectionHeader';
import { Badge } from '../components/ui/Badge';

const meta = {
  title: 'Contexts/ThemeContext',
  parameters: {
    layout: 'padded',
  },
} satisfies Meta;

export default meta;
type Story = StoryObj;

// --- MOCK THEMES (Tier 2) ---
const cyberPunkTheme: ThemeConfig = {
  name: 'Cyberpunk 2077',
  colors: {
    primary: '255 238 88', // Neon Yellow
    primaryForeground: '0 0 0',
    secondary: '30 30 35',
    secondaryForeground: '255 255 255',
    accent: '0 255 255', // Cyan
    accentForeground: '0 0 0',
    danger: '255 0 85',
    dangerForeground: '255 255 255',
    background: '5 5 10', // Near Black
    card: '20 20 25',
    text: '240 240 240',
    border: '255 238 88', // Yellow borders
    muted: '40 40 50',
    mutedForeground: '150 150 160',
    input: '30 30 35',
    inputBorder: '80 80 90',
    ring: '255 238 88',
  },
  borderRadius: '0px',
  fonts: {
    sans: '"Courier Prime", monospace',
    serif: 'serif',
    mono: '"Courier Prime", monospace'
  }
};

const forestTheme: ThemeConfig = {
  name: 'Deep Forest',
  colors: {
    primary: '34 197 94', // Green
    primaryForeground: '255 255 255',
    secondary: '20 83 45', // Dark Green
    secondaryForeground: '220 252 231',
    accent: '234 179 8', // Yellow
    accentForeground: '0 0 0',
    danger: '239 68 68',
    dangerForeground: '255 255 255',
    background: '2 44 34', // Very Dark Green
    card: '6 78 59',
    text: '236 253 245',
    border: '20 83 45',
    muted: '6 78 59',
    mutedForeground: '110 231 183',
    input: '20 83 45',
    inputBorder: '34 197 94',
    ring: '34 197 94',
  },
  borderRadius: '1rem',
  fonts: {
    sans: '"Merriweather", serif',
    serif: '"Merriweather", serif',
    mono: 'monospace'
  }
};

// --- MOCK DATA ---
const chartData = [
  { name: 'Mon', value: 400 },
  { name: 'Tue', value: 300 },
  { name: 'Wed', value: 550 },
  { name: 'Thu', value: 450 },
  { name: 'Fri', value: 600 },
];

const tableData = [
  { id: 1, name: 'Project Alpha', status: 'Active', budget: 12000 },
  { id: 2, name: 'Project Beta', status: 'Pending', budget: 8500 },
  { id: 3, name: 'Project Gamma', status: 'Done', budget: 45000 },
];

const options = [
  { value: 'opt1', label: 'Option 1' },
  { value: 'opt2', label: 'Option 2' },
  { value: 'opt3', label: 'Option 3' },
];

export const ThemeStressTest: Story = {
  render: function Render() {
    const { theme, setTheme, customTheme, setCustomTheme } = useTheme();
    const [date, setDate] = useState<Date | null>(new Date());
    const [selectVal, setSelectVal] = useState<SelectOption | null>(null);
    const [multiVal, setMultiVal] = useState<MultiSelectOption[] | null>([options[0]]);

    return (
      <div className="space-y-8 max-w-6xl mx-auto">
        
        {/* --- 1. THEME CONTROLLER --- */}
        <Card className="p-6 sticky top-4 z-50 shadow-xl border-primary/50 bg-card/95 backdrop-blur">
          <div className="flex flex-col md:flex-row justify-between items-center gap-4">
            <div>
              <h2 className="text-xl font-bold">Theme Engine Stress Test</h2>
              <p className="text-sm text-muted-foreground">
                Active: <span className="font-mono text-primary font-bold">{customTheme ? customTheme.name : theme}</span>
              </p>
            </div>
            
            <div className="flex gap-2 flex-wrap justify-end">
              {availableThemes.map((t) => (
                <Button 
                  key={t} 
                  size="sm" 
                  variant={theme === t && !customTheme ? 'primary' : 'outline'}
                  onClick={() => setTheme(t)}
                >
                  {t}
                </Button>
              ))}
              <div className="w-px h-8 bg-border mx-2" />
              <Button 
                size="sm" 
                variant={customTheme?.name === 'Cyberpunk 2077' ? 'primary' : 'secondary'}
                onClick={() => setCustomTheme(cyberPunkTheme)}
              >
                AI: Cyberpunk
              </Button>
              <Button 
                size="sm" 
                variant={customTheme?.name === 'Deep Forest' ? 'primary' : 'secondary'}
                onClick={() => setCustomTheme(forestTheme)}
              >
                AI: Forest
              </Button>
            </div>
          </div>
        </Card>

        {/* --- 2. THE VISUAL GAUNTLET --- */}
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
          
          {/* Column A: Forms (The "Overlay" Killers) */}
          <div className="space-y-6">
            <Card className="p-6 space-y-6">
              <SectionHeader title="Form Controls (Z-Index & Borders)" />
              
              <div className="grid grid-cols-2 gap-4">
                <Input label="Standard Input" placeholder="Type here..." />
                <DatePicker label="Date Picker" selected={date} onChange={setDate} />
              </div>

              <Select 
                label="Single Select (React-Select)" 
                options={options} 
                value={selectVal} 
                onChange={setSelectVal} 
              />

              <MultiSelect 
                label="Multi Select (Tags)" 
                options={options} 
                value={multiVal} 
                onChange={setMultiVal} 
              />
            </Card>

            <Card className="p-6">
              <SectionHeader title="Feedback & Badges" />
              <div className="flex flex-wrap gap-2 mt-4">
                <Badge variant="primary">Primary</Badge>
                <Badge variant="secondary">Secondary</Badge>
                <Badge variant="success">Success</Badge>
                <Badge variant="danger">Danger</Badge>
                <Badge variant="warning">Warning</Badge>
                <Badge variant="outline">Outline</Badge>
              </div>
            </Card>
          </div>

          {/* Column B: Data (The "Color" Killers) */}
          <div className="space-y-6">
            <Card className="p-6 h-80 flex flex-col">
              <SectionHeader title="Chart Theme Sync" />
              <div className="flex-1 mt-4">
                <BarChart data={chartData} dataKeyX="name" barKeys={['value']} />
              </div>
            </Card>

            <Card className="p-6 min-h-[300px] flex flex-col">
              <SectionHeader title="Data Grid (AG Grid Theme)" />
              <div className="flex-1 mt-4 -mx-2">
                <DataTable 
                  rowData={tableData}
                  columnDefs={[
                    { field: 'name', headerName: 'Project', flex: 1 },
                    { field: 'status', headerName: 'Status', cellRenderer: (p: any) => <Badge variant="outline">{p.value}</Badge> },
                    { field: 'budget', headerName: 'Budget', valueFormatter: (p: any) => `$${p.value}` }
                  ]}
                  height="250px"
                />
              </div>
            </Card>
          </div>

        </div>
      </div>
    );
  },
};
</file>

<file path="src/data/mockData.ts">
/**
 * @wizard
 * @name mockChartData
 * @description Pre-defined datasets for prototyping charts and other data-driven components.
 * @tags data, mock, example
 * @category data
 * @id mock-chart-data
 * @id mock-table-data
 * @id mock-table-data
 * @id mock-table-data
 */
// src/data/mockData.ts

export const mockChartData = [
  { name: 'Jan', uv: 4000, pv: 2400 },
  { name: 'Feb', uv: 3000, pv: 1398 },
  { name: 'Mar', uv: 2000, pv: 9800 },
  { name: 'Apr', uv: 2780, pv: 3908 },
  { name: 'May', uv: 1890, pv: 4800 },
  { name: 'Jun', uv: 2390, pv: 3800 },
];

/**
 * @wizard
 * @name mockTableData
 * @description Pre-defined datasets for prototyping tables and other data-driven components.
 * @tags data, mock, example
 * @category data
 */

export const mockTableData = [
  { make: 'Tesla', model: 'Model Y', price: 65990, electric: true },
  { make: 'Ford', model: 'F-150', price: 33850, electric: false },
  { make: 'Toyota', model: 'Corolla', price: 29600, electric: false },
];
</file>

<file path="src/components/layout/Sidebar.tsx">
import React, { createContext, useState, useEffect } from 'react';
import { cn } from '../../utils/cn';
import { Icon, IconName } from '../ui/Icon';
import { Avatar } from '../ui/Avatar';

// --- Types ---
export interface SidebarItem {
  id: string;
  label: string;
  icon: IconName;
  href?: string;
  onClick?: () => void;
  subItems?: Omit<SidebarItem, 'icon'>[]; 
  badge?: string | number;
}

export interface SidebarUser {
  name: string;
  email: string;
  avatarUrl?: string;
}

export interface SidebarProps {
  items: SidebarItem[];
  user?: SidebarUser;
  className?: string;
  logo?: React.ReactNode;
  activeItemId?: string;
  onNavigate?: (item: SidebarItem) => void;
  footerSlot?: React.ReactNode;
}

interface SidebarContextType {
  collapsed: boolean;
  toggleCollapsed: () => void;
  activeItemId?: string;
}

const SidebarContext = createContext<SidebarContextType | undefined>(undefined);

// --- Sub-components ---

const SidebarHeader = ({ logo, collapsed }: { logo?: React.ReactNode; collapsed: boolean }) => (
  <div className={cn("flex h-16 items-center border-b px-4", collapsed ? "justify-center" : "justify-between")}>
    {!collapsed && (logo || <span className="text-lg font-bold">App</span>)}
  </div>
);

const SidebarNavItem = ({ 
  item, 
  collapsed, 
  isActive, 
  onClick 
}: { 
  item: SidebarItem; 
  collapsed: boolean; 
  isActive: boolean; 
  onClick: () => void;
}) => {
  return (
    <button
      onClick={onClick}
      className={cn(
        "group flex w-full items-center gap-x-3 rounded-md p-2 text-sm font-medium transition-colors",
        isActive 
          ? "bg-primary/10 text-primary" 
          : "text-muted-foreground hover:bg-accent hover:text-foreground",
        collapsed && "justify-center"
      )}
      title={collapsed ? item.label : undefined}
    >
      <Icon name={item.icon} className="h-5 w-5 shrink-0" />
      {!collapsed && (
        <>
          <span className="flex-1 text-left">{item.label}</span>
          {item.badge && (
            <span className="ml-auto rounded-full bg-primary px-2 py-0.5 text-xs text-primary-foreground">
              {item.badge}
            </span>
          )}
        </>
      )}
    </button>
  );
};

const SidebarFooter = ({ user, collapsed, slot }: { user?: SidebarUser; collapsed: boolean; slot?: React.ReactNode }) => (
  <div className="mt-auto border-t p-4">
    {slot}
    {user && (
      <div className={cn("flex items-center gap-x-3 mt-4", collapsed && "justify-center")}>
        <Avatar name={user.name} src={user.avatarUrl} size="sm" />
        {!collapsed && (
          <div className="flex flex-col overflow-hidden">
            <span className="truncate text-sm font-medium">{user.name}</span>
            <span className="truncate text-xs text-muted-foreground">{user.email}</span>
          </div>
        )}
      </div>
    )}
  </div>
);

// --- Main Component ---

/**
 * @wizard
 * @name Sidebar
 * @description A collapsible sidebar navigation component with support for branding, navigation items, and user profile.
 * @tags layout, navigation, sidebar
 * @props
 * - name: items
 * type: SidebarItem[]
 * description: Array of navigation items.
 * - name: user
 * type: SidebarUser
 * description: User profile information for the footer.
 * - name: activeItemId
 * type: string
 * description: ID of the currently active navigation item.
 * @category layout
 * @id sidebar
 */
export const Sidebar: React.FC<SidebarProps> = ({
  items,
  user,
  className,
  logo,
  activeItemId,
  onNavigate,
  footerSlot,
}) => {
  const [collapsed, setCollapsed] = useState(false);

  const toggleCollapsed = () => setCollapsed((prev) => !prev);

  // Auto-collapse on small screens
  useEffect(() => {
    const handleResize = () => {
      if (window.innerWidth < 768) {
        setCollapsed(true);
      }
    };
    window.addEventListener('resize', handleResize);
    handleResize(); // Check on mount
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  return (
    <SidebarContext.Provider value={{ collapsed, toggleCollapsed, activeItemId }}>
      <div
        className={cn(
          "relative flex h-screen flex-col border-r bg-card transition-all duration-300",
          collapsed ? "w-16" : "w-64",
          className
        )}
      >
        <SidebarHeader logo={logo} collapsed={collapsed} />
        
        <div className="flex-1 overflow-y-auto px-3 py-4">
          <nav className="space-y-1">
            {items.map((item) => (
              <SidebarNavItem 
                key={item.id}
                item={item}
                collapsed={collapsed}
                isActive={activeItemId === item.id}
                onClick={() => {
                  item.onClick?.();
                  onNavigate?.(item);
                }}
              />
            ))}
          </nav>
        </div>

        <button 
          onClick={toggleCollapsed}
          className="absolute -right-3 top-20 z-50 rounded-full border bg-background p-1 text-muted-foreground shadow-sm hover:text-foreground"
        >
          <Icon name={collapsed ? 'chevron-right' : 'chevron-left'} className="h-4 w-4" />
        </button>

        <SidebarFooter user={user} collapsed={collapsed} slot={footerSlot} />
      </div>
    </SidebarContext.Provider>
  );
};
</file>

<file path="README.md">
# Ramme UI

[![NPM Version](https://img.shields.io/npm/v/@ramme-io/create-app.svg)](https://www.npmjs.com/package/@ramme-io/ui) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**The blocks for the build kit.**

Ramme UI is a basic bundle of standard, accessible components, and best practices ready for rapid prototyping.

---

## The Basics

We have collected popular third-party libraries into a single build kit:

* **Engine:** React 19+
* **Styling:** Tailwind CSS 
* **Primitives:** Radix UI 
* **Motion:** Framer Motion 
* **Icons:** Lucide React

---

## Quick Start

To spin up a new project, run the initialization command in your terminal. This will generate a new folder with all resources linked and configured.

*(Replace `my-new-project` with your desired folder name).*

```bash
npm create @ramme-io/app@latest my-new-project
```

This single command will:
1.  **Scaffold** a high-performance Vite project structure.
2.  **Install** React 19, TypeScript, and Tailwind CSS.
3.  **Configure** the `@ramme-io/ui` component library and design tokens.
4.  **Optimize** limited configuration for customization.

---

## Getting Started

Once the scaffolding is complete, initialize your local environment:

**1. Enter the project directory**
```bash
cd my-new-project
```

**2. Install dependencies**
```bash
pnpm install
# or npm install
```

**3. Start the dev server**
```bash
pnpm run dev
```

Your prototype is running locally at `http://localhost:5173`.

---

## The Tech Stack

This starter kit is an opinionated selection of the best open-source tools available:

* **Vite:** Next-generation tooling for instant server start and lightning-fast HMR (Hot Module Replacement).
* **React:** The standard library for building composable user interfaces.
* **TypeScript:** Statically typed JavaScript for scalable, robust application logic.
* **Tailwind CSS:** A utility-first styling engine configured with Ramme design tokens.
* **@ramme-io/ui:** A pre-installed suite of accessible, unstyled primitives based on Radix UI.

---

## Manual Installation

If you are adding Ramme to an existing project, install the core package:

```bash
npm install @ramme-io/ui
# or
pnpm add @ramme-io/ui
```

---

## Component Usage

Ramme components are designed to be composable and intuitive.

```tsx
import React from 'react';
import { Button, Card, PageHeader } from '@ramme-io/ui';
import { ArrowRight } from 'lucide-react';

function LandingPage() {
  return (
    <div className="p-8 max-w-4xl mx-auto">
      <PageHeader
        title="Prototype Faster."
        description="Stop fighting with config files. Start designing in code."
      />
      
      <Card className="mt-8 p-6 border-neutral-200 shadow-sm">
        <h3 className="text-lg font-medium mb-2">Ready to build?</h3>
        <p className="text-neutral-600 mb-6">
          This component is accessible, responsive, and themable by default.
        </p>
        <Button variant="default" onClick={() => console.log('Launch')}>
          Initialize Project <ArrowRight className="ml-2 h-4 w-4" />
        </Button>
      </Card>
    </div>
  );
}

export default LandingPage;
```

---

## Local Development

If you want to contribute to the project or customize the primitives, you can run our component workbench locally.

1. Install Dependencies:

```bash
pnpm install
```

2. Run Storybook: This starts the local development environment where you can test components in isolation.

```bash
pnpm run storybook
```
---

## Project Links

* **`@ramme-io/ui`**: The core library of visual primitives.
* **`@ramme-io/create-app`** (This Repository): The quick start kit.

---

## Contributing

We welcome contributions from the community. Just fork the repository and submit a pull request. For major changes, please open an issue first to discuss.

## License

Copyright ¬© 2025 Excesspool Limited Liability Company.
This project is licensed under the [MIT License](LICENSE).
</file>

<file path="src/component-history.json">
{
  "suggestion": {
    "version": "1.0.0",
    "fingerprint": "7de95605bd5d92900269c3ecd1c7101a",
    "lastUpdated": "2025-12-27T22:22:23.118Z"
  },
  "actions": {
    "version": "1.0.4",
    "fingerprint": "bb9a49b99dba7a4258c988e96cfad863",
    "lastUpdated": "2025-12-27T22:22:23.118Z"
  },
  "chat-fab": {
    "version": "1.0.0",
    "fingerprint": "8f31c5c9e3c700131bfcdbeac9d6b326",
    "lastUpdated": "2025-12-27T22:22:23.119Z"
  },
  "conversation": {
    "version": "1.0.0",
    "fingerprint": "e39f08cf0c080b1b1bfe09812c91f424",
    "lastUpdated": "2025-12-27T22:22:23.119Z"
  },
  "loader": {
    "version": "1.0.1",
    "fingerprint": "387c68619cec290b2062990d3ea30544",
    "lastUpdated": "2025-12-27T22:22:23.119Z"
  },
  "message": {
    "version": "1.0.0",
    "fingerprint": "e952813d742728384b5992878107b142",
    "lastUpdated": "2025-12-27T22:22:23.119Z"
  },
  "prompt-input": {
    "version": "1.0.0",
    "fingerprint": "3b0be7686595133e81ac8b1d92ec1569",
    "lastUpdated": "2025-12-27T22:22:23.119Z"
  },
  "device-card": {
    "version": "1.0.0",
    "fingerprint": "d825a8e71e815cc788f9325e42dcee04",
    "lastUpdated": "2025-12-27T22:22:23.119Z"
  },
  "activity-feed": {
    "version": "1.0.0",
    "fingerprint": "26ccf8fc3f2236b264752ce483805cb1",
    "lastUpdated": "2025-12-27T22:22:23.120Z"
  },
  "bar-chart": {
    "version": "1.0.0",
    "fingerprint": "b426730a556a3663906cf48c8dd6056e",
    "lastUpdated": "2025-12-27T22:22:23.120Z"
  },
  "chart-with-table": {
    "version": "1.0.0",
    "fingerprint": "207722fd8d7d71a552eecf58c7a9e5fc",
    "lastUpdated": "2025-12-27T22:22:23.120Z"
  },
  "code-block": {
    "version": "1.0.0",
    "fingerprint": "0ecdddacc789323dd8baa6768d1699fc",
    "lastUpdated": "2025-12-27T22:22:23.120Z"
  },
  "data-table": {
    "version": "1.0.0",
    "fingerprint": "3193388f42d202efc5e5de487e1f12f5",
    "lastUpdated": "2025-12-27T22:22:23.120Z"
  },
  "line-chart": {
    "version": "1.0.0",
    "fingerprint": "ef57fd80a19a843e59a82f84fd3ebcf7",
    "lastUpdated": "2025-12-27T22:22:23.120Z"
  },
  "pie-chart": {
    "version": "1.0.0",
    "fingerprint": "804388574bde67119dfcfb3f99ebc923",
    "lastUpdated": "2025-12-27T22:22:23.120Z"
  },
  "stat-card": {
    "version": "1.0.0",
    "fingerprint": "b2bd6c24a6093034691b89443d073aa5",
    "lastUpdated": "2025-12-27T22:22:23.120Z"
  },
  "status-badge": {
    "version": "1.0.0",
    "fingerprint": "3afb3edbae0401a577cc7124c9c3c15f",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "table": {
    "version": "1.0.0",
    "fingerprint": "87edb063d1a1df7b9dd646ed770db9b0",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "alert": {
    "version": "1.0.0",
    "fingerprint": "767d17bb596d231ae9494ffc78b62ccd",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "empty-state": {
    "version": "1.0.0",
    "fingerprint": "37c38d181798880d09fd6b709115a1d2",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "tippy-tooltip": {
    "version": "1.0.0",
    "fingerprint": "61c6e288dcb75ce1b80e1cca3a367dca",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "toast": {
    "version": "1.0.0",
    "fingerprint": "448edfb88e8704269998b5d542bfe0d5",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "use-toast": {
    "version": "1.0.0",
    "fingerprint": "2710f3f16a33bcc2c85dbb3b4796bbe7",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "toast-provider": {
    "version": "1.0.4",
    "fingerprint": "04396bccff87bbf0e221c2bcc6c5a46e",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "button-group": {
    "version": "1.0.0",
    "fingerprint": "8849f59df83e1fc483b3907a1a1d2d5f",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "checkbox": {
    "version": "1.0.0",
    "fingerprint": "f59d98d10eeaecf9752e9c3eb8016a9c",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "combo-box": {
    "version": "1.0.0",
    "fingerprint": "1f8357f7d43c994bc78464905d949f0c",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "date-picker": {
    "version": "1.0.2",
    "fingerprint": "27522574f738e8fa88790269da7cc785",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "file-upload": {
    "version": "1.0.1",
    "fingerprint": "2ffcbcfc82acbca4d396ec02f3265c16",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "form-template": {
    "version": "1.0.1",
    "fingerprint": "3887ac841d13e143773fab99e0484a81",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "input": {
    "version": "1.0.0",
    "fingerprint": "4e15127f8418efddae2ce749d4ede49a",
    "lastUpdated": "2025-12-27T22:22:23.121Z"
  },
  "multi-select": {
    "version": "1.0.1",
    "fingerprint": "20f3946b62b6285bf2c15aab5b717fb7",
    "lastUpdated": "2025-12-27T20:11:37.239Z"
  },
  "radio": {
    "version": "1.0.0",
    "fingerprint": "67455e7b0b15078db13dbeb4b94afb4b",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "search-input": {
    "version": "1.0.0",
    "fingerprint": "6c161718f42297f4cdc2cf6674e57adb",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "segmented-control": {
    "version": "1.0.1",
    "fingerprint": "c766d53e8021af215a28844bc22e898b",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "select": {
    "version": "1.0.1",
    "fingerprint": "021155e3e0584e499e97ff70e7a48253",
    "lastUpdated": "2025-12-27T20:11:37.240Z"
  },
  "textarea": {
    "version": "1.0.0",
    "fingerprint": "15a8847f406f5e08a3b525f6afc29474",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "toggle-switch": {
    "version": "1.0.0",
    "fingerprint": "f37ee3e768fbdb33a6e9de110dd6aaa0",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "accordion-item": {
    "version": "1.0.0",
    "fingerprint": "bc3315515427d68410474a0031508b63",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "accordion": {
    "version": "1.0.4",
    "fingerprint": "ae072ee36e6297ca5442dc1c181f528d",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "action-bar": {
    "version": "1.0.0",
    "fingerprint": "fca711cfad5a7581465726825855c6b9",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "card": {
    "version": "1.0.0",
    "fingerprint": "8967944a427cce3a8ab77b6116e84b44",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "drawer": {
    "version": "1.0.0",
    "fingerprint": "455d3c8c10257c27a0f72aafeb759715",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "list-item": {
    "version": "1.0.0",
    "fingerprint": "b7678fab66d384921f82b3670c82f683",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "list": {
    "version": "1.0.0",
    "fingerprint": "1c3d6a76509d993ec282b098463588ec",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "definition-term": {
    "version": "1.0.0",
    "fingerprint": "fc6e5c453ebdd24de2142c56742f0adb",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "definition-description": {
    "version": "1.0.0",
    "fingerprint": "8872a02b201fcb42550d719bb786c3c7",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "definition-list": {
    "version": "1.0.4",
    "fingerprint": "4693cfdb3781a955eef7bfbfc5b6f392",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "modal": {
    "version": "1.0.0",
    "fingerprint": "54ad842bb74b7acdc5c1c810ea06dc8f",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "page-header": {
    "version": "1.0.0",
    "fingerprint": "39cc6adf3df6e1dfcfa553bcff2bcdf3",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "section-header": {
    "version": "1.0.0",
    "fingerprint": "2a291538d53005aee794947ec98cf903",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "sidebar": {
    "version": "1.0.1",
    "fingerprint": "bdcbe0a5bc30c19ae2258610cbd5bd05",
    "lastUpdated": "2025-12-27T22:22:23.122Z"
  },
  "breadcrumb-item": {
    "version": "1.0.0",
    "fingerprint": "2cd605f3f29cc99351ef21622c946064",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "breadcrumbs": {
    "version": "1.0.4",
    "fingerprint": "0b5952a232085579c6690b15f264f880",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "menu-divider": {
    "version": "1.0.0",
    "fingerprint": "7f4270e1deddb6161a1cf28aff429468",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "menu-item": {
    "version": "1.0.0",
    "fingerprint": "3dd6d19d5a64315e2d0e397a3e305b8f",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "menu": {
    "version": "1.0.4",
    "fingerprint": "688ed04d8197f1e617da0919d4d079a1",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "pagination": {
    "version": "1.0.0",
    "fingerprint": "85d1ac1127bcb06b7e831bf60b5e066e",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "stepper": {
    "version": "1.0.0",
    "fingerprint": "e4490499808429f15996613d90abcc9a",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "tab-panel": {
    "version": "1.0.0",
    "fingerprint": "c4a3f5cb68c58536110fd99fa615cdde",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "tabs": {
    "version": "1.0.4",
    "fingerprint": "e8edfa14c3d72cae78ffd3cae7a23e22",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "avatar": {
    "version": "1.0.0",
    "fingerprint": "410eac7c557085a4548f0d6b79d0ffc2",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "badge": {
    "version": "1.0.1",
    "fingerprint": "c88d066b3fbf4abfa1c55d4d1f09f709",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "button": {
    "version": "1.0.1",
    "fingerprint": "307fa82cea639a284691488594b458b7",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "icon": {
    "version": "1.0.0",
    "fingerprint": "6e1291f354f6d0ff7b74376a7cff0ddf",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "mock-chart-data": {
    "version": "1.0.0",
    "fingerprint": "b0c26bae75653cba561236a9bdeba86c",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  },
  "mock-table-data": {
    "version": "1.0.4",
    "fingerprint": "5d753bf0383f3ada64bcc9accfd1c6d1",
    "lastUpdated": "2025-12-27T22:22:23.123Z"
  }
}
</file>

<file path="src/index.ts">
// src/index.ts

// 1. Import the master stylesheet for the entire library
import './index.css';

// 2. Export all types for consumers
export type * from './lib/types/wizard';
export type { ThemeName } from './contexts/ThemeContext';
export type { MultiSelectOption } from './components/forms/MultiSelect';
export { AUTO_REGISTRY } from './component-registry';
export { wizardManifest } from '../wizardManifest';

// AGgrid types
export type {
  // Core Types
  ColDef,
  ColGroupDef,
  GridOptions,
  GridApi,
  ColumnApi,
  
  // Value and Cell Renderer Types
  ValueFormatterParams,
  ValueGetterParams,
  ICellRendererParams,
  
  // Event Types
  CellClickedEvent,
  RowSelectedEvent,
  
  // Header Types
  IHeaderParams,
} from 'ag-grid-community';
export * from './data/mockData';

// 3. Export all components, hooks, and utilities

// ai 
export * from './blocks/ai/Loader';
export * from './blocks/ai/Actions';
export * from './blocks/ai/PromptInput';
export * from './blocks/ai/Message';
export * from './blocks/ai/Conversation';
export * from './blocks/ai/ChatFAB';

// contexts
export * from './contexts/ThemeContext';

// data-display
export * from './components/data-display/ActivityFeed';
export * from './components/data-display/DataTable';
export * from './components/data-display/Table';
export * from './components/data-display/BarChart';
export * from './components/data-display/ChartWithTable';
export * from './components/data-display/LineChart';
export * from './components/data-display/PieChart';
export * from './components/data-display/CodeBlock';
export * from './components/data-display/StatCard';
export * from './components/data-display/StatusBadge';

// feedback
export * from './components/feedback/Alert';
export * from './components/feedback/EmptyState';
export * from './components/feedback/TippyTooltip';
export * from './components/feedback/Toast';
export * from './components/feedback/ToastProvider';

// forms
export * from './components/forms/ButtonGroup';
export * from './components/forms/Checkbox';
export * from './components/forms/ComboBox';
export * from './components/forms/DatePicker';
export * from './components/forms/FileUpload';
export * from './components/forms/FormTemplate';
export * from './components/forms/Input';
export * from './components/forms/MultiSelect';
export * from './components/forms/Radio';
export * from './components/forms/SearchInput';
export * from './components/forms/SegmentedControl';
export * from './components/forms/Select';
export * from './components/forms/Textarea';
export * from './components/forms/ToggleSwitch';

// hooks
export * from './lib/hooks/useDataFetch';
export * from './lib/hooks/useChartTheme'; // ‚úÖ ADDED: Critical for Chart Theming

// iot
export * from './blocks/iot/DeviceCard';

// layout
export * from './components/layout/Accordion';
export * from './components/layout/Card';
export * from './components/layout/Drawer';
export * from './components/layout/List';
export * from './components/layout/Modal';
export * from './components/layout/Sidebar'; 
export * from './components/layout/ActionBar';
export * from './components/layout/PageHeader';
export * from './components/layout/SectionHeader';


// navigation
export * from './components/navigation/Breadcrumbs';
export * from './components/navigation/Menu';
export * from './components/navigation/Pagination';
export * from './components/navigation/Stepper';
export * from './components/navigation/Tabs';

// ui
export * from './components/ui/Avatar';
export * from './components/ui/Badge';
export * from './components/ui/Button';
export * from './components/ui/Icon';

// utils
export * from './utils/cn'; // ‚úÖ ADDED: Critical for Tailwind merging
</file>

<file path="wizardManifest.ts">
// This file is auto-generated by scripts/generate-manifest.js
// Do not modify this file directly.
import type { WizardManifest } from './src/lib/types/wizard';

export const wizardManifest: WizardManifest = {
  "components": [
    {
      "id": "suggestion",
      "name": "Suggestion",
      "version": "1.0.0",
      "description": "A small, pill-shaped button that offers a quick, suggested reply or follow-up question to the user.",
      "tags": [
        "ui",
        "ai",
        "button",
        "suggestion",
        "actions"
      ],
      "category": "ai",
      "props": [
        {
          "name": "onClick",
          "type": "() => void",
          "description": "Function to call when the suggestion is clicked."
        }
      ],
      "importPath": "./blocks/ai/Actions",
      "filePath": "src/blocks/ai/Actions.tsx"
    },
    {
      "id": "actions",
      "name": "Actions",
      "version": "1.0.4",
      "description": "A container for displaying a list of suggested, clickable actions that the user can take next.",
      "tags": [
        "ui",
        "ai",
        "layout",
        "actions",
        "suggestion"
      ],
      "category": "ai",
      "props": [],
      "importPath": "./blocks/ai/Actions",
      "filePath": "src/blocks/ai/Actions.tsx"
    },
    {
      "id": "chat-fab",
      "name": "ChatFAB",
      "version": "1.0.0",
      "description": "A floating action button (FAB) specifically for opening a chat interface, with a tooltip and icon.",
      "tags": [
        "ui",
        "button",
        "chat",
        "fab",
        "ai"
      ],
      "category": "ui",
      "props": [
        {
          "name": "onClick",
          "type": "() => void",
          "description": "Function to call when the button is clicked."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for custom styling."
        },
        {
          "name": "tooltipContent",
          "type": "string",
          "description": "The text content for the button's tooltip.",
          "default": "'Open AI Assistant'"
        }
      ],
      "importPath": "./blocks/ai/ChatFAB",
      "filePath": "src/blocks/ai/ChatFAB.tsx"
    },
    {
      "id": "conversation",
      "name": "Conversation",
      "version": "1.0.0",
      "description": "A container component that holds a series of Message components and manages the layout and scrolling of the chat history.",
      "tags": [
        "ui",
        "ai",
        "layout",
        "chat"
      ],
      "category": "ai",
      "props": [],
      "importPath": "./blocks/ai/Conversation",
      "filePath": "src/blocks/ai/Conversation.tsx"
    },
    {
      "id": "loader",
      "name": "Loader",
      "version": "1.0.1",
      "description": "A compact, theme-aware animation for indicating AI processing states. Optimized for chat interfaces.",
      "tags": [
        "ui",
        "ai",
        "feedback",
        "loading",
        "chat"
      ],
      "category": "ai",
      "props": [
        {
          "name": "variant",
          "type": "\"'bubble' | 'sparkle' | 'bar'\"",
          "description": "The visual style. 'bubble' is standard for chat. 'sparkle' is for creative generation.",
          "default": "'bubble'"
        },
        {
          "name": "label",
          "type": "string",
          "description": "Optional text displayed next to the animation."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Custom classes for the container."
        }
      ],
      "importPath": "./blocks/ai/Loader",
      "filePath": "src/blocks/ai/Loader.tsx"
    },
    {
      "id": "message",
      "name": "Message",
      "version": "1.0.0",
      "description": "Displays a single message in a conversation, including an avatar, author, content, and optional suggestions.",
      "tags": [
        "ui",
        "ai",
        "chat",
        "display"
      ],
      "category": "ai",
      "props": [
        {
          "name": "author",
          "type": "string",
          "description": "\"The name of the message author (e.g., 'User' or 'AI Assistant').\""
        },
        {
          "name": "content",
          "type": "string",
          "description": "The text content of the message."
        },
        {
          "name": "isUser",
          "type": "boolean",
          "description": "If true, styles the message as from the user."
        },
        {
          "name": "loading",
          "type": "boolean",
          "description": "If true, displays the Loader component instead of content."
        },
        {
          "name": "suggestions",
          "type": "string[]",
          "description": "An array of strings to display as suggested actions."
        },
        {
          "name": "onSuggestionClick",
          "type": "(suggestion: string) => void",
          "description": "Callback for when a suggestion is clicked."
        }
      ],
      "importPath": "./blocks/ai/Message",
      "filePath": "src/blocks/ai/Message.tsx"
    },
    {
      "id": "prompt-input",
      "name": "PromptInput",
      "version": "1.0.0",
      "description": "A specialized input field for users to type and submit prompts, including a send button.",
      "tags": [
        "ui",
        "ai",
        "form",
        "input",
        "chat"
      ],
      "category": "ai",
      "props": [
        {
          "name": "value",
          "type": "string",
          "description": "The current value of the input field."
        },
        {
          "name": "onChange",
          "type": "(e: React.ChangeEvent<HTMLInputElement>) => void",
          "description": "Callback fired when the input value changes."
        },
        {
          "name": "onSubmit",
          "type": "(e: React.FormEvent) => void",
          "description": "Callback fired when the form is submitted."
        },
        {
          "name": "placeholder",
          "type": "string",
          "description": "Placeholder text for the input field.",
          "default": "\"Type your message...\""
        }
      ],
      "importPath": "./blocks/ai/PromptInput",
      "filePath": "src/blocks/ai/PromptInput.tsx"
    },
    {
      "id": "activity-feed",
      "name": "ActivityFeed",
      "version": "1.0.0",
      "description": "Displays a chronological list of recent activities, typically with a timeline indicator.",
      "tags": [
        "templates",
        "patterns",
        "feed",
        "timeline",
        "data-display"
      ],
      "category": "templates-patterns",
      "props": [
        {
          "name": "items",
          "type": "ActivityItemData[]",
          "description": "An array of activity items to display in the feed."
        },
        {
          "name": "title",
          "type": "string",
          "description": "An optional title for the activity feed card.",
          "default": "\"Activity Feed\""
        },
        {
          "name": "changelogUrl",
          "type": "string",
          "description": "An optional URL for a \"View changelog\" link."
        }
      ],
      "importPath": "./components/data-display/ActivityFeed",
      "filePath": "src/components/data-display/ActivityFeed.tsx"
    },
    {
      "id": "bar-chart",
      "name": "BarChart",
      "version": "1.0.0",
      "description": "A theme-aware bar chart component powered by Recharts, for comparing categorical data.",
      "tags": [
        "charts",
        "data-visualization",
        "rechart"
      ],
      "category": "charts",
      "props": [
        {
          "name": "data",
          "type": "any[]",
          "description": "The dataset for the chart. Each object in the array represents a category."
        },
        {
          "name": "dataKeyX",
          "type": "string",
          "description": "The key from your data objects to be used for the X-axis (e.g., 'name', 'category')."
        },
        {
          "name": "barKeys",
          "type": "{ key: string; color: string }[]",
          "description": "An array of objects, each specifying a data key for a bar series and its color (e.g., `[{ key: 'pv', color: '#8884d8' }]`)."
        },
        {
          "name": "title",
          "type": "string",
          "description": "An optional title to display above the chart."
        }
      ],
      "importPath": "./components/data-display/BarChart",
      "filePath": "src/components/data-display/BarChart.tsx"
    },
    {
      "id": "chart-with-table",
      "name": "ChartWithTable",
      "version": "1.0.0",
      "description": "A wrapper component that combines a chart with an option to view its underlying data in a table within a drawer.",
      "tags": [
        "templates",
        "charts",
        "data-display",
        "pattern",
        "dashboard"
      ],
      "category": "templates-patterns",
      "props": [
        {
          "name": "title",
          "type": "string",
          "description": "The title displayed at the top of the chart card."
        },
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The chart component itself (e.g., <BarChart />, <LineChart />)."
        },
        {
          "name": "data",
          "type": "any[]",
          "description": "The raw data array used to render the chart and the table view."
        },
        {
          "name": "tableHeaders",
          "type": "TableHeader[]",
          "description": "The column definitions for the table view."
        }
      ],
      "importPath": "./components/data-display/ChartWithTable",
      "filePath": "src/components/data-display/ChartWithTable.tsx"
    },
    {
      "id": "code-block",
      "name": "CodeBlock",
      "version": "1.0.0",
      "description": "A component for displaying formatted and syntax-highlighted code snippets.",
      "tags": [
        "ui",
        "data-display",
        "code"
      ],
      "category": "ui",
      "props": [
        {
          "name": "code",
          "type": "string",
          "description": "The string of code to display."
        },
        {
          "name": "language",
          "type": "string",
          "description": "The programming language for syntax highlighting (e.g., 'tsx', 'css', 'javascript')."
        }
      ],
      "importPath": "./components/data-display/CodeBlock",
      "filePath": "src/components/data-display/CodeBlock.tsx"
    },
    {
      "id": "data-table",
      "name": "DataTable",
      "version": "1.0.0",
      "description": "A powerful data grid component that wraps AG Grid, providing advanced features like sorting, filtering, and resizing, fully themed to match the application.",
      "tags": [
        "data-display",
        "grid",
        "table",
        "ag-grid",
        "advanced"
      ],
      "category": "data-display",
      "props": [
        {
          "name": "rowData",
          "type": "any[]",
          "description": "The data to display in the grid, an array of row objects."
        },
        {
          "name": "columnDefs",
          "type": "ColDef[]",
          "description": "An array defining the columns of the grid, using AG Grid's `ColDef` structure."
        },
        {
          "name": "height",
          "type": "string",
          "description": "The height of the data table container (e.g., '500px', '100%').",
          "default": "'500px'"
        },
        {
          "name": "defaultColDef",
          "type": "ColDef",
          "description": "Default column definitions applied to all columns unless overridden."
        },
        {
          "name": "gridOptions",
          "type": "GridOptions",
          "description": "Additional AG Grid options to configure the grid's behavior."
        }
      ],
      "importPath": "./components/data-display/DataTable",
      "filePath": "src/components/data-display/DataTable.tsx"
    },
    {
      "id": "line-chart",
      "name": "LineChart",
      "version": "1.0.0",
      "description": "A theme-aware line chart component...",
      "tags": [
        "charts",
        "data-visualization",
        "rechart"
      ],
      "category": "charts",
      "props": [],
      "importPath": "./components/data-display/LineChart",
      "filePath": "src/components/data-display/LineChart.tsx"
    },
    {
      "id": "pie-chart",
      "name": "PieChart",
      "version": "1.0.0",
      "description": "A theme-aware pie chart component powered by Recharts, for showing proportional relationships of parts to a whole.",
      "tags": [
        "charts",
        "data-visualization",
        "rechart"
      ],
      "category": "charts",
      "props": [],
      "importPath": "./components/data-display/PieChart",
      "filePath": "src/components/data-display/PieChart.tsx"
    },
    {
      "id": "stat-card",
      "name": "StatCard",
      "version": "1.0.0",
      "description": "A specialized card for prominently displaying a key statistic, including an icon and optional trend indicator.",
      "tags": [
        "templates",
        "data-display",
        "metrics",
        "dashboard",
        "ui"
      ],
      "category": "templates-patterns",
      "props": [
        {
          "name": "title",
          "type": "string",
          "description": "The label for the displayed metric."
        },
        {
          "name": "value",
          "type": "string",
          "description": "The main value of the statistic."
        },
        {
          "name": "icon",
          "type": "IconName",
          "description": "The name of a Lucide icon to represent the metric."
        },
        {
          "name": "changeText",
          "type": "string",
          "description": "Text describing the change in the metric (e.g., '10% since last month')."
        },
        {
          "name": "changeDirection",
          "type": "\"'positive' | 'negative'\"",
          "description": "The direction of change, which determines the color of the badge."
        },
        {
          "name": "footerText",
          "type": "string",
          "description": "Optional text displayed at the bottom of the card for context."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for custom styling."
        }
      ],
      "importPath": "./components/data-display/StatCard",
      "filePath": "src/components/data-display/StatCard.tsx"
    },
    {
      "id": "status-badge",
      "name": "StatusBadge",
      "version": "1.0.0",
      "description": "A consistent status indicator featuring a color-coded dot and an optional text label. Essential for IoT devices and system states.",
      "tags": [
        "status",
        "badge",
        "iot",
        "indicator",
        "dot"
      ],
      "category": "data-display",
      "props": [
        {
          "name": "status",
          "type": "'online' | 'offline' | 'error' | 'warning' | 'active'",
          "description": "The state to represent. Determines the color of the dot."
        },
        {
          "name": "label",
          "type": "string",
          "description": "Custom text to display next to the dot. If omitted, displays the status name (e.g., \"Online\")."
        },
        {
          "name": "showDot",
          "type": "boolean",
          "description": "Whether to show the colored indicator dot.",
          "default": "true"
        },
        {
          "name": "className",
          "type": "string",
          "description": "Additional CSS classes."
        }
      ],
      "importPath": "./components/data-display/StatusBadge",
      "filePath": "src/components/data-display/StatusBadge.tsx"
    },
    {
      "id": "table",
      "name": "Table",
      "version": "1.0.0",
      "description": "A simple, theme-aware HTML table component for displaying tabular data, with support for custom cell rendering and empty states.",
      "tags": [
        "data-display",
        "table",
        "ui"
      ],
      "category": "data-display",
      "props": [
        {
          "name": "headers",
          "type": "\"{ key: string; label: string; render?: (value: any, row: Record<string, any>) => React.ReactNode; }[]\"",
          "description": "An array defining the table columns, including a `key`, `label`, and optional `render` function for custom cell content."
        },
        {
          "name": "data",
          "type": "\"Record<string, any>[]\"",
          "description": "An array of objects, where each object represents a row of data for the table."
        },
        {
          "name": "caption",
          "type": "string",
          "description": "An optional caption for the table, providing a title or summary."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for custom styling of the table container."
        }
      ],
      "importPath": "./components/data-display/Table",
      "filePath": "src/components/data-display/Table.tsx"
    },
    {
      "id": "alert",
      "name": "Alert",
      "version": "1.0.0",
      "description": "Displays static, in-page messages to convey important information like success, warnings, or errors.",
      "tags": [
        "feedback",
        "message",
        "notification",
        "ui"
      ],
      "category": "feedback",
      "props": [
        {
          "name": "title",
          "type": "string",
          "description": "The main heading or concise summary of the alert message."
        },
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "Optional additional content or a longer description for the alert."
        },
        {
          "name": "variant",
          "type": "'info' | 'success' | 'warning' | 'danger'",
          "description": "Defines the color scheme, icon, and semantic meaning of the alert.",
          "default": "'info'"
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for custom styling of the alert container."
        }
      ],
      "importPath": "./components/feedback/Alert",
      "filePath": "src/components/feedback/Alert.tsx"
    },
    {
      "id": "empty-state",
      "name": "EmptyState",
      "version": "1.0.0",
      "description": "A component for displaying a message when there is no data or content to show.",
      "tags": [
        "ui",
        "feedback",
        "empty",
        "placeholder"
      ],
      "category": "feedback",
      "props": [
        {
          "name": "icon",
          "type": "React.ComponentProps<typeof Icon>['name']",
          "description": "The name of a Lucide icon to visually represent the empty state."
        },
        {
          "name": "title",
          "type": "string",
          "description": "The main heading or title for the empty state message."
        },
        {
          "name": "description",
          "type": "string",
          "description": "A longer, descriptive text explaining the empty state or next steps."
        },
        {
          "name": "actionButton",
          "type": "React.ReactNode",
          "description": "An optional React node, typically a Button, to provide a primary action."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Additional CSS classes for custom styling of the container."
        }
      ],
      "importPath": "./components/feedback/EmptyState",
      "filePath": "src/components/feedback/EmptyState.tsx"
    },
    {
      "id": "tippy-tooltip",
      "name": "TippyTooltip",
      "version": "1.0.0",
      "description": "A flexible and theme-aware tooltip component that displays additional information on hover.",
      "tags": [
        "ui",
        "feedback",
        "tooltip",
        "overlay"
      ],
      "category": "feedback",
      "props": [
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The element that triggers the tooltip when hovered over (or clicked, etc.)."
        },
        {
          "name": "content",
          "type": "React.ReactNode",
          "description": "The content to be displayed inside the tooltip."
        },
        {
          "name": "placement",
          "type": "TippyProps['placement']",
          "description": "The position of the tooltip relative to its trigger element (e.g., 'top', 'bottom', 'left', 'right').",
          "default": "'top'"
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for custom styling of the tooltip content."
        }
      ],
      "importPath": "./components/feedback/TippyTooltip",
      "filePath": "src/components/feedback/TippyTooltip.tsx"
    },
    {
      "id": "toast",
      "name": "Toast",
      "version": "1.0.0",
      "description": "A single, transient notification message that appears briefly to provide feedback.",
      "tags": [
        "feedback",
        "notification",
        "message",
        "ui"
      ],
      "category": "feedback",
      "props": [
        {
          "name": "id",
          "type": "string",
          "description": "A unique identifier for this specific toast instance."
        },
        {
          "name": "title",
          "type": "string",
          "description": "An optional title for the toast notification."
        },
        {
          "name": "message",
          "type": "string",
          "description": "The main text content of the toast notification."
        },
        {
          "name": "type",
          "type": "\"'success' | 'error' | 'info' | 'warning'\"",
          "description": "Defines the visual style and semantic meaning of the toast.",
          "default": "'info'"
        },
        {
          "name": "duration",
          "type": "number",
          "description": "How long the toast should remain visible in milliseconds. Set to `0` for a sticky toast.",
          "default": "5000"
        },
        {
          "name": "onDismiss",
          "type": "(id: string) => void",
          "description": "Callback function triggered when the toast is dismissed."
        }
      ],
      "importPath": "./components/feedback/Toast",
      "filePath": "src/components/feedback/Toast.tsx"
    },
    {
      "id": "use-toast",
      "name": "useToast",
      "version": "1.0.0",
      "description": "A React hook to easily add and dismiss toast notifications anywhere within a `ToastProvider`.",
      "tags": [
        "hook",
        "feedback",
        "notification"
      ],
      "category": "feedback",
      "props": [],
      "importPath": "./components/feedback/ToastProvider",
      "filePath": "src/components/feedback/ToastProvider.tsx"
    },
    {
      "id": "toast-provider",
      "name": "ToastProvider",
      "version": "1.0.4",
      "description": "Provides a context for displaying transient notifications (toasts). Wrap your application with this component.",
      "tags": [
        "feedback",
        "notification",
        "context",
        "provider"
      ],
      "category": "feedback",
      "props": [
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The React nodes that will have access to the `useToast` hook. Typically wraps the entire application."
        }
      ],
      "importPath": "./components/feedback/ToastProvider",
      "filePath": "src/components/feedback/ToastProvider.tsx"
    },
    {
      "id": "button-group",
      "name": "ButtonGroup",
      "version": "1.0.0",
      "description": "Groups multiple Button components visually and can function as a segmented control (radio group).",
      "tags": [
        "ui",
        "form",
        "action",
        "group"
      ],
      "category": "form",
      "props": [
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The `Button` components to be grouped together."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes to apply to the container."
        },
        {
          "name": "value",
          "type": "string | number",
          "description": "For segmented controls, the value of the currently selected button."
        },
        {
          "name": "onValueChange",
          "type": "(value: string | number) => void",
          "description": "Callback function for segmented controls, called when the selected value changes."
        }
      ],
      "importPath": "./components/forms/ButtonGroup",
      "filePath": "src/components/forms/ButtonGroup.tsx"
    },
    {
      "id": "checkbox",
      "name": "Checkbox",
      "version": "1.0.0",
      "description": "A standard checkbox input for selecting one or more options from a set.",
      "tags": [
        "form",
        "input",
        "selection",
        "ui"
      ],
      "category": "form",
      "props": [
        {
          "name": "label",
          "type": "React.ReactNode",
          "description": "The visible label associated with the checkbox. Can be text or JSX."
        },
        {
          "name": "id",
          "type": "string",
          "description": "A unique HTML `id` for the input element. Automatically generated if not provided."
        },
        {
          "name": "checked",
          "type": "boolean",
          "description": "Controls whether the checkbox is currently checked."
        },
        {
          "name": "onChange",
          "type": "(event: React.ChangeEvent<HTMLInputElement>) => void",
          "description": "Callback function triggered when the checkbox's checked state changes."
        },
        {
          "name": "disabled",
          "type": "boolean",
          "description": "If true, the checkbox is unclickable and styled as disabled."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for the input element."
        }
      ],
      "importPath": "./components/forms/Checkbox",
      "filePath": "src/components/forms/Checkbox.tsx"
    },
    {
      "id": "combo-box",
      "name": "ComboBox",
      "version": "1.0.0",
      "description": "A text input with an integrated dropdown list of selectable options, allowing both typing and selection.",
      "tags": [
        "form",
        "input",
        "select",
        "dropdown",
        "autocomplete",
        "ui"
      ],
      "category": "form",
      "props": [],
      "importPath": "./components/forms/ComboBox",
      "filePath": "src/components/forms/ComboBox.tsx"
    },
    {
      "id": "date-picker",
      "name": "DatePicker",
      "version": "1.0.2",
      "description": "A theme-aware calendar input for selecting dates. Wraps react-datepicker to ensure consistent styling and \"Zero Jank\" layout stability.",
      "tags": [
        "form",
        "input",
        "date",
        "calendar",
        "ui"
      ],
      "category": "form",
      "props": [],
      "importPath": "./components/forms/DatePicker",
      "filePath": "src/components/forms/DatePicker.tsx"
    },
    {
      "id": "file-upload",
      "name": "FileUpload",
      "version": "1.0.1",
      "description": "A modern drag-and-drop file upload area with visual feedback and file listing.",
      "tags": [
        "form",
        "input",
        "upload",
        "files",
        "ui"
      ],
      "category": "form",
      "props": [],
      "importPath": "./components/forms/FileUpload",
      "filePath": "src/components/forms/FileUpload.tsx"
    },
    {
      "id": "form-template",
      "name": "FormTemplate",
      "version": "1.0.1",
      "description": "A data-driven form builder that renders a grid of input fields from a configuration array. Now supports File Uploads and Segmented Controls.",
      "tags": [
        "form",
        "template",
        "builder",
        "input",
        "layout"
      ],
      "category": "form",
      "props": [
        {
          "name": "fields",
          "type": "FormField[]",
          "description": "An array of field definition objects."
        },
        {
          "name": "onSubmit",
          "type": "(formData: Record<string, any>) => void",
          "description": "Callback function triggered when the form is submitted."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for the form container."
        }
      ],
      "importPath": "./components/forms/FormTemplate",
      "filePath": "src/components/forms/FormTemplate.tsx"
    },
    {
      "id": "input",
      "name": "Input",
      "version": "1.0.0",
      "description": "A theme-aware text input component with support for labels, icons, helper text, and validation states. Supports all standard HTML input attributes.",
      "tags": [
        "form",
        "input",
        "ui",
        "text"
      ],
      "category": "form",
      "props": [
        {
          "name": "label",
          "type": "string",
          "description": "An optional label to display above the input field."
        },
        {
          "name": "icon",
          "type": "IconName",
          "description": "Optional icon name to display inside the input field."
        },
        {
          "name": "helperText",
          "type": "string",
          "description": "A string that provides a hint or an error message below the input."
        },
        {
          "name": "error",
          "type": "boolean",
          "description": "If true, the input will be styled to indicate an error.",
          "default": "false"
        },
        {
          "name": "required",
          "type": "boolean",
          "description": "If true, a required indicator (*) will be displayed next to the label.",
          "default": "false"
        },
        {
          "name": "showOptionalLabel",
          "type": "boolean",
          "description": "If true, an \"(optional)\" indicator will be displayed next to the label.",
          "default": "false"
        },
        {
          "name": "containerClassName",
          "type": "string",
          "description": "Optional additional CSS classes for the container."
        }
      ],
      "importPath": "./components/forms/Input",
      "filePath": "src/components/forms/Input.tsx"
    },
    {
      "id": "radio",
      "name": "Radio",
      "version": "1.0.0",
      "description": "A single radio button input, typically used within a group where only one option can be selected.",
      "tags": [
        "form",
        "input",
        "selection",
        "ui"
      ],
      "category": "form",
      "props": [
        {
          "name": "label",
          "type": "React.ReactNode",
          "description": "The visible label associated with the radio button. Can be text or JSX."
        },
        {
          "name": "id",
          "type": "string",
          "description": "A unique HTML `id` for the input element. Automatically generated if not provided."
        },
        {
          "name": "name",
          "type": "string",
          "description": "The HTML `name` attribute, crucial for grouping radio buttons so only one can be selected."
        },
        {
          "name": "value",
          "type": "string | number | readonly string[]",
          "description": "The value associated with this radio button when it is selected."
        },
        {
          "name": "checked",
          "type": "boolean",
          "description": "Controls whether the radio button is currently selected."
        },
        {
          "name": "onChange",
          "type": "(event: React.ChangeEvent<HTMLInputElement>) => void",
          "description": "Callback function triggered when the radio button's checked state changes."
        },
        {
          "name": "disabled",
          "type": "boolean",
          "description": "If true, the radio button is unclickable and styled as disabled."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for the input element."
        }
      ],
      "importPath": "./components/forms/Radio",
      "filePath": "src/components/forms/Radio.tsx"
    },
    {
      "id": "search-input",
      "name": "SearchInput",
      "version": "1.0.0",
      "description": "A specialized input for search functionality, using the base Input component with a search icon.",
      "tags": [
        "form",
        "input",
        "search",
        "ui"
      ],
      "category": "form",
      "props": [],
      "importPath": "./components/forms/SearchInput",
      "filePath": "src/components/forms/SearchInput.tsx"
    },
    {
      "id": "segmented-control",
      "name": "SegmentedControl",
      "version": "1.0.1",
      "description": "A theme-aware linear toggle component. Ideal for switching between discrete modes (e.g., \"Map / List\").",
      "tags": [
        "input",
        "toggle",
        "switch",
        "radio",
        "control"
      ],
      "category": "form",
      "props": [],
      "importPath": "./components/forms/SegmentedControl",
      "filePath": "src/components/forms/SegmentedControl.tsx"
    },
    {
      "id": "textarea",
      "name": "Textarea",
      "version": "1.0.0",
      "description": "A theme-aware textarea component for multi-line text input.",
      "tags": [
        "form",
        "input",
        "ui"
      ],
      "category": "form",
      "props": [
        {
          "name": "label",
          "type": "string",
          "description": "An optional label to display above the textarea."
        },
        {
          "name": "containerClassName",
          "type": "string",
          "description": "Optional additional CSS classes for the container div."
        }
      ],
      "importPath": "./components/forms/Textarea",
      "filePath": "src/components/forms/Textarea.tsx"
    },
    {
      "id": "toggle-switch",
      "name": "ToggleSwitch",
      "version": "1.0.0",
      "description": "A theme-aware toggle switch component, offering a boolean input alternative to a checkbox.",
      "tags": [
        "form",
        "ui",
        "toggle",
        "switch",
        "input"
      ],
      "category": "form",
      "props": [
        {
          "name": "checked",
          "type": "boolean",
          "description": "Controls whether the toggle is in the 'on' (checked) or 'off' (unchecked) state."
        },
        {
          "name": "onChange",
          "type": "(checked: boolean) => void",
          "description": "Callback function triggered when the toggle state changes."
        },
        {
          "name": "label",
          "type": "string",
          "description": "An accessible text label displayed next to the toggle switch."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for the toggle switch container."
        },
        {
          "name": "disabled",
          "type": "boolean",
          "description": "If true, the toggle will be unclickable and styled as disabled.",
          "default": "false"
        }
      ],
      "importPath": "./components/forms/ToggleSwitch",
      "filePath": "src/components/forms/ToggleSwitch.tsx"
    },
    {
      "id": "page-header",
      "name": "PageHeader",
      "version": "1.0.0",
      "description": "Displays the main header section of a page, including a title, optional description, and a slot for action buttons.",
      "tags": [
        "layout",
        "typography",
        "header",
        "ui",
        "template"
      ],
      "category": "templates-patterns",
      "props": [
        {
          "name": "title",
          "type": "string",
          "description": "The main title of the page."
        },
        {
          "name": "description",
          "type": "string",
          "description": "A brief descriptive subtitle displayed below the main title."
        },
        {
          "name": "actions",
          "type": "React.ReactNode",
          "description": "A slot for action buttons or other controls, typically aligned to the right of the header."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for custom styling of the page header container."
        }
      ],
      "importPath": "./components/layout/PageHeader",
      "filePath": "src/components/layout/PageHeader.tsx"
    },
    {
      "id": "section-header",
      "name": "SectionHeader",
      "version": "1.0.0",
      "description": "A simple, consistent header for organizing sections of content within a page.",
      "tags": [
        "layout",
        "typography",
        "header",
        "ui"
      ],
      "category": "templates-patterns",
      "props": [
        {
          "name": "title",
          "type": "string",
          "description": "The main title for the content section."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for custom styling of the header container."
        }
      ],
      "importPath": "./components/layout/SectionHeader",
      "filePath": "src/components/layout/SectionHeader.tsx"
    },
    {
      "id": "breadcrumb-item",
      "name": "BreadcrumbItem",
      "version": "1.0.0",
      "description": "Represents a single step or link within a `Breadcrumbs` navigation path.",
      "tags": [
        "navigation",
        "ui",
        "link"
      ],
      "category": "navigation",
      "props": [
        {
          "name": "label",
          "type": "React.ReactNode",
          "description": "The text or content displayed for this breadcrumb item."
        },
        {
          "name": "to",
          "type": "string",
          "description": "The URL path for this item to navigate to. If not provided, it's just text."
        },
        {
          "name": "isCurrent",
          "type": "boolean",
          "description": "If true, indicates this is the current page and will not be a clickable link."
        },
        {
          "name": "icon",
          "type": "React.ReactNode",
          "description": "An optional icon to display next to the breadcrumb label."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Additional CSS classes for custom styling of the individual item."
        }
      ],
      "importPath": "./components/navigation/Breadcrumbs",
      "filePath": "src/components/navigation/Breadcrumbs.tsx"
    },
    {
      "id": "breadcrumbs",
      "name": "Breadcrumbs",
      "version": "1.0.4",
      "description": "A navigation component that shows the user's current location within a hierarchy of pages.",
      "tags": [
        "navigation",
        "ui",
        "path"
      ],
      "category": "navigation",
      "props": [
        {
          "name": "children",
          "type": "React.ReactElement<BreadcrumbItemProps>[]",
          "description": "A collection of `BreadcrumbItem` components representing the path."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Additional CSS classes for custom styling of the breadcrumbs container."
        }
      ],
      "importPath": "./components/navigation/Breadcrumbs",
      "filePath": "src/components/navigation/Breadcrumbs.tsx"
    },
    {
      "id": "menu-divider",
      "name": "MenuDivider",
      "version": "1.0.0",
      "description": "A visual separator for grouping MenuItems within a Menu.",
      "tags": [],
      "category": "",
      "props": [],
      "importPath": "./components/navigation/Menu",
      "filePath": "src/components/navigation/Menu.tsx"
    },
    {
      "id": "menu-item",
      "name": "MenuItem",
      "version": "1.0.0",
      "description": "An individual selectable item within a Menu component.",
      "tags": [],
      "category": "",
      "props": [],
      "importPath": "./components/navigation/Menu",
      "filePath": "src/components/navigation/Menu.tsx"
    },
    {
      "id": "menu",
      "name": "Menu",
      "version": "1.0.4",
      "description": "A dropdown menu component, useful for navigation or contextual actions.",
      "tags": [],
      "category": "",
      "props": [],
      "importPath": "./components/navigation/Menu",
      "filePath": "src/components/navigation/Menu.tsx"
    },
    {
      "id": "pagination",
      "name": "Pagination",
      "version": "1.0.0",
      "description": "A navigation control for moving between pages of content.",
      "tags": [
        "navigation",
        "ui",
        "data-display"
      ],
      "category": "navigation",
      "props": [
        {
          "name": "currentPage",
          "type": "number",
          "description": "The currently active page number (1-based index)."
        },
        {
          "name": "totalPages",
          "type": "number",
          "description": "The total number of pages available."
        },
        {
          "name": "onPageChange",
          "type": "(page: number) => void",
          "description": "Callback function invoked when the user selects a new page."
        },
        {
          "name": "maxPageButtons",
          "type": "number",
          "description": "The maximum number of visible page number buttons.",
          "default": "5"
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for the container."
        }
      ],
      "importPath": "./components/navigation/Pagination",
      "filePath": "src/components/navigation/Pagination.tsx"
    },
    {
      "id": "stepper",
      "name": "Stepper",
      "version": "1.0.0",
      "description": "Guides users through a sequence of discrete steps, ideal for multi-step forms or onboarding flows.",
      "tags": [
        "navigation",
        "progress",
        "wizard",
        "ui"
      ],
      "category": "navigation",
      "props": [
        {
          "name": "steps",
          "type": "{ label: string; summary?: string; }[]",
          "description": "An array of step objects, each with a `label` and optional `summary`."
        },
        {
          "name": "currentStep",
          "type": "number",
          "description": "The 0-based index of the currently active step."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for the stepper container."
        }
      ],
      "importPath": "./components/navigation/Stepper",
      "filePath": "src/components/navigation/Stepper.tsx"
    },
    {
      "id": "tab-panel",
      "name": "TabPanel",
      "version": "1.0.0",
      "description": "Represents a single tab and its associated content panel within a `Tabs` component.",
      "tags": [
        "navigation",
        "ui",
        "content"
      ],
      "category": "navigation",
      "props": [
        {
          "name": "id",
          "type": "string",
          "description": "A unique identifier for this tab panel, used to link it to its header."
        },
        {
          "name": "label",
          "type": "string",
          "description": "The text label displayed on the tab header."
        },
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The content to be displayed when this tab is active."
        },
        {
          "name": "icon",
          "type": "React.ReactNode",
          "description": "An optional icon to display next to the tab label in the header."
        }
      ],
      "importPath": "./components/navigation/Tabs",
      "filePath": "src/components/navigation/Tabs.tsx"
    },
    {
      "id": "tabs",
      "name": "Tabs",
      "version": "1.0.4",
      "description": "A navigation component that allows users to switch between different content panels within the same area.",
      "tags": [
        "navigation",
        "ui",
        "content-switcher"
      ],
      "category": "navigation",
      "props": [
        {
          "name": "children",
          "type": "React.ReactElement<TabPanelProps>[]",
          "description": "A collection of `TabPanel` components that define the tabs and their content."
        },
        {
          "name": "defaultActiveTab",
          "type": "string",
          "description": "The `id` of the tab that should be active by default when the component mounts."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Additional CSS classes for custom styling of the tabs container."
        }
      ],
      "importPath": "./components/navigation/Tabs",
      "filePath": "src/components/navigation/Tabs.tsx"
    },
    {
      "id": "avatar",
      "name": "Avatar",
      "version": "1.0.0",
      "description": "Displays a user's profile picture or initials as a fallback, with different size options.",
      "tags": [
        "ui",
        "profile",
        "user"
      ],
      "category": "ui",
      "props": [
        {
          "name": "name",
          "type": "string",
          "description": "The name of the user, used for generating initials if no `src` is provided."
        },
        {
          "name": "src",
          "type": "string",
          "description": "The URL of the image to display as the avatar. If not provided, initials are shown."
        },
        {
          "name": "size",
          "type": "'sm' | 'md' | 'lg'",
          "description": "Controls the dimensions and font size of the avatar.",
          "default": "'md'"
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for custom styling."
        }
      ],
      "importPath": "./components/ui/Avatar",
      "filePath": "src/components/ui/Avatar.tsx"
    },
    {
      "id": "badge",
      "name": "Badge",
      "version": "1.0.1",
      "description": "A small component to display a status, count, or label.",
      "tags": [
        "ui",
        "label",
        "indicator"
      ],
      "category": "ui",
      "props": [
        {
          "name": "variant",
          "type": "\"'primary' | 'secondary' | 'danger' | 'success' | 'warning' | 'outline'\"",
          "description": "The visual style of the badge."
        },
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The content to display inside the badge."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes."
        }
      ],
      "importPath": "./components/ui/Badge",
      "filePath": "src/components/ui/Badge.tsx"
    },
    {
      "id": "button",
      "name": "Button",
      "version": "1.0.1",
      "description": "The primary interactive element. Supports polymorphism (rendering as a link) via the 'asChild' prop.",
      "tags": [],
      "category": "input",
      "props": [
        {
          "name": "variant",
          "type": "'primary' | 'secondary' | 'outline' | 'ghost' | 'danger' | 'link' | 'accent'",
          "description": "The visual style of the button.",
          "default": "'primary'"
        },
        {
          "name": "size",
          "type": "'sm' | 'md' | 'lg' | 'icon'",
          "description": "The size of the button.",
          "default": "'md'"
        },
        {
          "name": "loading",
          "type": "boolean",
          "description": "If true, replaces content with a spinner.",
          "default": "false"
        },
        {
          "name": "iconLeft",
          "type": "IconName",
          "description": "Optional icon to display before the text."
        },
        {
          "name": "asChild",
          "type": "boolean",
          "description": "If true, delegates rendering to the child element (e.g. for Links).",
          "default": "false"
        },
        {
          "name": "onClick",
          "type": "() => void",
          "description": "Callback fired when the button is clicked."
        }
      ],
      "importPath": "./components/ui/Button",
      "filePath": "src/components/ui/Button.tsx"
    },
    {
      "id": "icon",
      "name": "Icon",
      "version": "1.0.0",
      "description": "A dynamic component that renders scalable vector icons from the Lucide library.",
      "tags": [
        "ui",
        "graphics",
        "svg",
        "symbol"
      ],
      "category": "ui",
      "props": [
        {
          "name": "name",
          "type": "IconName",
          "description": "The specific name of the Lucide icon to display (e.g., 'user', 'settings', 'check')."
        },
        {
          "name": "size",
          "type": "number | string",
          "description": "The width and height of the icon in pixels or CSS units.",
          "default": "24 (implicit from Lucide default)"
        },
        {
          "name": "color",
          "type": "string",
          "description": "The color of the icon."
        },
        {
          "name": "strokeWidth",
          "type": "number | string",
          "description": "The width of the icon's stroke.",
          "default": "2 (implicit from Lucide default)"
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for styling the SVG element."
        }
      ],
      "importPath": "./components/ui/Icon",
      "filePath": "src/components/ui/Icon.tsx"
    }
  ],
  "layouts": [
    {
      "id": "device-card",
      "name": "DeviceCard",
      "version": "1.0.0",
      "description": "A specialized card designed to represent a physical device or a digital entity with live state. Features slots for status, live values, and interactive controls.",
      "tags": [
        "layout",
        "iot",
        "device",
        "card",
        "dashboard"
      ],
      "category": "layout",
      "props": [
        {
          "name": "title",
          "type": "string",
          "description": "The name of the device or entity (e.g., \"Living Room Thermostat\")."
        },
        {
          "name": "description",
          "type": "string",
          "description": "A subtitle, often used for location or ID (e.g., \"Floor 2 ‚Ä¢ ID: #442\")."
        },
        {
          "name": "icon",
          "type": "IconName",
          "description": "The icon representing the device type."
        },
        {
          "name": "status",
          "type": "'online' | 'offline' | 'error' | 'warning' | 'active'",
          "description": "The current operational state of the device. Changes the badge color.",
          "default": "'offline'"
        },
        {
          "name": "value",
          "type": "string | number",
          "description": "The primary \"live\" metric to display (e.g., \"72¬∞\", \"1,240 rpm\")."
        },
        {
          "name": "trend",
          "type": "string",
          "description": "Optional secondary metric to show change (e.g., \"+2%\")."
        },
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "Interactive controls to place at the bottom of the card (e.g., a ToggleSwitch or Button)."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes."
        }
      ],
      "importPath": "./blocks/iot/DeviceCard",
      "filePath": "src/blocks/iot/DeviceCard.tsx"
    },
    {
      "id": "accordion-item",
      "name": "AccordionItem",
      "version": "1.0.0",
      "description": "A single, collapsible section within an `Accordion` component, consisting of a header and a hidden content body.",
      "tags": [
        "layout",
        "ui",
        "collapsible",
        "expandable"
      ],
      "category": "layout",
      "props": [
        {
          "name": "id",
          "type": "string",
          "description": "A unique identifier for this accordion item. Essential for `singleOpen` behavior."
        },
        {
          "name": "header",
          "type": "React.ReactNode",
          "description": "The content displayed in the clickable header of the accordion item."
        },
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The content that will be revealed or hidden when the accordion item is toggled."
        },
        {
          "name": "isOpen",
          "type": "boolean",
          "description": "Controls the open/closed state for this specific item (when used in a controlled `Accordion`)."
        },
        {
          "name": "onToggle",
          "type": "(id: string, isOpen: boolean) => void",
          "description": "Callback triggered when the item is toggled, providing its `id` and new `isOpen` state."
        }
      ],
      "importPath": "./components/layout/Accordion",
      "filePath": "src/components/layout/Accordion.tsx"
    },
    {
      "id": "accordion",
      "name": "Accordion",
      "version": "1.0.4",
      "description": "A container for multiple collapsible sections (`AccordionItem`s), useful for organizing content.",
      "tags": [
        "layout",
        "ui",
        "collapsible",
        "expandable"
      ],
      "category": "layout",
      "props": [
        {
          "name": "children",
          "type": "React.ReactElement<AccordionItemProps>[]",
          "description": "A collection of `AccordionItem` components to be managed by this Accordion."
        },
        {
          "name": "singleOpen",
          "type": "boolean",
          "description": "If true, only one `AccordionItem` can be open at a time. Opening one closes others.",
          "default": "false"
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for the Accordion container."
        }
      ],
      "importPath": "./components/layout/Accordion",
      "filePath": "src/components/layout/Accordion.tsx"
    },
    {
      "id": "action-bar",
      "name": "ActionBar",
      "version": "1.0.0",
      "description": "A persistent bar, typically at the bottom of a form or page, used to group primary actions like 'Save' and 'Cancel'.",
      "tags": [
        "layout",
        "form",
        "actions",
        "buttons",
        "ui",
        "pattern"
      ],
      "category": "layout",
      "props": [
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The content of the action bar, typically `Button` components."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for custom styling of the action bar container."
        }
      ],
      "importPath": "./components/layout/ActionBar",
      "filePath": "src/components/layout/ActionBar.tsx"
    },
    {
      "id": "card",
      "name": "Card",
      "version": "1.0.0",
      "description": "A versatile container that adapts to the current theme. Its background, border, and shape are themeable.",
      "tags": [
        "layout",
        "ui",
        "container",
        "box"
      ],
      "category": "layout",
      "props": [
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The content to be displayed inside the card."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for custom styling. Use this for adding padding, shadows, etc. (e.g., 'p-4 shadow-lg')."
        }
      ],
      "importPath": "./components/layout/Card",
      "filePath": "src/components/layout/Card.tsx"
    },
    {
      "id": "drawer",
      "name": "Drawer",
      "version": "1.0.0",
      "description": "A sliding panel that appears from the edge of the screen, used for additional content or forms.",
      "tags": [
        "layout",
        "modal",
        "slide-in",
        "ui"
      ],
      "category": "layout",
      "props": [],
      "importPath": "./components/layout/Drawer",
      "filePath": "src/components/layout/Drawer.tsx"
    },
    {
      "id": "list-item",
      "name": "ListItem",
      "version": "1.0.0",
      "description": "Represents a single item within a `List` component.",
      "tags": [
        "ui",
        "layout",
        "typography"
      ],
      "category": "layout",
      "props": [
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The content of the list item."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for the list item (`<li>`)."
        }
      ],
      "importPath": "./components/layout/List",
      "filePath": "src/components/layout/List.tsx"
    },
    {
      "id": "list",
      "name": "List",
      "version": "1.0.0",
      "description": "A component for displaying either ordered or unordered lists of `ListItem`s.",
      "tags": [
        "ui",
        "layout",
        "typography"
      ],
      "category": "layout",
      "props": [
        {
          "name": "type",
          "type": "'ul' | 'ol'",
          "description": "Specifies whether the list should be unordered ('ul') or ordered ('ol').",
          "default": "'ul'"
        },
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The list items, typically `ListItem` components."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for the list container (`<ul>` or `<ol>`)."
        }
      ],
      "importPath": "./components/layout/List",
      "filePath": "src/components/layout/List.tsx"
    },
    {
      "id": "definition-term",
      "name": "DefinitionTerm",
      "version": "1.0.0",
      "description": "Represents a term within a `DefinitionList`.",
      "tags": [
        "ui",
        "layout",
        "typography"
      ],
      "category": "layout",
      "props": [
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The content of the definition term."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for the definition term (`<dt>`)."
        }
      ],
      "importPath": "./components/layout/List",
      "filePath": "src/components/layout/List.tsx"
    },
    {
      "id": "definition-description",
      "name": "DefinitionDescription",
      "version": "1.0.0",
      "description": "Represents the description for a term within a `DefinitionList`.",
      "tags": [
        "ui",
        "layout",
        "typography"
      ],
      "category": "layout",
      "props": [
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "The content of the definition description."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for the definition description (`<dd>`)."
        }
      ],
      "importPath": "./components/layout/List",
      "filePath": "src/components/layout/List.tsx"
    },
    {
      "id": "definition-list",
      "name": "DefinitionList",
      "version": "1.0.4",
      "description": "Displays a list of terms and their corresponding definitions.",
      "tags": [
        "ui",
        "layout",
        "typography",
        "data-display"
      ],
      "category": "layout",
      "props": [
        {
          "name": "children",
          "type": "React.ReactNode",
          "description": "A collection of `DefinitionTerm` and `DefinitionDescription` components."
        },
        {
          "name": "className",
          "type": "string",
          "description": "Optional additional CSS classes for the definition list container (`<dl>`)."
        }
      ],
      "importPath": "./components/layout/List",
      "filePath": "src/components/layout/List.tsx"
    },
    {
      "id": "modal",
      "name": "Modal",
      "version": "1.0.0",
      "description": "A dialog box that appears on top of the current page, requiring user interaction to dismiss.",
      "tags": [
        "ui",
        "overlay",
        "dialog",
        "popup"
      ],
      "category": "layout",
      "props": [],
      "importPath": "./components/layout/Modal",
      "filePath": "src/components/layout/Modal.tsx"
    },
    {
      "id": "sidebar",
      "name": "Sidebar",
      "version": "1.0.1",
      "description": "A collapsible sidebar navigation component with support for branding, navigation items, and user profile.",
      "tags": [
        "layout",
        "navigation",
        "sidebar"
      ],
      "category": "layout",
      "props": [
        {
          "name": "items",
          "type": "SidebarItem[]",
          "description": "Array of navigation items."
        },
        {
          "name": "user",
          "type": "SidebarUser",
          "description": "User profile information for the footer."
        },
        {
          "name": "activeItemId",
          "type": "string",
          "description": "ID of the currently active navigation item."
        }
      ],
      "importPath": "./components/layout/Sidebar",
      "filePath": "src/components/layout/Sidebar.tsx"
    }
  ],
  "utils": [],
  "hooks": [],
  "data": [
    {
      "id": "mock-chart-data",
      "name": "mockChartData",
      "version": "1.0.0",
      "description": "Pre-defined datasets for prototyping charts and other data-driven components.",
      "tags": [
        "data",
        "mock",
        "example"
      ],
      "category": "data",
      "props": [],
      "importPath": "./data/mockData",
      "filePath": "src/data/mockData.ts"
    },
    {
      "id": "mock-table-data",
      "name": "mockTableData",
      "version": "1.0.4",
      "description": "Pre-defined datasets for prototyping tables and other data-driven components.",
      "tags": [
        "data",
        "mock",
        "example"
      ],
      "category": "data",
      "props": [],
      "importPath": "./data/mockData",
      "filePath": "src/data/mockData.ts"
    }
  ]
} as const;
</file>

<file path="package.json">
{
  "name": "@ramme-io/ui",
  "version": "1.2.1",
  "description": "The structural component library for the Ramme Framework.",
  "private": false,
  "publishConfig": {
    "access": "public"
  },
  "main": "./dist/index.umd.js",
  "module": "./dist/index.es.js",
  "types": "./dist/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/index.d.ts",
      "import": "./dist/index.es.js",
      "require": "./dist/index.umd.js"
    },
    "./style.css": "./dist/style.css",
    "./tailwind.preset.js": "./tailwind.preset.js",
    "./package.json": "./package.json"
  },
  "files": [
    "dist",
    "tailwind.preset.js",
    "style.css"
  ],
  "scripts": {
    "dev": "vite",
    "generate:manifest": "node scripts/generate-manifest.js",
    "generate:registry": "node scripts/generate-registry.js",
    "generate": "npm run generate:manifest && npm run generate:registry",
    "build": "npm run generate && vite build",
    "prepare": "npm run build",
    "storybook": "storybook dev -p 6006",
    "build-storybook": "storybook build",
    "bundle:ai": "repomix --ignore '**/*.lock,**/dist/**,**/storybook-static/**' --output 'ramme-ui-context.txt'"
  },
  "peerDependencies": {
    "react": ">=18.2.0",
    "react-dom": ">=18.2.0",
    "react-router-dom": "^6.25.1",
    "tailwindcss": ">=3.0.0"
  },
  "dependencies": {
    "@radix-ui/react-slot": "^1.2.3",
    "@tippyjs/react": "^4.2.6",
    "ag-grid-community": "^31.3.1",
    "ag-grid-enterprise": "^31.3.1",
    "ag-grid-react": "^31.3.1",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "date-fns": "^3.6.0",
    "lucide-react": "^0.537.0",
    "react-datepicker": "^7.3.0",
    "react-select": "^5.8.0",
    "react-syntax-highlighter": "^15.6.6",
    "recharts": "^2.12.7",
    "tailwind-merge": "^3.3.1",
    "tippy.js": "^6.3.7",
    "zod": "^4.1.13"
  },
  "devDependencies": {
    "@storybook/addon-essentials": "8.2.2",
    "@storybook/addon-interactions": "8.2.2",
    "@storybook/addon-links": "8.2.2",
    "@storybook/addon-themes": "8.2.2",
    "@storybook/blocks": "8.2.2",
    "@storybook/react": "8.2.2",
    "@storybook/react-vite": "8.2.2",
    "@storybook/testing-library": "0.2.2",
    "@types/doctrine": "^0.0.9",
    "@types/node": "^24.2.1",
    "@types/react": "^18.3.23",
    "@types/react-dom": "^18.3.7",
    "@types/react-syntax-highlighter": "^15.5.13",
    "@vitejs/plugin-react": "^4.3.1",
    "autoprefixer": "^10.4.19",
    "doctrine": "^3.0.0",
    "postcss": "^8.4.38",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "sass": "^1.77.8",
    "storybook": "8.2.2",
    "tailwindcss": "^3.4.4",
    "typescript": "^5.9.2",
    "vite": "^5.3.1",
    "vite-plugin-dts": "^3.9.1",
    "glob": "^10.3.10"
  }
}
</file>

</files>
